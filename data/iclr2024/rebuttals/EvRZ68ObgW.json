[
    {
        "title": "Controlling language over-optimization by targeting reward distribution"
    },
    {
        "review": {
            "id": "Gn1IkkbHGo",
            "forum": "EvRZ68ObgW",
            "replyto": "EvRZ68ObgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_Bj8n"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_Bj8n"
            ],
            "content": {
                "summary": {
                    "value": "This paper proposes an alternative to KL-constrained RLHF, namely fitting a target reward distribution given by scores of human demonstrations. The authors evaluated their method on three tasks and against several existing baselines, and found that targeting reward distribution allows for better control over reward over-optimization."
                },
                "soundness": {
                    "value": "1 poor"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "The experiments are substantive and cover a range of tasks, including summarization, controlled sentiment generation, and sequence continuation."
                },
                "weaknesses": {
                    "value": "My main concern about this paper is the motivation for targeting a \"human reward distribution\". If my understanding is correct, this target reward distribution is generated by passing a prompt and human-generated demonstration into a ground-truth reward model. I see two problems with this process. \n\nFirst, if we already have access to human demonstration data, performing supervised fine-tuning is sufficient to align the pretrained model with sample-approximated human response distribution, and the reward over-optimization problem does not exist. From the experiment results, supervised fine-tuning seems to be on par with the proposed method, as well. In practice, RLHF is used precisely because human demonstrations are hard to obtain (CITE), and preference labels over pairs of generated text are much easier and cheaper to collect. \n\nSecond, if a ground-truth reward model is present, we essentially move away from RLHF to pure RL with a given (but unknown) reward model. This is a different problem from what the paper claims to solve. If indeed the paper only intends to deal with problems where an explicit reward model can be queried, this will significantly limit the scope of applications the proposed method can be applied to. In my opinion, this paper should not position itself as tackling the reward over-optimization problem in RLHF. \n\nApart from the above, I also list some questions below, but my evaluation is mainly based on the stated weaknesses in motivation."
                },
                "questions": {
                    "value": "The win rate evaluation in the experiments are conducted using a Llama2-13B chat model. I wonder why the authors have not considered using more powerful open-API models for evaluation? Is there any particular reason for the chosen evaluation model? How do the authors guarantee the quality of such automated ratings? \n\nThe diversity metric used is the type/token ratio, which is a token-level metric that only accounts for what proportion of generated text is unique. Why is this a good metric? On page 5, the authors wrote \"these metrics allow for detecting unnatural and repetitive patterns in the generated text\". This seems to only cover a small aspect of the consequence of reward over-optimization. How can other consequences be detected?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6349/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698030631470,
            "cdate": 1698030631470,
            "tmdate": 1699636699822,
            "mdate": 1699636699822,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "yAZXaB3CFG",
                "forum": "EvRZ68ObgW",
                "replyto": "Gn1IkkbHGo",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "We would like to thank the reviewer for their thorough examination of our paper. Below, we respond to the two primary concerns raised by the reviewer:\n\n**Weaknesses**\n\nYour interpretation is accurate. However, it's important to note that we are operating in a standard setting where the reward model is inherently imperfect. The strength of our method lies in using human data to estimate a target reward for each prompt (ie. a reward distribution at the dataset level). This estimation is based on the rewards that human-generated sequences would receive. Consequently, our approach allows us to guide optimization and prevent over-optimization without the need for tuning regularization parameters.\n\n1. SFT is indeed a crucial baseline. In the experiments presented in the paper, we observe that while SFT provides a viable means for alignment (still, less effective than our method), it proves inefficient in Experiment 3 and Experiment 1 (note that we omitted the SFT method in Experiment 1, considering that baselines with various sampling methods are more relevant). In forthcoming versions of the paper, we commit to dedicating a more extensive section to comparing these baselines.\n\n2. Our situation differs from cases where a ground-truth reward model is available. Instead, we face the challenges arising from over-optimization in RLHF models. Our goal, as stated, is to present a method applicable to a reward model trained with RLHF, aiming to mitigate over-optimization by determining the appropriate target for a given prompt rather than solely maximizing the reward model. To illustrate, consider the scenario of training a safety model where the objective is not necessarily to achieve the maximum safety score consistently. Instead, we rather want to generate sequences that are both helpful and safe. Our method's direct application involves estimating the reward that sequences exhibiting both safety and helpfulness would receive according to the reward model, and using this score as the designated target.\n\n**Questions**\n\n1. Using Llama-13B was the best choice we could do at the time of the experiments. That said and moving forward, we acknowledge your suggestion and plan to enhance the win-rate metric by leveraging more powerful models accessible through APIs.\n\n2. While we acknowledge the limited scope of our diversity metric, we intentionally opted for a simple metric that effectively captures degenerated patterns in our experiments. Following you remark, we intend to expand our set of diversity metrics (incorporating measures such as self-BLEU) and add relevant over-optimization metrics such as the KL divergence with the base policy."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6349/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700530413532,
                "cdate": 1700530413532,
                "tmdate": 1700530413532,
                "mdate": 1700530413532,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "9oTJDZuH5c",
                "forum": "EvRZ68ObgW",
                "replyto": "yAZXaB3CFG",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6349/Reviewer_Bj8n"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6349/Reviewer_Bj8n"
                ],
                "content": {
                    "comment": {
                        "value": "Thank you for your response and clarification. However, I'm afraid that my concerns are still not fully addressed.\n\n1. Regarding the motivation of this paper: I am not convinced by the justification provided by the safety example. This example simply suggests that the reward model is not suitable for the task of producing safe and helpful responses. If you instead train a reward model that predicts high rewards for both safe and helpful responses, then that reward model can be used in subsequent policy optimization to obtain a desired policy. It seems to me that you are trying to mitigate a misaligned reward model by providing more human demonstration data, instead of directly training an aligned reward model on that extra data. \n\n2. Experiments and evaluations: It seems that there's a significant amount of experiments to make the results compelling enough. I still think that the authors should consider more powerful automated API as pseudo-human evaluators, whose alignment with human feedback has been tested and verified to some extent, as the authors promise to do. The same goes for evaluating on additional SFT baselines and diversity metrics. However, these experiments require a nontrivial amount of work and significant changes to the experiments section. It might be a better action for the authors to take time to improve and polish their results for a future venue."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6349/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700619105063,
                "cdate": 1700619105063,
                "tmdate": 1700619105063,
                "mdate": 1700619105063,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "J9cKjSn3N7",
            "forum": "EvRZ68ObgW",
            "replyto": "EvRZ68ObgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_2uTB"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_2uTB"
            ],
            "content": {
                "summary": {
                    "value": "This work explores RLHF with the reward specified as the distance to a target distribution. With this distributional reward perspective, this work explore targeting multiple problems with reward optimization: 1) covariate shift, 2) reward over-optimization and 3) multi-objective specification. They demonstrate optimizing for this distributional reward results in a learned policy that improves upon standard RLHF on the above 3 points."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "- Clearly presents investigating objectives and sets the stage clearly for the experiments section\n- Thorough experimentation of the baselines with strong and weak KL regularization for RLHF"
                },
                "weaknesses": {
                    "value": "Minor Weaknesses:\n- How sensitive is the choice of distance to the target? If you use L1 rather than L2 for example to define the reward?"
                },
                "questions": {
                    "value": "Please refer to the questions above"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "2: You are willing to defend your assessment, but it is quite likely that you did not understand the central parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6349/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698777278737,
            "cdate": 1698777278737,
            "tmdate": 1699636699691,
            "mdate": 1699636699691,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "DohwD12ELf",
                "forum": "EvRZ68ObgW",
                "replyto": "J9cKjSn3N7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "We would like to thank the reviewer for their positive comment.\n\nRegarding the choice of the distance to the target, we did preliminary experiments that are not included in the paper. We observed that actually the choice of distance did not change much the results as a specific target is defined for each prompt. We tried L1, L2, L4 distances."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6349/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700529846706,
                "cdate": 1700529846706,
                "tmdate": 1700529846706,
                "mdate": 1700529846706,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "RL1XLRFSO3",
            "forum": "EvRZ68ObgW",
            "replyto": "EvRZ68ObgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_xFiE"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_xFiE"
            ],
            "content": {
                "summary": {
                    "value": "The paper proposes new method, targeting reward distribution, to overcome reward over-optimization in RLHF. The idea is to create a target reward for each prompt, and minimizing the squared difference between the reward for the generated responses and the target reward."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "1 poor"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "The paper conducts good amount of experiments for different use cases, including calibrating sequence-level log-likelihood, mitigating over-specilization, and calibrating multi-objective RLHF."
                },
                "weaknesses": {
                    "value": "In my opinion, the main weakness of this paper is the inprecise usage of the term reward over-optimization. It is also unclear to me how the procedure compares with the simple SFT that directly fine-tune on the high-quality human generated data. I will elaborate in the question section."
                },
                "questions": {
                    "value": "1. The reward over-optimization in (Gao et al. 2023) refers to the scenario that during policy fine-tuning, the ground truth reward first goes up, and then decreases. Can the authors elaborate on how exactly Figure 2 reproduces this phenomenon? Note that the distribution mismatch may not indicate such change of ground truth reward during the training process.\n \n2. The proposed method aims to improve the reward to the level of human demonstrations, conditioned on the fact that we are given high-quality human demonstration data. In this case, how does the proposed method compare with direct supervised fine-tuning on the high-quality data?\n\n3. The main benefit of RLHF is its capability to extrapolate or generalize. One can maximize reward on unseen prompts, or maximize the reward on the seen prompts so that the generation can even outperform human demonstrations. Will the proposed method lose such capability by minimizing the L2 distance between the reward of the generated responses and target reward?\n\n4. Why is the method named target reward distribution, even though there is no reward distribution, but only a prompt-reward pair dataset?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6349/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698970691440,
            "cdate": 1698970691440,
            "tmdate": 1699636699570,
            "mdate": 1699636699570,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "ypqofXocoX",
                "forum": "EvRZ68ObgW",
                "replyto": "RL1XLRFSO3",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to reviewer xFiE"
                    },
                    "comment": {
                        "value": "First of all, we would like to thank the reviewer for their insightful comments. We will make sure to take into account all of those comments in future versions of the paper. We here respond to each comment:\n\n**1. Reward over-optimization**\nIn our experiments, we replicate a real-world scenario where we lack access to the actual ground truth reward and only have a proxy reward. Our findings reveal instances of over-optimization, demonstrating that excessive optimization against such a proxy hinders progress toward the \"true\" objective. In Figure 2, we observe that direct optimization against the proxy (second row; first column) results in closely matching an almost optimal distribution (i.e., maximal reward for each generation). However, the naturalness score is notably low, indicating a lack of diversity (Table 2). \nOur situation aligns with the definition of over-optimization as outlined by Gao et al. in 2023: \"In machine learning, this effect arises with proxy objectives provided by static learned models, such as discriminators and reward models. Optimizing too much against such a model eventually hinders the true objective, a phenomenon we refer to as over-optimization.\". We cannot display the pattern you mention as we don't have access to the \"true\" reward.\n\nIn this context, our method demonstrates that utilizing human data to construct a reward distribution enables us to identify an optimization sweet spot. In this sweet spot, generations achieve both high rewards and maintain naturalness. This approach represents a means to strike a balance and find an optimal trade-off to tackle over-optimization.\n\n**2. Comparison with SFT**\nIn the paper, we explicitly conduct a comparison with SFT applied on high-quality data. In experiment 1, we refrain from presenting the results for SFT, as it proves inefficient in addressing sequence-level optimization. Sampling procedures, in this context, seem to serve more as purposeful baselines. In the remaining two cases, we illustrate the distinctions between direct SFT and our approach.\nIn experiment 2 (refer to Figure 2 and Table 1), we demonstrate that direct SFT effectively aligns the rewards of generated sequences with those of human samples, but with a lesser degree of alignment compared to our method. However, in experiment 3 (summary task), we observe that SFT struggles to align the distribution (refer to Figure 3), whereas our method successfully achieves alignment between the distribution of rewards for model-generated summaries and the distribution of rewards for human summaries.\n\n**3. Generalization of the method to large datasets**\nThis paper aims to present a straightforward solution for training a model to generate outputs whose rewards align with a specified distribution. As discussed in the paper, our current focus is exclusively on distributions derived from data without addressing how to extrapolate the target. Your comment is very important as it highlights the most significant challenge of our method. In forthcoming versions of the paper, we will take care to elaborate on the process of extrapolating targets, either within a discussion or through additional experiments. One approach to broaden the scope across a larger dataset involves learning to map a prompt to a target. This can be achieved directly through a regression task or indirectly by assigning the target of a closely related prompt based on embedding approaches.\n\n**4. Name of the method**\nFor an individual training prompt level, the target is a singular scalar. However, when considering the dataset as a whole, we obtain a distribution of rewards. Referring to this as the \"target distribution method\" serves as a means to distinguish the optimal distribution we target from the solution of the standard RL problem, which is the argmax over reward values."
                    }
                },
                "number": 1,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6349/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700528010437,
                "cdate": 1700528010437,
                "tmdate": 1700528010437,
                "mdate": 1700528010437,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "Q5sUlcTT6l",
                "forum": "EvRZ68ObgW",
                "replyto": "ypqofXocoX",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6349/Reviewer_xFiE"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6349/Reviewer_xFiE"
                ],
                "content": {
                    "comment": {
                        "value": "Thank you for your responses. I apologize that I missed the comparison with SFT. I also have the follow-up questions regarding the responses:\n\n1. Regarding the overoptimization phenomenon, I think Gao et al. has made the point that optimizing \"too much\" against the proxy reward might hurt the performance. However, if we do early stopping according to some criterion, we might also arrive at some point that aligns well with the ground truth. For example, I think one potential choice of \"ground truth reward\" for Figure 1 might be some sort of distance between the human sentence distribution and model output distribution. And it would be great if you can plot how the distance changes as we continue to optimize $R$ or $R_{reg}$. This might potentially reproduce the overoptimization phenomenon you want. Simply optimizing $R$ to the end does not help illustrate this point too much, since Gao et al. also found that the KL-reward frontier does not change too much even if we do not have KL regularization.\n\n2. Could you please provide more discussions on why we want to match the human sentence distribution? It might happen that human responses are of mixed quality, and RLHF does help identifying the most high-quality ones, which may concentrate around high reward points. This is also related to the extrapolation question.\n\n3. Could you please provide more details on the dataset used for SFT? Are you using all the preferred responses from the preference data, or using a different dataset?\n\nOverall, I think the paper studies a very important question and has made some good initial progress. But there is a bit more works to do before the paper could be finally published. So I keep the score toward reject for this round."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6349/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700632960340,
                "cdate": 1700632960340,
                "tmdate": 1700632960340,
                "mdate": 1700632960340,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "1fJtkPkduh",
            "forum": "EvRZ68ObgW",
            "replyto": "EvRZ68ObgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_d8qz"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6349/Reviewer_d8qz"
            ],
            "content": {
                "summary": {
                    "value": "Reinforcement learning (RL) has emerged as an important tool for aligning large language models (LLM) with human preferences. Although RL has seen a lot of success, there are cons to using RL for alignment, which can have harmful side effects if not the alignment is not performed carefully. The most popular technique for mitigating this harmfulness is incorporating KL regularization into the objective. This paper proposes an additional technique for mitigating this harmfulness that empirically performs better than the KL regularization. \n\nThe central idea of the proposed technique is to collect a distribution of generations given a prompt and optimize the average reward of these generations given a prompt. The intuition is that designing a reward function on a collection of single prompt-generation pairs versus multiple generations per prompt prevents the reward function from being easily exploited. When an LLM exploits the reward, this leads to the harmful side effects."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "Reinforcement learning from human preferences is a critical topic, given the impact of real-world applications. There are several strengths of the paper outlined below:\n\n\n- Proposed solution: The idea of addressing issues with the reward by altering the reward function instead of regularizing the policy is a strength. In particular, the authors suggest collecting additional generation per prompt and using that as a regularization for the reward. Most attempts to address reward over-optimization either clip the reward score, add regularization to the reward training procedure, or add additional regularization to the policy optimization but have not focused on regularizing the reward  when optimized with RL\n\n\n- Diversity of experiments: The authors perform experiments on three settings where issues can arise when optimizing LLM: calibrating sequence-level log-likelihood, over-specialization with a reward model, and multi-objective calibration. For each setting, the authors provide a thorough investigation of the issues of the baselines and reasons why their proposed approach is better."
                },
                "weaknesses": {
                    "value": "Although the authors are addressing an important problem from an interesting perspective, the paper has several weaknesses outlined below:\n\n\n- Clarity: This paper has several grammatical typos, undefined variables, and not well-explained concepts (see the question section). Furthermore, the use cases are repetitive; in particular, over-specialization and sequence-level likelihood captures the same issue. If the model sequence-level likelihood starts to diverge, that indicates the over-specialization problems, and vice versa. Furthermore, the multi-objective use case is not a traditional objective optimized in RLHF, and for a fixed alpha, the multi-objective can be viewed as a single objective. This means that this use case is similar to the previous use cases.\n\n\n- Baselines: This paper is missing a few baselines, which makes it hard to understand the benefits of the proposed approach empirically( see the question section)."
                },
                "questions": {
                    "value": "Conceptual Questions:\n1. What is the difference between reward overoptimization, reward hacking, and over-specialization?\n2. What does it mean for a single prompt to have multiple generation pairs? Does this mean that the human is providing suboptimal generations?\n3. What do you mean by target distribution? Why would a single prompt have a target distribution versus an optimal target?\n4. What is the difference between training a policy to maximize the KL divergence between some initial policy \\pi_0 and maximizing the sequence-level log-likelihood of \\pi_0?\n\n\nTechnical Questions:\n1. When you defined D := (x, t(x)) - what is t(x)? \n2. How is the target distribution learned from single-prompt multiple-generation pairs? Is it the average of the generation rewards?\n3. How do you build a prompt-continuation dataset based on public datasets? For example, in IMDB, you have a set of movie reviews, but merely grouping reviews using their first 10 tokens is a heuristic that is not generalizable. In particular, this observation would be an artifact of the prompt length; as you increase the prompt length, the overlap of generations would decrease.\n4. For a given prompt x, the dataset consists of a set of generations for that prompt, i.e. {(x,y_i)}_{i=1}^{n}, where n is the number of generations per prompt. If this is the setting, then in equation 3, what is y? Is it a particular prompt in the set of prompts for a generation? If so, how do you choose which prompt to compare to the LLM-generated response \\hat{y}?\n5. Step 2 defines prompt data with a tuple instead of a set of tuples, meaning the dataset only has one prompt-generation pair instead of a set of prompt generations.\n6. For minimizing the sequence-level log-likelihood, the most straightforward thing to do is to optimize the InstructGPT objective PPO-ptx [1], which includes a pretraining loss into the RL objective. How does your proposed algorithm compare to simply including that objective in the RL optimization procedure?\n7. For the calibration experiments, I am not sure if the benefit is coming from the change in the reward function or the additional samples that you collect. It seems the reason why your algorithm is performing better is because you are taking the difference between y and \\hay{y} - which provides a fixed target to optimize. But this situation does not generalize to the preference dataset when you don't have a ground truth y. Instead, you have comparison data; it is not obvious what the ground truth target would be. I am unsure how this use case is representative of the RLHF problems.\n8. The results for calibration show various sampling schemes' performance, but what sampling scheme did you choose for your algorithm and the baseline RL algorithm?\n9. What is the difference between your alignment loss and MLE?\n10. How does R_reg perform on the multi-objective experiments?\n11. Did you tune \\alpha in the multi-objective experiments? If so how did you tune \\alpha?\n12. In Figure 4, the metrics arrows conflict with the best scores. For example, R^{pref} arrow it points upward, and the best score is 5.64, but you bolded 4.15. This issue is consistent with a few other metrics as well."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6349/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1699195924936,
            "cdate": 1699195924936,
            "tmdate": 1699636699453,
            "mdate": 1699636699453,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "asXmByzVOM",
                "forum": "EvRZ68ObgW",
                "replyto": "1fJtkPkduh",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6349/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Part 1"
                    },
                    "comment": {
                        "value": "We would like to thank the reviewer for their insightful comments. Those comments are valuable to improve further versions of the paper. We here respond to all comments.\n\n**Weaknesses**\n\n*Motivation*\n\nWe apologize for any lack of clarity and appreciate the reviewer's feedback. We will carefully consider all of the provided comments to enhance the clarity of our work. Regarding the perceived repetitiveness of the experiments, we respectfully disagree. While it is acknowledged that these experiments revolve around the common theme of addressing over-optimization, each one is motivated by distinct reasons:\n\n- Experiment 1: The exploration of sequence-level log-likelihood serves as an illustration to emphasize the necessity of calibrating the RL objective. Drawing inspiration from Holtzman et al. (2019), who demonstrated the effectiveness of targeting a calibrated log-likelihood in the context of language (using temperature and top-p), our approach extends this idea to RL objective training. The sequence-level log-likelihood experiment provides intuition into the nature of the problem.\n- Experiment 2: This experiment delves into the standard scenario where a classifier reward model may undergo over-optimization. This problem is a common topic in the literature and highlights the relevance of our method in mitigating the impact of over-optimizing a proxy and generating unnatural outputs.\n- Experiment 3: We respectfully disagree with the reviewer's perspective on the significance of studying a multi-objective scenario. This is a common issue in RLHF, particularly in addressing the helpfulness/safety calibration challenge. In general, the challenge in RLHF is not to merely optimize a single objective with a fixed alpha but rather to determine the appropriate alpha. Our method addresses this challenge by defining targets for each objective based on data, offering a systematic approach rather than manually setting a fixed alpha and conducting a parameter search.\n\n*Baselines*\n\nWe have endeavored to introduce a range of baselines, including diverse sampling procedures for Experiment 1 and comparisons with standard optimization algorithms for Experiments 2 and 3 (such as supervised fine-tuning, standard reinforcement learning, and reinforcement learning with KL divergence). Nevertheless, we acknowledge that this may be perceived as insufficient, and we are eager to incorporate additional baselines. What recommendations do you have in this regard?\n\n**Conceptual questions**\n\n1. We regret any imprecision in our use of terminology. Our primary intention is to align with the definition of *over-optimization* as articulated by Gao et al. 2023:\n\n\"In machine learning, this effect arises with proxy objectives provided by static learned models, such as discriminators and reward models. Optimizing too much against such a model eventually hinders the true objective, a phenomenon we refer to as over-optimization.\"\n\nIn subsequent iterations of the paper, we will exercise greater care in the precise application and definition of these terms.\n\n2. We unfortunately believe there might be a misunderstanding regarding our methodology that hinder the overall understanding of the paper. We never consider a single prompt generating multiple pairs of generations. In Section 3.2, when outlining our methodology, we specifically refer to pairs as \"prompt-continuation,\" \"prompt-reward,\" or \"target reward.\" We acknowledge that this misunderstanding may stem from a lack of clarity in our method and notations. We are committed to enhancing the clarity of this section to avoid any confusion that may have led to a misunderstanding of the paper. We sincerely apologize for any confusion that may have occurred.\n\n3. For a single prompt, we define a single target. When considering these targets across the entire dataset, a distribution of rewards emerges. We employ the term \"distribution\" at the dataset level to contrast with the standard RL optimal solution, which is the argmax distribution over the reward values. We will clarify this notion in future iterations of the paper.\n\n4. It can indeed be very similar if the KL is computed at the sentence level."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6349/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700528806297,
                "cdate": 1700528806297,
                "tmdate": 1700528806297,
                "mdate": 1700528806297,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]