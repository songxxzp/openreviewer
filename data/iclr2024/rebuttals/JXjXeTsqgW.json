[
    {
        "title": "Sequential Condition Evolved Interaction Knowledge Graph for Traditional Chinese Medicine Recommendation"
    },
    {
        "review": {
            "id": "HXxWPBdEom",
            "forum": "JXjXeTsqgW",
            "replyto": "JXjXeTsqgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_K5T8"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_K5T8"
            ],
            "content": {
                "summary": {
                    "value": "The existing Chinese medicine recommendation methods ignore the changes in the patient's condition. The author of this article proposes a Sequential Condition Evolved Interaction Knowledge Graph(SCEIKG), which comprehensively considers the dynamic changes in the patient's condition and formulates questions in a sequential manner. It also takes into account the effects of different herbs and the patient's condition to enhance the accuracy of the recommendations."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "It comprehensively considers the dynamic changes in the patient's condition and innovatively proposes a framework to address this issue.\nBy adding an interactive knowledge graph to improve accuracy is an interesting contribution. Experimental results demonstrate that this method outperforms current approaches."
                },
                "weaknesses": {
                    "value": "In Section 5\uff0c the dataset used in this study is relatively small, covering only 751 patient records and prescriptions, all of which are from Guangdong province. This may result in limitations to the model's generalizability. The patient\u2019s state transfer is implicit so it may be professional errors in the dataset that are difficult to detect. The paper can discuss the limitations and potential biases of the dataset.\n\nIn Appendix A.1\uff0c Insufficient evaluation of the knowledge graph: This article utilizes a knowledge graph embedding method that combines TransR with RotatE.Different knowledge graph completion methods may have different impacts on the results. This article does not provide comprehensive evaluation results for the generated knowledge graph. The quality and accuracy of the knowledge graph are very important for the subsequent tasks.\n\nIn Section 4\uff0c this article introduces a module to predict changes in patient condition but does not explain the accuracy of this prediction. It can also clarify how SCEIKG handles patient-specific changes to better understand and model individual differences, which may help improve the accuracy of the model and personalized recommendation ability.\n\nIn Appendix D\uff0c This article mentions the issue of herb compatibility in herbal recommendations but does not provide specific solutions to address this compatibility problem.\n\nOverall, the paper presents an innovative approach to TCM recommendation, but further clarity and validation are needed. The use of interaction graphs is promising, but practical implications should be explored in more detail."
                },
                "questions": {
                    "value": "Can we increase the reason for recommendations to enhance the interpretability of the model? The interpretability of the model is very important for both doctors and patients, which may enhance its practicality."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "details_of_ethics_concerns": {
                    "value": "NA"
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission5530/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1697896115710,
            "cdate": 1697896115710,
            "tmdate": 1699636567116,
            "mdate": 1699636567116,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "yTHBvJ8Isb",
                "forum": "JXjXeTsqgW",
                "replyto": "HXxWPBdEom",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**1.Dataset Size and Generalizability**\n\nRegarding the reviewer's concern about the small size of the experimental dataset, we would like to address the issue from the following three aspects.\n\nFirstly, we acknowledge that the dataset utilized in this paper is relatively small. Due to the subdivision of traditional Chinese medicine (TCM) and concerns related to patient privacy, the scale of TCM datasets is indeed constrained. **However, the TCM sequence dataset we utilized is extremely valuable, accumulated over a decade from the Guangdong Provincial Hospital of Chinese Medicine, one of China's top hospitals. It encompasses patient information from various regions of China, not limited to Guangdong Province.**  Additionally, publicly available datasets for TCM recommendations, such as TCM, typically only include information on symptoms and herbs, making them relatively limited for research on TCM sequence recommendations. Therefore, despite the small dataset size, these data hold significant value in the context of TCM research and provide ample diversity for validating the SCEIKG model. Furthermore, we plan to gradually expand the dataset size while ensuring patient privacy and data quality as more data becomes available.\n\nSecondly, despite the small size of our dataset, during model training, we not only utilized the ZzzTCM dataset but also trained on the IKG. The knowledge graph we constructed contains 4,308,799 triplets, involving 344,092 entities and 35 types of edge relationships. Both the TCM dataset and the ZzzTCM dataset were incorporated into the construction of the IKG. Detailed descriptions of the IKG are provided in Appendix A.1, and Appendix Table 4 outlines the data information, indicating the relative richness of our data resources.\n\nFinally, we conducted additional experiments where we partitioned the ZzzTCM training data at different ratios to assess the robustness of our model in situations with a relatively small dataset. The results are presented in the table below,\n\n| TrainingDataset | Precision@5 | Precision@10 | Precision@20 | Recall@5 | Recall@10 | Recall@20 | F1@5 | F1@10 | F1@20 |\n|------------------|-------------|--------------|---------------|----------|-----------|-----------|------|-------|-------|\n| 0.2Train         | 0.4813      | 0.3919       | 0.2809        | 0.2454   | 0.3913    | 0.5514    | 0.3164 | 0.3803 | 0.3627 |\n| 0.4Train         | 0.4648      | 0.3847       | 0.2912        | 0.2352   | 0.3864    | 0.5722    | 0.3041 | 0.3741 | 0.3758 |\n| 0.6Train         | 0.4933      | 0.3960       | 0.2951        | 0.2571   | 0.4088    | 0.5933    | 0.3287 | 0.3901 | 0.3835 |\n| 0.8Train         | 0.4959      | 0.4025       | 0.2879        | 0.2551   | 0.4089    | 0.5733    | 0.3264 | 0.3931 | 0.3721 |\n| 0.9Train         | 0.5084      | 0.4206       | 0.3040        | 0.2470   | 0.4021    | 0.5718    | 0.3235 | 0.3994 | 0.3867 |\n| 0.94Train        | 0.5477      | 0.4275       | 0.3087        | 0.2727   | 0.4243    | 0.6010    | 0.3538 | 0.4128 | 0.3973 |\n| 0.98Train        | 0.6000      | 0.4579       | 0.3066        | 0.3059   | 0.4613    | 0.6151    | 0.3932 | 0.4465 | 0.3987 |\n\nFrom these results, it is evident that with an increase in the training set, the evaluation metrics show an upward trend to some extent. This indicates that the dataset size is not the sole determining factor for the model's performance. **We added this experiment to the Appendix C Parameter Sensitivity section of the revised version, at line 607 of the paper, and drew the trend of the results, displayed in Figures 6, 7, and 8 of the paper, and highlighted in red. See the revised version for details.**\n\n**With regard to the potential for professional errors in the dataset, we processed the data by firstly using ChatGPT's advanced language comprehension capabilities to parse and extract the symptom set from the historical records, and then we utilized the expertise of experienced Chinese medicine practitioners to sift through our data, an approach that reduces the risk of professional errors in the dataset. However, we agree that this risk is an important consideration.**  In addition, the dataset was primarily collected for the primary treatment of insomnia and, as we can see from Fig.5 in our Appendix A, the top ten symptoms and herbs in our dataset were all related to insomnia, and different types of illnesses were not considered in our dataset. We discuss the limitations of our dataset in the revised version of Conclusion.\n\nThank you again for your review and valuable comments and we will continue to work on improving and refining our study."
                    }
                },
                "number": 16,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700335642968,
                "cdate": 1700335642968,
                "tmdate": 1700544967036,
                "mdate": 1700544967036,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "GgzWyKiPys",
                "forum": "JXjXeTsqgW",
                "replyto": "HXxWPBdEom",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**2. Knowledge Graph Evaluation** \n\nWe appreciate the careful review by the Reviewer regarding the knowledge graph evaluation in our study.  We recognize that a more thorough evaluation of this component can strengthen our research findings and provide a clearer understanding of the impact of the knowledge graph on our results. To address the issues raised by the reviewer, we have supplemented with additional Knowledge Graph Completion (KGC) methods. This allows us to compare and contrast the effectiveness of the methods we adopted with other approaches, providing a more comprehensive understanding of the influence of the IKG on model performance. **We conducted a supplementary Evaluation of IKG in Revision 4.2, at line 302 of the paper, where we experimented with various knowledge graph completion methods, and further confirmed the validity of our method by the results highlighted in orange in Table 3.** The results are as follows,\n\n| Methods     | Precision@5 | Precision@10 | Precision@20 | Recall@5 | Recall@10 | Recall@20 | F1@5 | F1@10 | F1@20 |\n|-------------|-------------|--------------|---------------|----------|-----------|-----------|------|-------|-------|\n| TransR       | 0.4738      | 0.3658       | 0.2695        | 0.2517   | 0.3818    | 0.5475    | 0.3159 | 0.3602 | 0.3508 |\n| TransE       | 0.5329      | 0.4315       | 0.3074        | 0.2680   | 0.4360    | 0.6077    | 0.3470 | 0.4211 | 0.3964 |\n| ComplEx      | 0.4966      | 0.4128       | 0.2936        | 0.2531   | 0.4258    | 0.5844    | 0.3260 | 0.4044 | 0.3798 |\n| RotatE       | 0.5114      | 0.3960       | 0.2889        | 0.2562   | 0.3903    | 0.5596    | 0.3316 | 0.3811 | 0.3713 |\n| $\\rho$RotatE | 0.5396      | 0.4396       | 0.3111        | 0.2687   | 0.4382    | 0.6131    | 0.3491 | 0.4261 | 0.4011 |\n| DistMult     | 0.4153      | 0.3980       | 0.2893        | 0.2490   | 0.4002    | 0.5673    | 0.3215 | 0.3866 | 0.3731 |\n| Our          | 0.5477      | 0.4275       | 0.3087        | 0.2727   | 0.4243    | 0.6010    | 0.3538 | 0.4128 | 0.3973 |\n\nFrom the results, it can be observed that different knowledge graph complementation methods have an impact on our herbal recommendation results, and it can also be seen that the TransR combined with RotatE method that we have used has the best results, which further proves the effectiveness of our method.\n\nWe thank the reviewers for their constructive feedback."
                    }
                },
                "number": 17,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700336120101,
                "cdate": 1700336120101,
                "tmdate": 1700545734262,
                "mdate": 1700545734262,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "1LgnXrqFOI",
                "forum": "JXjXeTsqgW",
                "replyto": "HXxWPBdEom",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**3. Herb Compatibility** \n\n**Thanking the reviewers for their questions, we have considered the issue of herb compatibility during model iteration, while we use domain knowledge for constraints to improve herb suitability and safety. While SCEIKG does not currently explicitly model DDI, it implicitly addresses the issue of herb compatibility through an iterative interaction knowledge graph that includes relationships between different herbs.** We have added a new experimental analysis of Herb Compatibility to section 4.2 of the revised version, which is demonstrated by Figure 4, in line 263 of the paper, and highlighted in red. In addition, we have reflected on the results of herb interactions by analyzing real doctors. We will provide you with further analyses.\n\nIn the motivation section of our paper, we highlight a significant and perplexing issue in TCM, which is the compatibility of herbal medicines, specifically, the interactions between different herbs when combined. However, the TCM treatment process encompasses a vast amount of complex TCM knowledge and involves four steps, making it challenging to elucidate the intricate interactions between different herbs. **To address this issue, we propose an approach based on domain knowledge from a knowledge graph to ensure herbal compatibility. Nevertheless, it's important to note that due to the complexity of TCM and the lack of standardization, accurately determining interactions between herbs can be challenging. For instance, herbs A and B may have antagonistic effects, but they might reach equilibrium when combined with herb C.** These interaction criteria are highly intricate, and herb compatibility is not fixed. Therefore, to enhance the accuracy of herbal recommendations, we constrain TCM recommendations based on domain knowledge from traditional Chinese medicine. Specifically, we introduce a regularization scheme\n   $\\boldsymbol{R}$\n   $=-\\sum_{i=1}^{N}\\sum_{j=1}^{N}W_{ij}^{h}\\hat{hc}^{(t)}_i \\hat{hc}^{(t)}_j$ to penalize $P^{(t)}$, limiting violations of herb pairs. The $W^{I}$ derived $W{i,j}^{h}$\n   weights from $\\mathcal{G}^{I}$ represent the strength of compatibility between the i-th and j-th herbs. If they are mutually exclusive, $W{i,j}^{h}=0$.\n\nWe demonstrate that we reduce the risk of herbal incompatibility by both\uff0c\n\nFirst, in the Herb Compatibility section of Appendix E of this paper, on line 679 of the paper, we conduct a detailed result analysis. Due to data privacy and confidentiality, we present partial correlations between herb pairs in the appendix, which dynamically change during model training. **According to real doctors' analysis, these changes are reasonable as they adapt to the patient's current condition. In Table 8, we showcase the results of herbal recommendations.  Although there are differences between the herbs we recommend during the first diagnosis and those prescribed by doctors, real doctors' analysis indicates that the model-recommended prescription is better suited to the patient's current condition. During the second diagnosis, although there are differences between the herbal recommendations and the actual prescription, doctors point out that the gap between them is not significant, and there are no mutually antagonistic herbs.** This further validates the effectiveness of considering herb compatibility and emphasizes that herb compatibility is a complex and dynamic issue.\n\nSecondly, **the experimental analyses were added to 4.2 in our revised version, in line 263 of the paper, highlighted in red.** Fig. 4 illustrates the heatmap for all herb pairs; herb names are omitted due to data privacy. From the heatmap, we observe that the magnified positions, specifically (Cassia Bark(\u8089\u6842)), Red Halloysite(\u8d64\u77f3\u8102)), and (Danshen Root(\u4e39\u53c2), Lightyellow Sophora Root(\u82e6\u53c2)), both exhibit a correlation of 0. The correlation between \"Cassia Bark(\u8089\u6842)\" and \"Red Halloysite(\u8d64\u77f3\u8102)\" is 0, indicating a certain degree of mutual antagonism between these two herbs. This aligns with the ancient literature's viewpoint that \"Cassia Bark is effective in regulating cold energy, but it loses its efficacy when encountered with Red Halloysite(\u5b98\u6842\u5584\u80fd\u8c03\u51b7\u6c14\uff0c\u82e5\u9022\u77f3\u8102\u4fbf\u76f8\u6b3a).\" In other words, Cinnamon and Red Halloysite are mutually repellent. Additionally, \"Danshen Root(\u4e39\u53c2)\" and \"Lightyellow Sophora Root(\u82e6\u53c2)\" cannot be mixed in some situations due to their differing medicinal properties. Nevertheless, real doctors also point out that some herb combinations may be controversial as they may have different effects in clinical practice. **We acknowledge that we have not yet fully addressed the issue of herb interactions**, but we have selected **70** recommended results for real doctors to analyze, and after real doctors' analysis, we have achieved a **91.4%** level of compatibility for our recommended herb pairings, which, in terms of our recommended results, demonstrates the validity of our method."
                    }
                },
                "number": 18,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700336942138,
                "cdate": 1700336942138,
                "tmdate": 1700545995454,
                "mdate": 1700545995454,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "ZMfM9MqPK9",
            "forum": "JXjXeTsqgW",
            "replyto": "JXjXeTsqgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_WEMc"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_WEMc"
            ],
            "content": {
                "summary": {
                    "value": "The paper focus on the problem of Traditional Chinese Medicine Recommendation which is formalized as a sequential prescription-making problem. Further, the paper introduces a methods named SCEIKG, which considers dynamics of patients' conditions across multiple diagnoses. In addition, an interaction knowledge graph is utilized to enhance the accuracy of recommendations. The SCEIKG contains three major modules, a heterogeneous graph neural network which combines a hierarchical attention message passing layer and a knowledge graph embedding layer, a horizontal conditional module which is used to extract the patient\u2019s status, and a transition condition module to model the patients\u2019 progression. The experiments are conducted on one real-world dataset to show the proposed methods' performance."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "1.The paper focus on the problem of Tradition Chinese Medicine Recommendation, which is an important problem in medical data mining literature.     \n2.The proposed method utilizes domain knowledge to enhance the recommendation of traditional Chinese medicine.     \n3.The experimental results show the advantages of the proposed method on the real-world dataset."
                },
                "weaknesses": {
                    "value": "1.The motivations of the paper needs to be clarified. The differences between Traditional Chinese Medicine Recommendation and General Medicine Recommendation should be emphasized. The author may want to explain these differences. Besides, it seems that the proposed method can be adopted into any other medicine recommendation setting. The author may need to stress the motivations.       \n2.The novelty of the paper is limited. The progress of knowledge fusion is by introducing a regularization into the loss function, which is trivial in the literature. Besides, what is the motivation of the module TRANSITION CONDITION MODULE?  Actually, modeling patients\u2019 dynamics in drug recommendation has been already addressed, such as. The author may need to discuss the difference.       \n3.The structure of the paper needs to be improved. The method is called Sequential Condition Evolved Interaction Knowledge Graph Learning. However, there is no formal definition of what an Interaction Knowledge Graph(IKG) is. The author may want to declare it.       \n4.For experiments, the method is only conducted on one dataset. Evaluations on more dataset should be conducted. The proposed method seems to be a general framework for drug recommendation. Therefore, the author may need to show the results on common datasets."
                },
                "questions": {
                    "value": "1. What is IKG\uff1f Is there any difference between common KGs and IKGs?      \n2. What is the difference between Traditional Medicine Recommendation and general medicine recommendation? It seems that the proposed method can be used in general medicine recommendation setting. The author may need to point out the differences."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission5530/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698242452065,
            "cdate": 1698242452065,
            "tmdate": 1699636567006,
            "mdate": 1699636567006,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "c0s1gusmlD",
                "forum": "JXjXeTsqgW",
                "replyto": "ZMfM9MqPK9",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "1. **Motivation of the paper**\n\nThe main motivations behind our research are as shown below **(which were also addressed in the second paragraph of the introduction section):**\n  \n **Lack of Sequence Data Research in Traditional Chinese Medicine (TCM):** We observed a scarcity of studies focusing on sequential data analysis in the TCM, especially when it comes to incorporating domain knowledge into herbal recommendations. Most existing TCM recommendation studies heavily rely on TCM public datasets, which are not sequential data. Furthermore, many TCM-based studies merely utilize the dataset itself without dynamically integrating domain knowledge. \n   \n**Uniqueness and Specificity of Traditional Chinese Medicine (TCM):** Traditional Chinese medicine differs significantly from general Western medicine in terms of treatment methods and diagnostic processes (often presented by unstructured data, e.g., text). TCM emphasizes personalized and holistic approaches, often requiring intricate herbal combinations tailored to an individual's overall condition. In contrast, Western medicine leans more towards quantifiable metrics, such as laboratory test results. TCM relies on comprehensive patient evaluations through observation, olfaction, inquiry, and pulse diagnosis, which distinguishes it from general medicine. **While some recommendation methods may be applicable in other medical domains, our work is tailored specifically to the field of TCM, with domain knowledge that leans towards traditional Chinese medicine principles.**\n\n   **In summary, our research is motivated by two key factors:**\n\n   **Firstly, we have developed a model to effectively capture the state transitions of patients following herb treatments.** In traditional sequence data analysis, the focus primarily revolves around changes in a patient's condition between different diagnoses, often involving comparisons of metrics and data collected at these diagnoses. However, this approach may not adequately account for the effects of herb treatments, as it mainly relies on comparisons of diagnosis information. In contrast, our model provides a more comprehensive method for modeling state transitions following herb treatments. We consider changes in a patient's status over a time series, allowing us to observe the evolution of a patient's condition over an extended period, including the impact of herb treatments. This approach enhances our understanding of the efficacy of TCM by considering state transitions, ultimately improving the accuracy of herbal recommendations.\n\n   **Secondly, we incorporate domain-specific knowledge from the traditional Chinese medicine into our model training process.** This knowledge integration is not limited to pre-trained information but involves a dynamic utilization of domain expertise. This fusion of knowledge provides our approach with a significant advantage in the field of traditional Chinese medicine. \n   \n   Through these innovative methods, our aim is to provide more rational herbal recommendations within the domain of traditional Chinese medicine. **We will elaborate further on the innovation and advantages of our paper in the following respones.**"
                    }
                },
                "number": 1,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700240610572,
                "cdate": 1700240610572,
                "tmdate": 1700243062544,
                "mdate": 1700243062544,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "5cn3Ns4b99",
                "forum": "JXjXeTsqgW",
                "replyto": "ZMfM9MqPK9",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "2. **Novelty of the Paper:**\n\nWe sincerely appreciate the reviewer's evaluation of our work. We would like to further elaborate on the innovations in our research. **The novelty of our work lies in the introduction of the Interaction Knowledge Graph (IKG), which integrates domain knowledge from TCM through an interactive knowledge graph and applies it to sequential herbal medicine recommendations.This approach, combined with our transition condition module, which explicitly models the evolution of patients' conditions, sets our work apart from existing drug recommendation systems that may not capture these dynamic aspects\u200b\u200b.**\n\n   **Firstly: Incorporation of Domain Knowledge and Knowledge Graph Completion** We fully recognize that constructing a comprehensive knowledge graph for TCM is a great challenge that requires substantial data support. In our study, we employed knowledge graph completion to infer new facts from known facts, enriching the knowledge graph and providing more information for herbal medicine recommendations. Training the knowledge graph embeddings together with the network is distinct from traditional recommendation systems, which typically focus on modeling individual users and items. In our case, we need to consider symptom sets on one side and herb sets on the other, which vary in size and pose a unique challenge. This comprehensive approach allows us to more accurately represent and utilize domain-specific knowledge in the field of TCM. **Additionally, we conducted a supplementary Evaluation of IKG in Revision 4.2, at line 302 of the paper, where we experimented with various knowledge graph completion methods, and further confirmed the validity of our method by the results highlighted in orange in Table 3.**\n   \n   **Secondly: Modeling Based on Sequential Data and State Transitions** We deeply understand the significance of modeling patient state transitions after herbs in the TCM. In our research, we introduced latent state representations to capture changes in patient conditions after taking prescriptions. This process is crucial in real-life scenarios, as doctors typically recommend herbs based on a patient's past diagnosis history and current condition. Our approach involves predicting patient states post-herbs and leveraging the potential inference inthe state transition process. Even in cases where we lack comprehensive records of a patient's next diagnosis, our method allows us to predict a patient's conditional representation, enabling us to make reasonable herb recommendations. **This aspect, which has been less considered in prior research on sequence data-based medication recommendations, is pivotal for better recommendations**.\n\n   The update process of SCEIKG resembles the concept of the EM algorithm.The updates to IKG will iteratively contribute to improving various modules depicted in Fig.2, and the model training within Fig.2 will reciprocally enhance IKG (on the right side of Fig.2). These two components collaborate and drive the entire iterative updating process.The incorporation of domain-specific knowledge into the loss function inthe TCM domain is not merely adding a regularization term but involves theutilization of knowledge graph completion during the update of IKG.\n   \n   In conclusion, our research comprehensively considers the fusion of domain knowledge and sequential data to enhance the accuracy of herbal recommendations. We would like to express our gratitude once again to thereviewer for their valuable suggestions and questions, which have stimulated deeper thinking and provided directions for further research."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700240792952,
                "cdate": 1700240792952,
                "tmdate": 1700544041674,
                "mdate": 1700544041674,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "wxGY7hz0Wx",
                "forum": "JXjXeTsqgW",
                "replyto": "ZMfM9MqPK9",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "3. **Definition of IKG and  Differences between IKG and Common KGs:**\n\n**Definition of IKG:** We define IKG in the revised version of Section 2, Problem Formulation, on line 93 of the paper and further elaborated in Appendix A.1. In this paper, for clarity, we highlight in blue.  **We define an IKG by $\\mathcal{G}=(\\mathcal{E},\\mathcal{R},\\mathcal{T}, \\mathcal{A})$, where $\\mathcal{E}$ is a set of entities and $\\mathcal{R}$ is a set of relations. $\\mathcal{T}$ is a set of triples $\\mathcal{T}=\\{(h,r,t)|h \\in \\mathcal{E}, t\\in \\mathcal{E}, r\\in \\mathcal{R}\\}$, where each triples means there is a relation $r$ from *head* entity $h$ to *tail* entity $t$. Specifically, $\\mathcal{E}$ consists of symptoms $\\boldsymbol{S}$, herbs $\\boldsymbol{H}$, and other entities such as pharmacology, efficacy, diseases, examination and diagnosis, which were extracted from TCM datasets to help entail relations between symptoms and herbs directly or indirectly.**\n\n **The differences between KG (Knowledge Graph) and IKG (Interaction Knowledge Graph) are as follows:**\n   \n**Data Source:** KG is initially constructed based on data from multiple sources, while IKG is an enhanced version built on top of it. KG may not include all the symptoms and herbal entities from the dataset, as it is constructed from multiple sources and may have missing elements. To ensure the quality and completeness of the knowledge graph, additional measures are taken for KG. These measures include adding symptoms and herbal entities present in the dataset and constructing corresponding triplets to fill potential gaps.\n   **Triplets:** In the construction of IKG, we employed the Normalized Pointwise Mutual Information to enhance the knowledge graph, improving its connectivity.\n \nIn summary, IKG is an enhanced and optimized knowledge graph built upon KG to improve its quality, completeness, and semantic relationships. It includes more entities and relationships to better support applications and research in the field of Traditional Chinese Medicine."
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700241269958,
                "cdate": 1700241269958,
                "tmdate": 1700544383686,
                "mdate": 1700544383686,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "NVGpRkRKMe",
                "forum": "JXjXeTsqgW",
                "replyto": "ZMfM9MqPK9",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "4. **The motivation of the module Transition Condition Module**\n\nWe deeply appreciate the reviewer's insightful comments and concerns regarding our Transition Condition Module. To address these points comprehensively, we provide an expanded explanation of this module in conjunction with the Horizontal Patient Representation, elaborating its mechanism and motivation. In Eq.(4), $\\Phi^{(t)}_P = \\boldsymbol{LSTM} \\left( \\left(  \\Pi \\left(h_S^{(t)},\\Psi^{(t-1)}\\right) ,C^{(t-1)} \\right),...,\\left( \\Pi \\left(h_S^{(0)},h_C^{(0)}\\right) ,C^{(0)}\\right); \\; W_6\\right)$ \n\nWe employ LSTM for sequential prediction, where $\\Phi^{(t)}$ denotes the comprehensive patient state during the $t$-th diagnosis. This state includes the patient's historical condition representation $h_C$, symptoms representation $h_S$, and the transitional state $\\Phi^{(t-1)}$, derived dynamically through the state transition function\n\n $ \\boldsymbol{T} \\left(\\Phi^{(t)}_P,\\boldsymbol{P}\\left(\\Phi^{(t)}_P, E_h\\right)\\right)$ \n\n$= \\boldsymbol{NN_4} \\left(Concatenate\\left({\\Phi_{P}^{(t)},(\\Phi_{P}^{(t)}\\odot  h_{H}^{(t)}),h_{H}^{(t)}}\\right);\\; W_8\\right)$. \n\n**To offer a more intuitive illustration,** consider a scenario involving three diagnoses. During the first diagnosis, leveraging the patient's current condition representation $h_C^{(1)}$ and symptoms representation $h_S^{(1)}$, we compute the comprehensive patient state $\u03a6^{(1)}$, upon which the initial herbal recommendation is based. In subsequent diagnoses, the previous hidden state $C^{(1)}$ (retaining the first visit's state information) and the transitional state $\u03a8^{(1)}=T(\u03a6^{(1)}, hc^{(1)})$  are integrated through the transition function $T$, alongside the symptoms representation $h_S^{(2)}$ of the second diagnosis, to derive the second comprehensive patient state $\u03a6^{(2)}$. Importantly, the second comprehensive patient state $\u03a6^{(2)}$ contains information from the first diagnosis, facilitating dynamic herbal recommendations. This incorporation enriches the patient's inherent state information, amalgamating the current and preceding diagnosis states, along with the transitional state after herbs. Consequently, this augmentation contributes to enhanced model performance, facilitating improved herbal recommendations.\n\n   Also, the concept of the patient state encapsulates a holistic representation of the patient's well-being, thereby affording a deeper understanding of their condition. **For instance,** a patient's description of \"recent severe insomnia accompanied by mild headaches\" may not be fully comprehended based solely on symptom representation. Our model predicts the transitional state to address the dynamic nature of herbal effects, considering patient-specific variations and herb interactions. This underpins our rationale for incorporating the transitional state even in cases where the patient's subsequent diagnosis patient state is unavailable, reaffirming our model's robustness in herbal recommendation.\n   \n****In the ablation experiments section of Section 4.2 of the revised version, in line 309 of the paper**, we conducted ablation experiments pertaining to this module.** Specifically, two variants were designed and evaluated: (1) SCEIKG w/o Sequence, which excludes consideration of multiple visits for sequential herb recommendation and the transition condition module, and (2) SCEIKG w/o State, which omits patient condition constraints denoted as $L_{state}$.  As depicted in Fig.3, the performance of both variants lags behind that of SCEIKG, further validating the substantial contribution of this module.\n   \nThrough the experimental analysis, we can conclude that this Transition condition module plays a very important role in the recommendation of traditional Chinese medicine, which can better consider the patient's condition change and treatment process, thus improving the accuracy of the recommendation of traditional Chinese medicine."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700241884611,
                "cdate": 1700241884611,
                "tmdate": 1700544677576,
                "mdate": 1700544677576,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "wfnvB0Rnn2",
            "forum": "JXjXeTsqgW",
            "replyto": "JXjXeTsqgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_9xVT"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_9xVT"
            ],
            "content": {
                "summary": {
                    "value": "This paper claims the traditional Chinese medicine practices are not treating the individual symptoms as well as lack of standardization. The paper points out a. the existing herb recommendation approaches are neglecting the long term effect that could potentially affected by the recommended medication; b. existing approach only relying on diagnose data set and pretrained domain knowledge thus cannot capture the intricate relation between symptom and herb. To address these issues, this paper proposed a three-module herb recommendation system that fuses information form domain knowledge graph, user's diagnosis, symptom, mediation history sequential information, as well as the predicted repercussion of the herb that about to be recommended. The paper reports the empirical comparison between the proposed approach and non-trivial baselines, and achieves best performance in 2/3 of the reported metrics. Case study and module wise ablation study are also provided.\n\n__Initial Recommendation__: Weak reject. Please see weak points for the key reasons."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "* The proposed three modules are sensible in terms of addressing the claimed existing shortcomings\n* The reported experiment shows the potential of the proposed approach over the existing herb recommendation approaches."
                },
                "weaknesses": {
                    "value": "* The long term effect of the items being recommended on the user has been studied under quite a few subarea in the recommender system.  Reinforcement learning (e.g., Interactive collaborative filtering), Counterfactual Reasoning (e.g., Unbiased learning-to-rank with biased feedback), as well as Evolving user profiles (e.g., Dynamic Poisson factorization) are some examples. Taking into long term effect is one of the main contribution claimed in the paper, yet the proposed module is not well positioned.\n* Drug-Drug interaction is one of the major factor to be considered when performing drug recommendation (e.g, Wu et al., Conditional generation net for medication recommendation) in order to avoid harmful effects. The proposed approach does not take this information into consideration. As also show in the case study, the proposed proposed approach recommended quite a few herbs that does not matches doctors prescription, considering Drug-Drug interaction would be crucial for risk minimization."
                },
                "questions": {
                    "value": "* How to position the proposed long term effect prediction module in related literature?\n* How does the proposed approach mitigate the risk that would caused by harmful drug-drug interactions?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission5530/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698698027317,
            "cdate": 1698698027317,
            "tmdate": 1699636566902,
            "mdate": 1699636566902,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "b8f8HqTx40",
                "forum": "JXjXeTsqgW",
                "replyto": "wfnvB0Rnn2",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**The reviewer's question regarding the long-term effects and the mention of various methods used in the recommender system field to consider long-term effects are greatly appreciated. We acknowledge the importance of these methods in modeling long-term effects in traditional recommender systems and their wide applicability across different domains and applications.**\n\n   However, it is essential to emphasize that TCM has unique characteristics in treatment methods and patient states. Therefore, specialized approaches are required to address long-term effects within this context. In our research, we are dedicated to addressing specific issues in the TCM recommendation domain. Consequently, our approach places particular emphasis on considering the long-term effects of herbs and the evolution of patient states.\n\n   We would like to clarify that our method is specifically designed for the TCM domain, and thus, it has different backgrounds and objectives when it comes to modeling long-term effects. In TCM treatment, the efficacy of herbal medicine often takes time to manifest and can be influenced by the overall condition of the patient as well as dynamic adjustments during treatment. Therefore, our method introduces the **Transition condition module** to dynamically capture changes in a patient's state between multiple diagnoses, allowing for more accurate herbal medicine recommendations. This module's design and application enable our model to consider the long-term effects on patients by dynamically integrating the patient's historical diagnosis information and current symptoms, resulting in more precise TCM recommendations. **Transition condition module, as stated in section 3.3 of the revised version, in line 203 of the paper, needs to be comprehensively understood in conjunction with the Horizontal Patient Representation.** We combine these two components to provide a detailed explanation of the impact of this module on long-term effects.** In Eq.(4), \n$\\Phi^{(t)}_P = \\boldsymbol{LSTM} \\left( \\left(  \\Pi \\left(h_S^{(t)},\\Psi^{(t-1)}\\right) ,C^{(t-1)} \\right),...,\\left( \\Pi \\left(h_S^{(0)},h_C^{(0)}\\right) ,C^{(0)}\\right); \\; W_6\\right)$\n\n We employ LSTM for sequential prediction, where $\\Phi^{(t)}$ denotes the comprehensive patient state during the $t$-th diagnosis. This state includes the patient's historical condition representation $h_C$, symptoms representation $h_S$, and the transitional state $\\Phi^{(t-1)}$, derived dynamically through the state transition function \n\n$ \\boldsymbol{T} \\left(\\Phi^{(t)}_P,\\boldsymbol{P}\\left(\\Phi^{(t)}_P, E_h\\right)\\right) $\n\n$= \\boldsymbol{NN_4} \\left(Concatenate\\left({\\Phi_{P}^{(t)},(\\Phi_{P}^{(t)}\\odot  h_{H}^{(t)}),h_{H}^{(t)}}\\right);\\; W_8\\right)$. \n\n**To offer a more intuitive illustration,** consider a scenario involving three diagnoses. During the first diagnosis, leveraging the patient's current condition representation $h_C^{(1)}$ and symptoms representation $h_S^{(1)}$, we compute the comprehensive patient state $\u03a6^{(1)}$, upon which the initial herbal recommendation is based. In subsequent diagnoses, the previous hidden state $C^{(1)}$ (retaining the first diagnosis's state information) and the transitional state $\u03a8^{(1)}=T(\u03a6^{(1)}, hc^{(1)})$  are integrated through the transition function $T$, alongside the symptoms representation $h_S^{(2)}$ of the second diagnosis, to derive the second comprehensive patient state $\u03a6^{(2)}$. Importantly, the second comprehensive patient state $\u03a6^{(2)}$ contains information from the first diagnosis, facilitating dynamic herbal recommendations. This incorporation enriches the patient's inherent state information, amalgamating the current and preceding diagnosis states, along with the transitional state after herbs. Consequently, this augmentation enhances model performance, facilitating improved herbal recommendations.\n\n   Also, the concept of the patient state encapsulates a holistic representation of the patient's well-being, thereby affording a deeper understanding of their condition. **For instance,** a patient's description of \"recent severe insomnia accompanied by mild headaches\" may not be fully comprehended based solely on symptom representation. Our model predicts the transitional state to address the dynamic nature of herbal effects, considering patient-specific variations and herb interactions. This underpins our rationale for incorporating the transitional state even in cases where the patient's subsequent diagnosis patient state is unavailable, reaffirming our model's robustness in herbal recommendation.\n\n**In the ablation experiments section of Section 4.2 of the revised version, in line 309 of the paper.** We conducted ablation experiments pertaining to this module. As depicted in Fig.3, the performance of both variants lags behind that of SCEIKG, further validating the substantial contribution of this module.\n\nThank you to the reviewers for their comments."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700273182584,
                "cdate": 1700273182584,
                "tmdate": 1700544631086,
                "mdate": 1700544631086,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "zGXFfpmytA",
                "forum": "JXjXeTsqgW",
                "replyto": "wfnvB0Rnn2",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**Reviewers have rightly pointed out the importance of considering drug-drug interactions (DDIs) in medication recommendation systems.** While SCEIKG does not currently model DDIs explicitly, it implicitly addresses the issue of herb compatibility through an iterative interaction knowledge graph, which includes relationships between different herbs. The graph helps avoid recommending mutually exclusive herbs.**In addition, we have reflected on the results of herb interactions by analyzing real doctors. We will provide you with further analyses.**\n\nIn the motivation section of our paper, we highlight a significant and perplexing issue in TCM, which is the compatibility of herbal medicines, specifically, the interactions between different herbs when combined. However, the TCM treatment process encompasses a vast amount of complex TCM knowledge and involves four steps, making it challenging to elucidate the intricate interactions between different herbs. **To address this issue, we propose an approach based on domain knowledge from a knowledge graph to ensure herbal compatibility. Nevertheless, it's important to note that due to the complexity of TCM and the lack of standardization, accurately determining interactions between herbs can be challenging. For instance, herbs A and B may have antagonistic effects, but they might reach equilibrium when combined with herb C.** These interaction criteria are highly intricate, and herb compatibility is not fixed. Therefore, to enhance the accuracy of herbal recommendations, we constrain TCM recommendations based on domain knowledge from traditional Chinese medicine. Specifically, we introduce a regularization scheme\n $\\boldsymbol{R}$\n$=-\\sum_{i=1}^{N}\\sum_{j=1}^{N}W_{ij}^{h}\\hat{hc}^{(t)}_i \\hat{hc}^{(t)}_j$ to penalize $P^{(t)}$, limiting violations of herb pairs. The $W^{I}$ derived $W{i,j}^{h}$\nweights from $\\mathcal{G}^{I}$ represent the strength of compatibility between the i-th and j-th herbs. If they are mutually antagonistic, $W{i,j}^{h}=0$.\n      \n**We demonstrate that we reduce the risk of herbal incompatibility by both**\n\nFirst, in the Herb Compatibility section of Appendix E of this paper, on line 679 of the paper, we conduct a detailed result analysis. Due to data privacy and confidentiality, we present partial correlations between herb pairs in the appendix, which dynamically change during model training. According to real doctors' analysis, these changes are reasonable as they adapt to the patient's current condition.  **The reviewer suggests that the recommended results of our proposed method rarely agree with those recommended by real doctors, but we have analyzed them by real doctors and the remedies we recommend are also appropriate for the current patient's condition. In Table 8**, we showcase the results of herbal recommendations. Although there are differences between the herbs we recommend during the first diagnosis and those prescribed by doctors, **real doctors' analysis indicates that the model-recommended prescription is better suited to the patient's current condition. During the second diagnosis, although there are differences between the herbal recommendations and the actual prescription, doctors point out that the gap between them is not significant, and there are no mutually antagonistic herbs.** This further validates the effectiveness of considering herb compatibility and emphasizes that herb compatibility is a complex and dynamic issue.\n\n**Secondly, the experimental analyses were added to 4.2 in our revised version, in line 263 of the paper, highlighted in red. Fig. 4 illustrates the heatmap for all herb pairs; herb names are omitted due to data privacy. From the heatmap, we observe that the magnified positions, specifically (Cassia Bark(\u8089\u6842)), Red Halloysite(\u8d64\u77f3\u8102)), and (Danshen Root(\u4e39\u53c2), Lightyellow Sophora Root(\u82e6\u53c2)), both exhibit a correlation of 0. The correlation between \"Cassia Bark(\u8089\u6842)\" and \"Red Halloysite(\u8d64\u77f3\u8102)\" is 0, indicating a certain degree of mutual antagonism between these two herbs. This aligns with the ancient literature's viewpoint that \"Cassia Bark is effective in regulating cold energy, but it loses its efficacy when encountered with Red Halloysite(\u5b98\u6842\u5584\u80fd\u8c03\u51b7\u6c14\uff0c\u82e5\u9022\u77f3\u8102\u4fbf\u76f8\u6b3a).\" In other words, Cinnamon and Red Halloysite are mutually repellent. Additionally, \"Danshen Root(\u4e39\u53c2)\" and \"Lightyellow Sophora Root(\u82e6\u53c2)\" cannot be mixed in some situations due to their differing medicinal properties.** Nevertheless, real doctors also point out that some herb combinations may be controversial as they may have different effects in clinical practice. We acknowledge that we have not yet fully addressed the issue of herb interactions, but we have selected **70** recommended results for real doctors to analyze, and after real doctors' analysis, we have achieved a **91.4%** level of compatibility for our recommended herb pairings, which, in terms of our recommended results, demonstrates the validity of our method."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700274387411,
                "cdate": 1700274387411,
                "tmdate": 1700543913081,
                "mdate": 1700543913081,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "nsFpiZQGR7",
            "forum": "JXjXeTsqgW",
            "replyto": "JXjXeTsqgW",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_TUE4"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission5530/Reviewer_TUE4"
            ],
            "content": {
                "summary": {
                    "value": "This paper proposed a framework for traditional Chinese medicine recommendation. The proposed SCEIKG method leverages additional knowledge through incorporating IKG, and predicts the patients\u2019 next visit state. As a result, it shows SOTA performance on a private dataset."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "1.\tThe task of this paper to recommend traditional Chinese medicine with deep learning method is important.\n2.\tThe idea of predicting next visit patient state is interesting and effective.\n3.\tThe proposed method outperforms baselines on most metrics on a private dataset."
                },
                "weaknesses": {
                    "value": "1.\tThe theoretical novelty is limited.\n2.\tThe dataset for experiment is rather small.\n3.\tThe presentation of method can be refined to make it easier to be understood.\n4.\tIt\u2019s not clear how the KG is completed and whether the predicted edges are reasonable. The effectiveness of incorporating IKG also needs to be clarified."
                },
                "questions": {
                    "value": "1.\tThe font size in figures is generally too small. Especially Fig. 2, which is important for model understanding.\n2.\tIt\u2019s recommended to define loss function (L_{IKG}, L_{mse}, etc.) in 4.1-4.3 to make the method easier to be understood.\n3.\tIn Fig. 3, method w/o IKG performs comparable with SCEIKG and even better on some metrics. Does the IKG really work?\n4.\tIn Fig. 3, method w/o sequence performs very poor, which is confusing, as doctor can prescribe accurately even without any historical information. A successful AI system should also be robust to patient without historical information.\n5.\tIf you can consider adverse drug-disease or drug-drug interaction, it will be a great contribution.\n6.\tIt\u2019s recommended to include metric \u2018Jaccard\u2019 to verify the set recommendation accuracy of the proposed method."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission5530/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698997265957,
            "cdate": 1698997265957,
            "tmdate": 1699636566791,
            "mdate": 1699636566791,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "PNCYiHLLSR",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "1. **The theoretical novelty is limited.**\n\nWe sincerely appreciate your evaluation of our work. We are delighted that you have raised some questions, as this has prompted us to delve deeper into our research and make improvements. In response to your comments and concerns, we would like to further elaborate on the innovative aspects of our study.\n\n   We do acknowledge the limitations of the novelty of our research in terms of theory. **The novelty of our work lies in the introduction of the Interaction Knowledge Graph (IKG), which integrates domain knowledge from TCM through an interactive knowledge graph and applies it to sequential herbal medicine recommendations. This approach, combined with our transition condition module, which explicitly models the evolution of patients' conditions, sets our work apart from existing drug recommendation systems that may not capture these dynamic aspects\u200b\u200b.**\n\n   **Firstly: Incorporation of Domain Knowledge and Knowledge Graph Completion** We fully recognize that constructing a comprehensive knowledge graph for TCM is a great challenge that requires substantial data support. In our study, we employed knowledge graph completion to infer new facts from known facts, enriching the knowledge graph and providing more information for herbal medicine recommendations. Training the knowledge graph embeddings together with the network is distinct from traditional recommendation systems, which typically focus on modeling individual users and items. In our case, we need to consider symptom sets on one side and herb sets on the other, which vary in size and pose a unique challenge. This comprehensive approach allows us to more accurately represent and utilize domain-specific knowledge in the field of TCM. \n**Additionally, we conducted a supplementary Evaluation of IKG in Revision 4.2, at line 302 of the paper, where we experimented with various knowledge graph completion methods, and further confirmed the validity of our method by the results highlighted in orange in Table 3.**\n\n   **Secondly: Modeling Based on Sequential Data and State Transitions** We deeply understand the significance of modeling patient state transitions after herbs in the TCM. In our research, we introduced latent state representations to capture changes in patient conditions after taking prescriptions. This process is crucial in real-life scenarios, as doctors typically recommend herbs based on a patient's past diagnosis history and current condition. Our approach involves predicting patient states post-herbs and leveraging the potential inference in the state transition process. Even in cases where we lack comprehensive records of a patient's next diagnosis, our method allows us to predict a patient's conditional representation, enabling us to make reasonable herb recommendations. **This aspect, which has been less considered in prior research on sequence data-based medication recommendations, is pivotal for better recommendations**.\n\n   In summary, our research takes into account the fusion of domain knowledge and sequential data, enhancing the accuracy of herbal medicine recommendations. Once again, we are grateful for the reviewer's suggestions and questions, which have guided us toward deeper reflection and provided directions for further research."
                    }
                },
                "number": 8,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700331085069,
                "cdate": 1700331085069,
                "tmdate": 1700540012642,
                "mdate": 1700540012642,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "NI1Jn6Qa3Q",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "2. **The dataset for the experiment is rather small.**\n\nRegarding the reviewer's concern about the small size of the experimental dataset, we would like to address the issue from the following three aspects. \n\n**Firstly,** we acknowledge that the dataset utilized in this paper is relatively small. Due to the subdivision of traditional Chinese medicine (TCM) and concerns related to patient privacy, the scale of TCM datasets is indeed constrained. However, the TCM sequence dataset we utilized is extremely valuable, accumulated over a decade from the Guangdong Provincial Hospital of Chinese Medicine, one of China's top hospitals. It encompasses patient information from various regions of China, not limited to Guangdong Province. Additionally, publicly available datasets for TCM recommendations, such as TCM, typically only include information on symptoms and herbs, making them relatively limited for research on TCM sequence recommendations. Therefore, despite the small dataset size, these data hold significant value in the context of TCM research and provide ample diversity for validating the SCEIKG model. Furthermore, we plan to gradually expand the dataset size while ensuring patient privacy and data quality as more data becomes available.\n\n**Secondly,** despite the small size of our dataset, during model training, we not only utilized the ZzzTCM dataset but also trained on the IKG. The knowledge graph we constructed contains 4,308,799 triplets, involving 344,092 entities and 35 types of edge relationships. Both the TCM dataset and the ZzzTCM dataset were incorporated into the construction of the IKG. **Detailed descriptions of the IKG are provided in Appendix A.1, and Appendix Table 4 outlines the data information,** indicating the relative richness of our data resources. \n\n**Finally,** we conducted additional experiments where we partitioned the ZzzTCM training data at different ratios to assess the robustness of our model in situations with a relatively small dataset. The results are presented in the table below,\n\n| TrainingDataset | Precision@5 | Precision@10 | Precision@20 | Recall@5 | Recall@10 | Recall@20 | F1@5 | F1@10 | F1@20 |\n|------------------|-------------|--------------|--------------|----------|-----------|-----------|------|-------|-------|\n| 0.2Train         | 0.4813      | 0.3919       | 0.2809       | 0.2454   | 0.3913    | 0.5514    | 0.3164 | 0.3803 | 0.3627 |\n| 0.4Train         | 0.4648      | 0.3847       | 0.2912       | 0.2352   | 0.3864    | 0.5722    | 0.3041 | 0.3741 | 0.3758 |\n| 0.6Train         | 0.4933      | 0.3960       | 0.2951       | 0.2571   | 0.4088    | 0.5933    | 0.3287 | 0.3901 | 0.3835 |\n| 0.8Train         | 0.4959      | 0.4025       | 0.2879       | 0.2551   | 0.4089    | 0.5733    | 0.3264 | 0.3931 | 0.3721 |\n| 0.9Train         | 0.5084      | 0.4206       | 0.3040       | 0.2470   | 0.4021    | 0.5718    | 0.3235 | 0.3994 | 0.3867 |\n| 0.94Train        | 0.5477      | 0.4275       | 0.3087       | 0.2727   | 0.4243    | 0.6010    | 0.3538 | 0.4128 | 0.3973 |\n| 0.98Train        | 0.6000      | 0.4579       | 0.3066       | 0.3059   | 0.4613    | 0.6151    | 0.3932 | 0.4465 | 0.3987 |\n\nFrom these results, it is evident that with an increase in the training set, the evaluation metrics show an upward trend to some extent. This indicates that the dataset size is not the sole determining factor for the model's performance. **We added this experiment to the Appendix C Parameter Sensitivity section of the revised version, at line 607 of the paper, and drew the trend of the results, displayed in Figures 6, 7, and 8 of the paper, and highlighted in red. See the revised version for details.**\n\nOnce again, we appreciate your review and valuable feedback. We remain committed to making continuous improvements and refining our research."
                    }
                },
                "number": 9,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700332030263,
                "cdate": 1700332030263,
                "tmdate": 1700540435043,
                "mdate": 1700540435043,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "cN1PN4A7bd",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "3. **The presentation of the method can be refined to make it easier to understand.**\n\nWe appreciate this feedback and will revise the manuscript to improve clarity and ease of understanding. We will provide more detailed explanations and simplify the terminology to make the approach more accessible to a wider audience. We have updated this section to take into account **Q1 and Q2** as commented by the reviewer, and the font size of the images has been changed, and we have highlighted in red in the revised version. **Furthermore, to facilitate a better understanding of our method, we would like to provide a further summary of our approach.**\n\n   Our model update process is similar to the concept of the EM algorithm. The updating of Interaction Knowledge Graph (IKG) is iteratively used to enhance various modules in Fig.2, and, in turn, the training of the model in Fig.2 improves IKG (on the right side of Fig.2). These two components collaborate, driving the entire iterative update process.**In our Appendix B, Algorithm 1 outlines the algorithm's process in detail.** Based on this, we will further explain the training process of the model within a single iteration.\n\n   Constructing a complete knowledge graph in TCM is a highly complex task that requires substantial data support. Therefore, knowledge graph completion from existing facts is crucial to make the knowledge graph more comprehensive and enrich entity information. Thus, in the first stage of **Algorithm 1 (Phase I: Interaction Knowledge Graph Completion),** we perform entity representation learning using **Eq. (3)** in the paper, where $f(h, r, t) = C * ||Sin(W_re_h + e_r - W_re_t)||_1$. Subsequently, we update it backward using the loss function **$L_{IKG}$ in Eq. (6)** to complete and enrich entity information.\n\n   In traditional knowledge graph embedding methods, typically only single knowledge triplets can be effectively represented, failing to capture higher-order similarities among entities. However, these higher-order relationships are critical for understanding complex interactions between entities, especially in the field of herbal medicine. For instance, ginger may treat both insomnia and cold symptoms, a multi-faceted relationship that cannot be accurately represented by a single triplet. To better aggregate symptom information and improve the quality of herb recommendations, we introduce the second stage of the algorithm. Building upon the first stage, we proceed to the second stage of **Algorithm 1 (Phase II: Recommended herbs based on sequential visits for each patient).**\n\n   In the 3.1 Section, we elaborate on how we employ a Graph Neural Network (GNN) approach to apply the entity knowledge representations obtained in the first stage to the second-stage herb recommendation. **In this process, we utilize an adjacency matrix constructed using the normalized pointwise mutual information method defined in Eq. (1) while incorporating the entity knowledge representations learned in the first stage. We then aggregate high-order relationships and high-order entity similarity information using Eq. (2):  $E^{(k)} = SUM(NN_1((E^{(k-1)}+W^{I}E^{(k-1)}W_1^{(k)}); W_3^{(k)}), NN_2((E^{(k-1)} \u2299 W^{I}E^{(k-1)}W_2^{(k)}); W_4^{(k)}))$.**  Finally, we propagate backward through the **loss function in Eq.(6)**, which includes the mean squared error **loss $L_{mse}$** to measure the distance between the recommended herb set and the actual herb set, the state **loss $L_{state}$** to assess the similarity between herb recommendations before and after, **and the regularization $\\boldsymbol{R}$ to constrain the relationships between herbs.** Through iterative gradient descent, we optimize the model parameters to minimize the overall loss function, achieving the optimization goal of our model.\n\n   In summary, throughout the entire iterative process of the algorithm, we first learn entity representations for IKG, and then apply these representations to the second-stage herb recommendation model, as seen in the middle module of Fig.2. These two stages iteratively update each other, ultimately completing the training of the entire model. This process can be viewed as dynamic knowledge graph completion and herbal recommendation optimization. We thank the reviewers for their questions, which prompted us to delve deeper into the internal mechanisms and implementation details of the model."
                    }
                },
                "number": 10,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700332451293,
                "cdate": 1700332451293,
                "tmdate": 1700540598778,
                "mdate": 1700540598778,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "GhN3XZNzM0",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "4.  **Completion of KG**\n\nWe describe the KG **in Appendix A.1 at the line 444 of the paper, Interaction Knowledge Graph**. Let us once again introduce the process of building the knowledge graph (KG). It primarily consists of two main stages. Firstly, we employ web scraping techniques using Python and other tools to dynamically fetch data from websites relevant to the domain. The relevant URLs are provided in Appendix Table 4. Subsequently, we systematically clean and organize this data. The second step involves applying manually designed rules to extract relevant triple knowledge from the web data. **For instance, we can transform information like \"Chrysanthemum has the effect of promoting qi circulation and relieving pain, and can treat wind-heat cold\" into representations of Traditional Chinese Medicine (TCM) knowledge, such as (Chrysanthemum, Medicinal Properties, Wind-Heat Cold) and (Chrysanthemum, Medicinal Functions, Promoting Qi Circulation and Relieving Pain). Through these steps, we construct the initial knowledge graph (KG).**\n\n   However, the initial KG may not encompass all the symptom and herbal entities present in the dataset.**To ensure the quality and comprehensiveness of the KG, we take further measures. We add the symptom and herbal entities mentioned in the dataset to the initial knowledge graph and build corresponding triples based on the dataset's content. For instance, (Symptom, Symptom-related Symptom, Symptom), (Symptom, Symptom-related Herbal, Herbal), and (Herbal, Herbal-related Herbal, Herbal) triples are constructed. This way, we form the final enhanced Interaction knowledge graph (IKG), as shown on the right side of Fig.2.**"
                    }
                },
                "number": 11,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700332764941,
                "cdate": 1700332764941,
                "tmdate": 1700540865232,
                "mdate": 1700540865232,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "uruAPQI1JM",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "5. **Rationality of IKG**\n\n**Regarding the reviewer's question about the rationale behind IKG, we would like to address it in conjunction with reviewer Q3.** IKG is an integral component of SCEIKG, consolidating Traditional Chinese Medicine (TCM) knowledge graphs and symptom-herb relationships. It is constructed using data from multiple sources and refined using the knowledge graph completion method. **We have analyzed this phenomenon in the Herb Recommendations section of Appendix E, in line 667 of the paper and highlighted in red.** And we will provide further analysis for your understanding. In addition, in order to facilitate a more intuitive observation of our results, we provide the following table for observations, \n\n| Sequential diagnoses | Symptom Set | Herb Set (w/o IKG) | Herb Set (SCEIKG) | Herb Set (TCM doctor) |\n|-----------------------|-------------|--------------------|-------------------|-----------------------|\n| First diagnosis       | \u6291\u90c1\u75c7(depression) | \u9ec4\u82a9(scutellaria baicalensis) | \u9ec4\u82a9(scutellaria baicalensis) | \u9ec4\u82a9(scutellaria baicalensis) |\n|                       | \u53e3\u5e72(xerostomia) | \u7099\u7518\u8349(glycyrrhiza uralensis) | \u7099\u7518\u8349(glycyrrhiza uralensis) | \u7099\u7518\u8349(glycyrrhiza uralensis) |\n|                       | \u5927\u4fbf\u8d39\u529b(dyschezia) | \u751f\u59dc(ginger) | \u751f\u59dc(ginger) | \u751f\u59dc(ginger) |\n|                       | \u5165\u7761\u56f0\u96be(insomnia) | \u5927\u67a3(jujube) | \u5927\u67a3(jujube) | \u5927\u67a3(jujube) |\n|                       | \u7720\u6d45\u6613\u9192(light sleep, easy to wake up) | \u4eba\u53c2(ginsen) | \u4eba\u53c2(ginsen) | \u4eba\u53c2(ginsen) |\n|                       | \u4e4f\u529b(fatigue) | \u6842\u679d(cinnamomum cassia) | \u6842\u679d(radix adenophorae) | \u5317\u6c99\u53c2(radix adenophorae) |\n|                       | \u80f8\u95f7(chest tightness) | \u832f\u82d3(tuckahoe) | \u832f\u82d3(bupleuri radix) | \u67f4\u80e1(bupleuri radix) |\n|                       | \u56db\u80a2\u9ebb\u6728(numbness of limbs) | \u5ddd\u828e(sichuan lovage rhizome) | \u767d\u828d(paeonia lactiflora) | \u5929\u82b1\u7c89(flos rosae rugosae) |\n|                       | \u820c\u6de1\u7ea2(pale red tongue) | \u6cd5\u534a\u590f(pinellia tuber) | \u7261\u86ce(ostrea gigas) | |\n|                       | \u4e0b\u7751\u6de1\u767d(pale lower eyelid) | \u5f53\u5f52(angelica sinensis (Oliv.) diels) | \u5e72\u59dc(zingiber officinale) | |\n| Second diagnosis      | \u53e3\u5e72(xerostomia) | \u9ec4\u82a9(scutellaria baicalensis) | \u9ec4\u82a9(scutellaria baicalensis) | \u9ec4\u82a9(scutellaria baicalensis) |\n|                       | \u60ca\u6050(panic) | \u8d64\u828d(paeonia lactiflora) | \u8d64\u828d(paeonia lactiflora) | \u8d64\u828d(paeonia lactiflora) |\n|                       | \u7126\u8651 (anxiety) | \u7099\u7518\u8349(glycyrrhiza uralensis) | \u7099\u7518\u8349(glycyrrhiza uralensis) | \u7099\u7518\u8349(glycyrrhiza uralensis) |\n|                       | \u5165\u7761\u56f0\u96be(insomnia) | \u5927\u67a3(jujube) | \u5927\u67a3(jujube) | \u5927\u67a3(jujube) |\n|                       | \u7720\u6d45\u6613\u9192(light sleep, easy to wake up) | \u751f\u59dc(ginger) | \u751f\u59dc(ginger) | \u751f\u59dc(ginger) |\n|                       | \u4e4f\u529b(fatigue) | \u832f\u82d3(tuckahoe) | \u6e05\u534a\u590f(pinellia tuber) | \u6e05\u534a\u590f(pinellia tuber) |\n|                       | \u80f8\u95f7(chest tightness) | \u4eba\u53c2(ginsen) | \u4eba\u53c2(ginsen) | |\n|                       | \u56db\u80a2\u9ebb\u6728(numbness of limbs) | \u6842\u679d(cinnamomum cassia) | \u6842\u679d(cinnamomum cassia) | |\n|                       | \u5c0f\u4fbf\u9891\u6025(frequent urination) | \u7518\u8349(glycyrrhiza uralensis fisch) | \u832f\u82d3(bupleuri radix) | |\n|                       | \u53f3\u624b\u5fc3\u70ed(palm heat) | \u5f53\u5f52(angelica sinensis (Oliv.) diels) | \u7092\u516d\u795e\u66f2(medicated leaven) | |\n|                       | \u820c\u6de1\u7ea2(pale red tongue) | | | |\n|                       | \u82d4\u8584(thin fur) | | | |\n|                       | \u4e0b\u7751\u6de1\u767d\u8fb9\u504f\u7ea2 (pale lower eyelid with reddish edges) | | | |\n\nIn above table, analyzed by real TCM doctor, **SCEIKG provides herbal recommendations more in line with classical prescriptions found in TCM ancient texts. In contrast, the model without IKG tends to favor prescriptions based on individual doctor's experiences. Typically, real doctors consider these classical prescriptions to be well-validated over the years and therefore more suitable in specific situations. This implies that our combinations may be more reasonable or in line with the historical usage of ancient formulas.** It also demonstrates that our IKG provides richer information, whereas models without IKG rely solely on the data itself for recommendations. This indirectly underscores the importance of IKG, offering more profound and comprehensive information for herbal medicine recommendations.\n\n**In addition, we added the recommended interpretability experiment in Appendix D of the revised version, at line 615 of the paper, highlighted it in orange, and gave Fig.11 for demonstration.** We use a patient and information fusion by the patient's symptoms to find multi-hop conenctivity based on the IKG as a way to justify the edges of our IKG. **See line 615 of the revised version for a detailed analysis.**"
                    }
                },
                "number": 12,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700333045080,
                "cdate": 1700333045080,
                "tmdate": 1700541739633,
                "mdate": 1700541739633,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "0ZlD9jXTWh",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "6.**performance w/o sequences**\n\nWe highly appreciate the reviewer's perspective on the performance differences of our model described in Fig.3 in the absence of sequence information. We agree that a robust artificial intelligence system should demonstrate effectiveness in situations where extensive patient history data is not available, similar to what a doctor might do in practical medical practice. The performance in the absence of sequence data is indeed an area we aimed to explore to demonstrate the additional value of historical context in traditional Chinese medicine recommendations. Traditional Chinese medical practices often rely on a comprehensive understanding of a patient's condition over an extended period, including the evolution of symptoms and treatment responses. The primary innovation of our model lies in leveraging this sequential data to enhance accuracy.\n\n**However, the reviewer rightly points out that doctors can propose reasonable prescriptions even without such medical history. In response, we initiated further research. Through experiments, we discovered that when we did not utilize sequences for herbal recommendations, incorporating the overall patient condition into the model led to the results shown in Fig.3. Subsequently, we removed the overall patient condition and conducted experiments again using a model without sequence information, with the following results,**\n\n  | Ablation      | Precision@5 | Precision@10 | Precision@20 | Recall@5 | Recall@10 | Recall@20 | F1@5   | F1@10  | F1@20  |\n|-----------------------|-------------|--------------|---------------|----------|-----------|-----------|--------|--------|--------|\n|                       |             |              |               |          |           |           |        |        |        |\n| **w/o Sequence1**          | 0.2617      | 0.1490       | 0.1215        | 0.1249   | 0.1458    | 0.2252    | 0.1652 | 0.1432 | 0.1543 |\n| **w/o Sequence2**| 0.4282      | 0.3906       | 0.2872        | 0.2296   | 0.4053    | 0.5683    | 0.2872 | 0.3836 | 0.3708 |\n\n\n**w/o Sequence1** is the result of the ablation experiment of SCEIKG without sequence in our paper, and **w/o Sequence2** is likewise the result of the ablation experiment of SCEIKG without sequence, but with the overall condition of the patient removed from the experiment.\n\nThe following analysis was conducted on the experimental results,\n\n**Role of the Sequence Module:** The sequence module may play a crucial role in handling sequential data, and removing it resulted in the model losing its ability to process sequence information. The information provided in the textual description may have been better integrated and utilized in the sequence module. In the absence of sequences, noise in the disease features may lead to interference from redundant information, thereby reducing performance.\n\n**Association between Features and Sequences:** The inclusion of overall patient condition as a feature in the model may depend on certain patterns or contextual information in the sequence data. Removing the sequence module may hinder the model's ability to correctly capture these associations, resulting in a decline in performance.\n\n**This part of the experiment we supplemented in Appendix D Poor Performance without sequences of the revised version, in line 645 of the paper and highlighted in red, see the revised version for more details.**\n\nWe thank the reviewers for their constructive feedback, which prompted us to make valuable extensions to the study to better serve all potential clinical applications."
                    }
                },
                "number": 13,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700334357745,
                "cdate": 1700334357745,
                "tmdate": 1700541926503,
                "mdate": 1700541926503,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "D82JUJQ4Sj",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "7.**drug-drug interaction**\n\nThank you for raising these questions, we have considered them during the model's iteration to enhance its applicability and safety. While SCEIKG does not currently model DDIs explicitly, it implicitly addresses the issue of herb compatibility through an iterative interaction knowledge graph, which includes relationships between different herbs. The graph helps avoid recommending mutually exclusive herbs. **We have added a new experimental analysis of Herb Compatibility to section 4.2 of the revised version, which is demonstrated by Figure 4, in line 263 of the paper, and highlighted in red. In addition, we have reflected on the results of herb interactions by analyzing real doctors. We will provide you with further analyses.**\n\nIn the motivation section of our paper, we highlight a significant and perplexing issue in TCM, which is the compatibility of herbal medicines, specifically, the interactions between different herbs when combined. However, the TCM treatment process encompasses a vast amount of complex TCM knowledge and involves four steps, making it challenging to elucidate the intricate interactions between different herbs. **To address this issue, we propose an approach based on domain knowledge from a knowledge graph to ensure herbal compatibility. Nevertheless, it's important to note that due to the complexity of TCM and the lack of standardization, accurately determining interactions between herbs can be challenging. For instance, herbs A and B may have antagonistic effects, but they might reach equilibrium when combined with herb C.** These interaction criteria are highly intricate, and herb compatibility is not fixed. Therefore, to enhance the accuracy of herbal recommendations, we constrain TCM recommendations based on domain knowledge from traditional Chinese medicine. Specifically, we introduce a regularization scheme\n    $\\boldsymbol{R}$\n    $=-\\sum_{i=1}^{N}\\sum_{j=1}^{N}W_{ij}^{h}\\hat{hc}^{(t)}_i \\hat{hc}^{(t)}_j$ to penalize $P^{(t)}$, limiting violations of herb pairs. The $W^{I}$ derived $W{i,j}^{h}$\n    weights from $\\mathcal{G}^{I}$ represent the strength of compatibility between the i-th and j-th herbs. If they are mutually exclusive, $W{i,j}^{h}=0.$\n        \n**We demonstrate that we reduce the risk of herbal incompatibility by both**\n\nFirst, in the Herb Compatibility section of Appendix E of this paper, on line 679 of the paper. We performed the analysis of the results, and for data privacy and confidentiality reasons, we present in Appendix E some of the correlations between herb pairs that change dynamically during model training. Based on the analyses of actual physicians, these changes are justified as they adapt to the patient's current condition. Meanwhile,** in Table 8**, we showcase the results of herbal recommendations. Although there are differences between the herbs we recommend during the first diagnosis and those prescribed by doctors, **real doctors' analysis indicates that the model-recommended prescription is better suited to the patient's current condition. During the second diagnosis, although there are differences between the herbal recommendations and the actual prescription, doctors point out that the gap between them is not significant, and there are no mutually antagonistic herbs.** This further validates the effectiveness of considering herb compatibility and emphasizes that herb compatibility is a complex and dynamic issue.\n        \nSecondly, **the experimental analyses were added to 4.2 in our revised version, in line 263 of the paper, highlighted in red.** Fig. 4 illustrates the heatmap for all herb pairs; herb names are omitted due to data privacy. From the heatmap, we observe that the magnified positions, specifically (Cassia Bark(\u8089\u6842)), Red Halloysite(\u8d64\u77f3\u8102)), and (Danshen Root(\u4e39\u53c2), Lightyellow Sophora Root(\u82e6\u53c2)), both exhibit a correlation of 0. The correlation between \"Cassia Bark(\u8089\u6842)\" and \"Red Halloysite(\u8d64\u77f3\u8102)\" is 0, indicating a certain degree of mutual antagonism between these two herbs. This aligns with the ancient literature's viewpoint that \"Cassia Bark is effective in regulating cold energy, but it loses its efficacy when encountered with Red Halloysite(\u5b98\u6842\u5584\u80fd\u8c03\u51b7\u6c14\uff0c\u82e5\u9022\u77f3\u8102\u4fbf\u76f8\u6b3a).\" In other words, Cinnamon and Red Halloysite are mutually repellent. Additionally, \"Danshen Root(\u4e39\u53c2)\" and \"Lightyellow Sophora Root(\u82e6\u53c2)\" cannot be mixed in some situations due to their differing medicinal properties. Nevertheless, real doctors also point out that some herb combinations may be controversial as they may have different effects in clinical practice. **We acknowledge that we have not yet fully addressed the issue of herb interactions**, but we have selected **70** recommended results for real doctors to analyze, and after real doctors' analysis, we have achieved a **91.4%** level of compatibility for our recommended herb pairings, which, in terms of our recommended results, demonstrates the validity of our method."
                    }
                },
                "number": 14,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700334782945,
                "cdate": 1700334782945,
                "tmdate": 1700542915554,
                "mdate": 1700542915554,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "M4MO5VAyjW",
                "forum": "JXjXeTsqgW",
                "replyto": "nsFpiZQGR7",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission5530/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**8.metric Jaccard**\n\nThanks to the reviewer's suggestion to include the Jaccard metric to verify the accuracy of set recommendation, we have conducted the experiments and obtained the results. The results are as follows\uff0c\n\n| Methods   | Precision@5 | Precision@10 | Precision@20 | Recall@5 | Recall@10 | Recall@20 | F1@5 | F1@10 | F1@20 | Jaccard |\n|-----------|-------------|--------------|---------------|----------|-----------|-----------|------|-------|-------|---------|\n| GAMENet   | 0.5066      | 0.4176       | 0.3096        | 0.2557   | 0.4151    | 0.6027    | 0.3300 | 0.4037 | 0.3976 | 0.1874  |\n| SafeDrug  | 0.5038      | 0.4082       | 0.3000          | 0.2562   | 0.4105    | 0.5926    | 0.2672 | 0.3364 | 0.3534 | 0.1791  |\n| Our       | 0.5477      | 0.4275       | 0.3087        | 0.2727   | 0.4243    | 0.6010     | 0.3538 | 0.4128 | 0.3973 | 0.2477  |\n\nWe introduced the Jaccard metric to evaluate the set recommendation accuracy of our proposed method. Specifically, we compare the Jaccard similarity scores of the recommendations of our method with those of two methods, SafeDrug and GAMENet, which are also sequence recommendation methods, and the results are shown below, which also reflect the effectiveness of our model. We have added the experiment to the revised version, at line 256 of the paper, and highlighted it in red. We thank the reviewers for allowing us to further validate our model."
                    }
                },
                "number": 15,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission5530/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700334974005,
                "cdate": 1700334974005,
                "tmdate": 1700543054321,
                "mdate": 1700543054321,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]