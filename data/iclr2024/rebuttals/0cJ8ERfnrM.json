[
    {
        "title": "Antibody DomainBed: Out-of-Distribution Generalization in Therapeutic Protein Design"
    },
    {
        "review": {
            "id": "2Pg44uprHw",
            "forum": "0cJ8ERfnrM",
            "replyto": "0cJ8ERfnrM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_keC4"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_keC4"
            ],
            "content": {
                "summary": {
                    "value": "The authors identify the out-of-distribution problem in designing antibodies across multiple rounds. They propose a benchmark to mimic the distribution shift across different rounds with annotation from computational tools. Several domain generation methods as well as model ensembling in the literature of computer vision are adapted and tested in the scope of drug design on the proposed benchmark. The results suggest ensembling leads to better generalization ability."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "1. Optimizing antibodies across multiple rounds is common in real-world applications, and the out-of-distribution problem is also a disturbing phenomenon in practical. Therefore, it is of great significance to formalize and put forward this problem with a suitable benchmark.\n2. The authors explore many domain-generalization methods from computer vision, ensemble, as well as different model architecture on the proposed benchmark, which provides necessary basic understanding of the OOD problem in the scope of drug design."
                },
                "weaknesses": {
                    "value": "1. The biggest concern is the reliability of the computational tools for annotating the binding affinity (i.e. Rosetta). As this work is proposing a benchmark on an important problem which may greatly affect the direction of the community, it is necessary to prove the fidelity of the synthetic labels. More analysis should be incorporated to prove that the computed labels are well aligned with wet-lab validations. For example, the authors can validate the accuracy of the synthetic labels on a dataset with known binding affinity and with a similar distribution to the generated sequences used in the benchmark. However, the best and most direct way might still be sampling a small subset in the benchmark and validate them with wet-lab experiments.\n2. Adequate interpretation on the experimental results with respect to the proposed hypothesis is missing. In section 3.1, the authors propose the hypothesis that the causal features might be physico-chemical and geometric properties at the binding interface. However, no further analysis or interpretations on whether the tested DG algorithms have learnt this invariance are provided. Also, in Table 2 and Table 3, vanilla ERM beats most DG methods. Does this mean most of the DG methods can not learn the hypothesized invariance at all?"
                },
                "questions": {
                    "value": "1. In section 6.1, the claim that increasing model size improves performance is not well supported by experiments. As the experiments only compares SeqCNN with ESM2 but not models of the same type with different sizes.\n2. Is ENS the abbreviation for \"ensemble\" in Table 2 and Table 3? And what is the \"functional ensemble\" mentioned in section 6.1?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission9074/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission9074/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission9074/Reviewer_keC4"
                    ]
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission9074/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1697535750384,
            "cdate": 1697535750384,
            "tmdate": 1699637142830,
            "mdate": 1699637142830,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "GOtGEZkoJh",
                "forum": "0cJ8ERfnrM",
                "replyto": "2Pg44uprHw",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "We thank the reviewer for the thoughtful review. We address the concerns below and complement it with a revision of our paper.\n\n> [ prove the fidelity of the synthetic labels. More analysis should be incorporated to prove that the computed labels are well aligned with wet-lab validations.]\n\nThe change in Gibbs free energy, $\\Delta G$, and the dissociation constant, $K_D$, can be shown to be theoretically equivalent up to a proportionality; we have $\\Delta G = RT \\ln K_D$, where $R$ is the gas constant, $1.98722 {\\rm cal}/K\\cdot {\\rm mol}$, and $T$ is the absolute temperature [Jorgensen2008]. Free energy perturbation (FEP) has been applied to identify mutant antibodies with high affinity [Clark2017, Clark2019, Zhu2022], supporting the use of $\\Delta \\Delta G$ as a synthetic proxy for $K_D$. \n\nThat said, free energy is not directly computable and we have used Rosetta and FoldX scores as approximations. The Rosetta-computed $\\Delta \\Delta G$ is still capable of separating binders and non-binders from fluorescence-activated cell sorting (FACS) well and those from surface plasmon resonance (SPR) even better [Mason2021, Mahajan2022]. (FACS is a higher-throughput, lower-SNR method of identifying binders.) These points have been added to Section A.6 of the paper.\n\n> [validate them with wet-lab experiments.]\n\nThe validation on an experimental binding dataset was done in [Hummer2023], from which env 4 was curated. Models trained on FoldX-generated $\\Delta \\Delta G$ values are shown to achieve ROC AUC of 0.88 and average precision of 0.77 on the task of classifying binders from FACS [Mason2011].\n\n> [the causal features might be physico-chemical and geometric properties at the binding interface. However, no further analysis or interpretations on whether the tested DG algorithms have learnt this invariance are provided.]\n\nThe included Domain Generalization algorithms in general attempt to learn invariant, latent representations. Since we cannot directly relate those latent features to observable physico-chemical properties, we turned to saliency mapping, Figure 6 in the manuscript. We notice that, relative to SMA and IRM, ERM displays muted behavior in the regions known to interact with the antigen paratope. \n\n> [vanilla ERM beats most DG methods. Does this mean most of the DG methods can not learn the hypothesized invariance at all?]\n\nAlthough this may be true on environments 0, 1, 2, 3, we observe that \n1) in the zero shot setting (env 4) as presented in Table 4 in the Appendix, DG methods and ensembling improve over ERM when evaluated on a new target;\n2) in Table 6 we notice significant advantage of some DG methods compared to ERM when using these models in a concept-shift setup, when the labeling function changes from $\\Delta \\Delta G$ to binding measurements (env 5)."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission9074/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700679034755,
                "cdate": 1700679034755,
                "tmdate": 1700679034755,
                "mdate": 1700679034755,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "UgRKIU9kEf",
            "forum": "0cJ8ERfnrM",
            "replyto": "0cJ8ERfnrM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_nWam"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_nWam"
            ],
            "content": {
                "summary": {
                    "value": "This paper proposes a benchmark dataset for assessing antibody binding affinity prediction under domain generalization. The paper motivates the need for algorithms in this setting with the rise of ML-guided design of antibodies (as well as small molecules and other biological targets), in which ML models are used to filter down to a set of candidates that are validated experimentally, the resulting data is used to modify the ML models, and the cycle repeats. To this end, the paper compiles a sequence of synthetic datasets where the antigen targets and the antibody candidates are shifted and the binary label of binding affinity is computed using a physics-based computational method. The paper then goes on to benchmark several domain-generalization approaches on these datasets under two different model architectures."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "The paper considers an important problem at the intersection of domain generalization and drug design. The paper does a good job of motivating this problem in the context of active drug discovery. The paper also does a fairly extensive comparison of different domain generalization algorithms on their benchmark dataset."
                },
                "weaknesses": {
                    "value": "There are a few issues with the present paper.\n\n1. The main contribution of the paper is the benchmark dataset. However, based on my reading of this paper, it's unclear whether or not this actually a high-quality dataset. The labels are computed using a single physics-based computational method. There is no validation of the quality of these labels either experimentally or against other computational methods. Given this, it's unclear whether or not good performance on this dataset is actually meaningful.\n\n2. The composition of the benchmark dataset seems to be somewhat arbitrary. The different environments have seemingly randomly chosen compositions of antigens and generative model parameters. There is no justification behind the choice of generative model parameters beyond the statement that changing this parameter varies the similarity between samples and starting seeds.\n\n3. The motivation behind the paper is the active discovery setting. However, there is no evaluation of methods with respect to an active learning setup to demonstrate that better performance on the benchmark dataset leads to better active learning performance."
                },
                "questions": {
                    "value": "The computational methods appear to produce real-valued results. Why are the results binarized? This would appear to throw out information.\n\n\nWhy do the environments consist of mixtures of antigens? It would seem to me that in a drug discovery setup, one would have a particular target in mind."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission9074/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission9074/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission9074/Reviewer_nWam"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission9074/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698762483732,
            "cdate": 1698762483732,
            "tmdate": 1699637142717,
            "mdate": 1699637142717,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "GsRvu2M9lk",
                "forum": "0cJ8ERfnrM",
                "replyto": "UgRKIU9kEf",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "We thank the reviewer for the thoughtful review. We address the concerns below and complement it with a revision of our paper.\n\n > [validation of the quality of these labels either experimentally or against other computational methods]\n\nThe score function we use for computing the $\\Delta \\Delta G$ predictions has been experimentally validated in the original publication [Park2015]. Our new encouraging results on env 5 with wet-lab binding measurements additionally verify the utility of these scores.\n\n > [The composition of the benchmark dataset seems to be somewhat arbitrary. [...] There is no justification behind the choice of generative model parameters and other environment metadata]\n\nWe set the environments to mimic the shift occuring between lab-in-the-loop iterations, Figure 2 in the manuscript, where the generative models change due to various improvements and the seeds and antigens are fixed.\nArguably, there are multiple possible settings and users of our dataset can construct their dataset as they wish to measure specific domain shifts.\nThe parameter in the WJS corresponds to the \"smoothing scale,\" which controls the edit distance between the seed and the generated designs. Sequence similarity (or edit distance) is a common, widely-accepted metric used by scientists in the therapeutic antibody domain, as a way to categorize different 'subgroups' of antibodies [Miho2019]. We therefore rely on the edit distance as a metric to compare antibody sequences.\n\n> [demonstrate that better performance on the benchmark dataset leads to better active learning performance]\n\nThe development of well-performing, robust predictors immediately translates to the success of an active learning pipeline, as these ML predictors are used in the active-learning selection process before sending sequences to a wet-lab."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission9074/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700678977709,
                "cdate": 1700678977709,
                "tmdate": 1700678977709,
                "mdate": 1700678977709,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "ovvBH2gCS6",
                "forum": "0cJ8ERfnrM",
                "replyto": "UgRKIU9kEf",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "> [Why are the results binarized?]\n\nThere is significant noise in the computed $\\Delta \\Delta G$ between -1 and 1 kcal/mol, because Rosetta and FoldX are less accurate at predicting $\\Delta \\Delta G$ for mutations with only a small effect on binding [Sirin2016, Hummer2023]. We therefore remove highly uncertain labels between -0.1 and 0.1 kcal/mol before attaching binary labels: label 1 if $\\Delta\\Delta G < -0.1$ (stabilizing) and  label 0 if $\\Delta\\Delta G > 0.1$ (destabilizing).\n\nBinarized labels also align with potential use cases in experimental binding prediction. While surface plasmon resonance (SPR) yields continuous affinity values, antibody screening is often carried out using noisier but higher-throughput measurement protocols like fluorescence-activated cell sorting (FACS) and enzyme-linked immunosorbent assay (ELISA) aimed at (binary) identification of binders. \n\nLastly, algorithm development and benchmarking for domain generalization has been focused on classification tasks. Regression is an interesting future extension particularly for lab-in-the-loop design.\n\n> [environments consist of mixtures of antigens]\n\nWhile the reviewer is correct in that lead identification and optimization efforts are often based on a particular target determined in the target discovery stage, the training data for the models need not be restricted to the single target of interest. The mechanistic (causal) stabilizing interaction between an antibody and antigen can be learned across targets. Data from multiple targets can arguably offer more information about factors governing the interaction between the epitope and paratope.\n\nWe would like to further clarify that a given target can have multiple \"antigen variants\" with varying sequences. We thus expose our model to various sequences on the antigen side for a given target.\n\nIn addition, target generalization is of interest in the _de novo_ antibody design setting, where we initially do not have annotated binding data. Environment 4 emulates this by probing the ability of a model trained on HIV1 and SARS-CoV-2 data to generalize to an unseen target, HER2.\n\n[Park2015] Park, Keunwan, et al. \"Control of repeat-protein curvature by computational protein design.\" Nature structural & molecular biology 22.2 (2015): 167-174.\n\n[Miho2019] Miho, E., Ro\u0161kar, R., Greiff, V., & Reddy, S. T. (2019). Large-scale network analysis reveals the sequence space architecture of antibody repertoires. Nature communications, 10(1), 1321.\n\n[Sirin2016] Sirin, S., Apgar, J. R., Bennett, E. M., & Keating, A. E. (2016). AB\u2010Bind: antibody binding mutational database for computational affinity predictions. Protein Science, 25(2), 393-409."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission9074/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700679006882,
                "cdate": 1700679006882,
                "tmdate": 1700679301841,
                "mdate": 1700679301841,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "CbqmBJL8Nf",
            "forum": "0cJ8ERfnrM",
            "replyto": "0cJ8ERfnrM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_PsDP"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_PsDP"
            ],
            "content": {
                "summary": {
                    "value": "The paper discusses the important topic of Domain Generalization (DG) applied to the field of antigen discovery.\n\nThe paper conducts experiments aimed at proving that ensembling in output and weight space improve DG. There is also a comparison between a SeqCNN baseline and a \"foundational\" model for protein language.\n\nWhile the topic of interest at the core of the paper's application is of particularly high interest and it is great that the authors release a new data set as part of the publication, I am not sure one can reach the conclusions of the authors with high confidence based solely on the evidence presented in the current set of experiments."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "4 excellent"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "1) The paper does a very good job in my opinion of explaining the topic of Domain Generalization as part of protein design where multiple rounds of laboratory based evaluation are needed. This is also not dissimilar to other topics in AI where real world experiments help gather more data for instance as a model is deployed under a particular policy. The applicability goes potentially beyond the application presented here.\n\n2) The methods presented to improve DG are not rocket science which does caveat the level of contribution here but also means that implementing the solutions presented by the authors is trivial and therefore industrial applications flow directly from the paper. This is a plus in my opinion as a practitioner.\n\n3) The experiments are well explained and motivated."
                },
                "weaknesses": {
                    "value": "1) I think that one might want to be a bit more careful when employing the term \"foundational model\". Some eminent professors in the field of AI have pointed out the somewhat misguiding nature of the term. In a scientific paper, it might be warranted to explain what exactly the authors mean by this term. Do we just mean here a model with good generalization, fine-tuning and zero-shot abilities? Can we give more details as to why the architecture considered here and the data set the model was trained on are a good fit. This is not self-evident IMO.\n\n2) The authors only consider one baseline to compare ESM2 against without really motivating its design. I hate to be the reviewer asking for more baselines but, as such, the conclusion that using foundational models improves solving DG is tenuous based on the evidence given in the paper. More comparisons are needed I believe. At the very least, the level of confidence of the conclusion should be lowered and doubt made explicit.\n\n3) The other conclusions, namely that resembling helps baseline models and that choosing a good validation set is important are really not surprising and do not constitute a substantial contribution. \n\n4) I think that Figure 6 needs to be a bit more explained in appendix to novices in the field of protein design. But if that's not the target audience, it's fine."
                },
                "questions": {
                    "value": "1) Could the authors please fix a few typos? The section title 5.3 is not separate from the text above it. Some xlabels in appendix are missing, it looks like the page layout cropped them out.\n\n2) Could the authors adjust the confidence of their conclusion regarding the supremacy of the \"foundational\" model? While one can expect such a result, since we are entirely relying on experimental comparisons with baselines here, it is very hard to give credence to the claim with just a baseline which looks a bit arbitrarily chosen (I do agree that the design makes intuitive sense but there are other families of models that readers may want to see considered here such as simple RNN, attention models, and combinations of these approaches with CNNs)."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission9074/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698810224786,
            "cdate": 1698810224786,
            "tmdate": 1699637142596,
            "mdate": 1699637142596,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "EUWI2MbTzF",
                "forum": "0cJ8ERfnrM",
                "replyto": "CbqmBJL8Nf",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "We thank the reviewer for the thoughtful review. We address the concerns below and complement it with a revision of our paper.\n\n> [\"foundational model\"]\n\nBy foundation model, we meant a model pretrained on a large dataset, with good finetuning and zero-shot abilities. For more details, please see [Bommasani2021].  \nWe chose ESM-2, a BERT-style model pretrained on general proteins as this is a standard model for representation learning tasks. There are antibodies and antigens in the pretraining dataset.\n\n> [One baseline to compare ESM2 against [...] using foundational models improves solving DG is tenuous]: \n\nWe added a graph neural network backbone, GearNet [Zhang2023], pretrained on AlphaFold2-predicted protein structures.\nDue to time constraint, we only ran some DG models (VREx, ERM and ENS).\nWe observe that GearNet is the best performing model; one key reason for this boost in performance is that $\\Delta\\Delta G$ labels are directly computed from structure.\n\n> [The other conclusions, namely that ensembling helps baseline models and that choosing a good validation set is important are really not surprising and do not constitute a substantial contribution.]\n\nEnsembling outperformed all DG models on our task, as is the case on image classification [Arpit2022]. We cannot conclude that invariant models do not outperform ERM when the hyperparameter ranges, model size, and validation set are carefully controlled. This was the main conclusion from DomainBed on image-based datasets [Gulrajani2007]. We recover this result in the real-world application of antibody design. \nAdditionally, we now update the benchmark with results on unseen target (env 4) and real binding measurements (env 5) where we observe a performance boost with ensembling and DG approaches.\nNote that for new application domains and benchmarks, where there is no standard validation set, defining a validation close to the test set is key to controlling domain shifts; this is why we believe that emphasizing the importance of choosing a good validation set can help better perform model selection.\n\n[Bommasani2021] Bommasani, Rishi, et al. \"On the opportunities and risks of foundation models.\" arXiv preprint arXiv:2108.07258 (2021).\n\n[Arpit2022] Arpit, Devansh, et al. \"Ensemble of averages: Improving model selection and boosting performance in domain generalization.\" Advances in Neural Information Processing Systems 35 (2022): 8265-8277.\n\n[Zhang2023] Protein Representation Learning by Geometric Structure Pretraining, ICLR 2023.\n\n[Gulrajani2007] Gulrajani, I., & Lopez-Paz, D. (2020). In search of lost domain generalization. arXiv preprint arXiv:2007.01434."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission9074/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700678925618,
                "cdate": 1700678925618,
                "tmdate": 1700678925618,
                "mdate": 1700678925618,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "PXwBMfGixk",
            "forum": "0cJ8ERfnrM",
            "replyto": "0cJ8ERfnrM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_6GLG"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission9074/Reviewer_6GLG"
            ],
            "content": {
                "summary": {
                    "value": "The paper adds a new type of dataset to the DomainBed benchmark.  The dataset relates to drug discovery, an important area of study and could in principle complement DomainBed.  Despite the reasonably clear presentation of the algorithm for the construction of the data, the characterization and quality of the dataset, as well as the ability to select models and generalize from it in a drug discovery setting, remain unclear."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "The paper adds a new type of dataset to the DomainBed benchmark.  The dataset relates to drug discovery, an important area of study and could in principle complement DomainBed.  Despite the reasonably clear presentation of the algorithm for the construction of the data, the characterization and quality of the dataset, as well as the ability to select models and generalize from it in a drug discovery setting, remain unclear."
                },
                "weaknesses": {
                    "value": "A main weakness of this contribution is the limited nature of this one additional dataset. The dataset is fully synthetic, which the authors explain as necessary due to the high cost of antibody tests in a laboratory setting (and, I imagine, their inability to disclose actual laboratory datasets from ongoing or past projects due to competitive risks).  Although one would hope that the particular distribution shift captures an important mode of the distribution shifts observed during laboratory antibody design, it is not clear if the selection process used here ends up being educational for applications in real world settings.  Perhaps the authors have anecdotal or unpublished evidence supporting such a claim, however, this conclusion is not clear from the writing itself. It does not help that the presented characterization has jargon specialized to the field and terms like MMD (maximal mean discrepancy?) and saliency visualization that are not clarified and have scales that are illegible in the axis labels of Fig 4 and 6.\n\nAlthough I don't mind people selling their own work as well as they can, I do take issue with one particular statement in page 5 that reads: \"Being much larger than small molecules, they are arguably more complex and more challenging to characterize.\"  This statement is misleading.  Empirically, antibody design in drug discovery settings is dramatically easier than small molecule design as evidenced by the shorter average timescale of the research pipelines prior to reaching development candidates, despite the potentially much more convenient modality of a small molecule therapy if it was comparably complex to design.  The pipelines for dealing with antibodies are well established and antibody production is almost like a printing press compared to those of small molecules, for which some particular designs might take months to years to get right. I agree, however, with the sentiment of the paragraph, namely proteins present unique design challenges and it is thus useful to have an additional benchmark."
                },
                "questions": {
                    "value": "Do the authors have unpublished evidence of the usefulness of the models selected by this approach in actual drug discovery settings compared to a baseline ERM approach carefully implemented?  \n\nHow robust would the conclusions be under sampling of much larger computational datasets (especially more antigens but same process, but also same antigens and more designs)?  The specific construction of the inputs to the different environments basically differ in the seed sequences used in the sampling to generate new sequences that would progress to the next level.  Could it be that the authors always create a perfect setting for ensemble models and simple moving averages?  If showing this conclusion was the main purpose of the paper, are there simpler or additional datasets that could support it?\n\nThe particular 8M-parameter ESM2 model that the authors used sounds incredibly small.  It is not clear if that is a necessity (and if so, why), or if it turns out to somehow be sufficient and as good as the next level ESM2 model.\n\nThe authors (I believe) presented a closely related work at an ICML symposium this summer.  Was the main change since that presentation the inclusion of additional analysis methods, including the ensembling, or was the dataset itself improved or modified and if so how?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission9074/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698821211402,
            "cdate": 1698821211402,
            "tmdate": 1699637142454,
            "mdate": 1699637142454,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "zCC5fghc1a",
                "forum": "0cJ8ERfnrM",
                "replyto": "PXwBMfGixk",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "We thank the reviewer for the thoughtful review. We address the concerns below and complement it with a revision of our paper.\n\n> [the construction of the data, the characterization and quality of the dataset, as well as the ability to select models and generalize from it in a drug discovery setting, remain unclear.]\n\nPlease see our updated Section A.5, where we evaluate our dataset with regards to six antibody properties: \n* naturalness and diamond score on both heavy and light chains (Figure 9) which measure the closeness of an antibody to OAS; the largest publicly available human antibody database. \n* hydrophobicity, charge and aromaticity from the design sequences (Figure 9), antibody properties which contribute to binding. \n* humanness (Figure 8), leveraging the scoring framework OASis provided by BioPhi; we achieve ranges expected for a synthetic design library. \n\nOur analysis of these scores confirms that the synthetic designs in Antibody DomainBed conform with properties of natural antibodies, similarly to a point extensively explored in the original publication of the generative model we use (Frey et al. 2023). \n\nRegarding the model selection and generalization, our objective was to \n1) explore the ability of domain generalization algorithms to deliver as expected in biological datasets and \n2) determine whether the results are sufficient and encourage further developments of DG algorithms that take into account drug discovery pipelines. \n\nWe observe encouraging results for generalizing to actual binding measurements as pointed in our response to all reviewers. We hope that by providing a complete simulation and evaluation framework we bring the two communities closer together which may initiate new progress to the benefit of both fields.\n\n> [ it is not clear if the selection process used here ends up being educational for applications in real world settings.] [Do the authors have unpublished evidence of the usefulness of the models selected by this approach in actual drug discovery settings compared to a baseline ERM approach carefully implemented?]\n\nTo verify the usefulness of $\\Delta\\Delta G$ predictions for better binding affinity prediction, we include a new environment (env 5), consisting of real wet-lab measurements for the HER2 target. \nA seqCNN classifier trained on wet-lab measurements data on other 4 internal targets (unrelated to HER2) achieves an accuracy of 64.0\\%, precision 49.0\\% and recall 51.0\\% which reconfirms the fundamental conundrum of drug design, namely, the ability to predict behaviour of new therapeutics on unseen targets. \nMoreover, training on $\\Delta\\Delta G$ predictions included in env 0-4 proves to be helpful in predicting the binding affinity for the new env 5. \nNamely, pure ERM training on $\\Delta\\Delta G$ scores, achieves accuracy: 76.0 +/- 5.7\\%, precision: 99.7 +/- 0.3\\%, recall: 83.2 +/- 4.9\\% on environment 5, and the DG algorithms follow, with CORAL acheiving up to 88\\% accuracy after ensembling. \nPlease see Table 6 and 7 in the revision for a detailed overview of the results. \n\n> [It does not help that the presented characterization has jargon specialized to the field and terms like MMD (maximal mean discrepancy?)]\n\nWe detailed in our revised manuscript the meaning and interpretation of MMD (maximum mean discrepancy), a distance measure between distributions, and hope this will be clear to future readers.\n\n > [saliency visualization that are not clarified and have scales that are illegible in the axis labels of Fig 4 and 6.]\n\nAppologies for the ambiguity. The x-axis in the saliency figure represents the position of an amino acid in the antibody sequence, after being aligned to a uniform numbering scheme, AHo [Honegger2001].\n\n> [antibodies vs small molecule applications]\n\nWe removed this statement from the manuscript. It was not our intention to compare the pipeline processes between small vs. large molecules in early-stage research, which are affected by historical reasons, resource allocation, and the speed benefits of animal immunization in the case of antibodies. We now refer only to proteins posing unique challenges, as suggested. We also believe that with the increased interest in therapeutic antibodies in biotech, there is an increasing gap between ML and this data modality as it is still underexplored by the community."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission9074/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700678828411,
                "cdate": 1700678828411,
                "tmdate": 1700678862657,
                "mdate": 1700678862657,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "Il11tyrQh7",
                "forum": "0cJ8ERfnrM",
                "replyto": "PXwBMfGixk",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission9074/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "> [Could it be that the authors always create a perfect setting for ensemble models and simple moving averages? If showing this conclusion was the main purpose of the paper, are there simpler or additional datasets that could support it?]\n\nThe choice of this benchmark was done with the motivation of reproducing the lab-in-the-loop setting. The cost of wet-lab experiments leads to a low-data regime where we focus only on a few antigens and restricted number of designs. The low-data regime is particularly difficult; in the larger data regime (assuming enough diversity in data), models should perform better. \nWe did not create a specific environment split to favor the ensembling models, we tried to reproduce two common domain shifts: covariate shift (variations due to the generative models in environments 0, 1, 2, 3) and concept drift (variation in the labeling function in environment 4 and 5) and note that, in these two settings, ensembles perform better.\n\n> [The particular 8M-parameter ESM2 model that the authors used sounds incredibly small. It is not clear if that is a necessity (and if so, why), or if it turns out to somehow be sufficient and as good as the next level ESM2 model.]\n\nWe do not want to measure the contribution of the backbone, but rather compare models at a fixed backbone. \nRunning bigger models is extremely costly computationally, especially in our framework as we are required to run 60 experiments per algorithm.\nIn the short time available for the rebuttal, we provide the results for a larger 35M ESM.\nThe results included in Table 7 show that there is little benefit from increasing the model's size for our benchmark dataset.\nIndeed, we are in a low data regime and finetuning overparameterized models in this regime can lead to overfitting.\n\n> [The authors presented a closely related work at an ICML symposium this summer. Was the main change since that presentation the inclusion of additional analysis methods, including the ensembling, or was the dataset itself improved or modified and if so how?]\n\n* We moved from an internal dataset to a fully public dataset as our goal was to release the benchmark to the wider community. \n* We explored and extended the available DG benchmark to recent state-of-the-art models that rely on pretrained models and ensembling and observed that these models outperform invariant based models. \n* We also conducted a more thorough experimentation of domain shifts, including a zero-shot generalization setting (env 4), to measure the performance of our models and a downstream evaluation on binding measurements (env 5). \n* Finally, we added protein structures in the dataset and added new models: a pretrained graph neural network and a bigger, 35M-parameter ESM.\n\n[Honegger2001] Honegger, Annemarie, and Andreas Plu\u00c8ckthun. \"Yet another numbering scheme for immunoglobulin variable domains: an automatic modeling and analysis tool.\" Journal of molecular biology 309.3 (2001): 657-670."
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission9074/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700678845399,
                "cdate": 1700678845399,
                "tmdate": 1700678877941,
                "mdate": 1700678877941,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]