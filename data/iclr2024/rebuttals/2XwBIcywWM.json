[
    {
        "title": "Learning Variational Neighbor Labels for Test-Time Domain Generalization"
    },
    {
        "review": {
            "id": "T0ft37cVZE",
            "forum": "2XwBIcywWM",
            "replyto": "2XwBIcywWM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_4tVC"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_4tVC"
            ],
            "content": {
                "summary": {
                    "value": "This paper considered test domain adaptation, where this paper considered variational latent labels (through a latent variable w) to better estimate pseudo-labels in the test time. Through a variational objective and meta-learning framework, different variables such as latent auxiliary variable (w_t) and target pseudo-labels (\\hat_y_t) are estimated. \nFinally, the model is deployed in standard benchmarks with improved performance.\n\n========Post rebuttal\n\nThanks for the rebuttal. I would think paper still needs major revisions to improve the clarity."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "1 poor"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "This paper considered a reasonable solution in test time domain generalization. Through better estimating pseudo-labels, this paper obtained better results in different benchmark dataset."
                },
                "weaknesses": {
                    "value": "The main issue in this paper is the **clarity** part. This paper considered probabilistic method and variational inference. Many parts are not clear or seemingly not correct in my viewpoint. I do think a major revision is required for the resubmission. \n\n1. As for the graphical model in Fig 1, I feel quite confused at first glance. In fact, it is not a real probabilistic graphical model for the data, but rather a model/data interaction graph. I think this should be clarified for the potential misunderstanding. \n\n2.  Could authors provide detailed explanations on the followings:\n\n  (1) How to estimate the following conditional probabilities?\n-  P_\\phi (w_t | X_t, \\theta_s)\n- Why is a data batch written as a random variable X_t? \n- q_\\phi (w_t | X_t, Y_t \\theta_s)\n- We never observed Y_t, right ?\n\n(2)  What is the rationale of meta-generalization? What is the corresponding graph?\n\n(3) If a model parameter is updated through gradient descent like equation (11), it should not be considered as a formal variational inference. Indeed, the gradient flow could make it hard to construct a probabilistic term. \n\n3. I still could not understand the specific reason to use variational inference based methods. I think many math equations could be replaced by deterministic updates and significantly simplified. \n4. The quality of pseudo-label is still unknown and hard to understand. Why could such a method improve the pseudo quality? When will it happen?"
                },
                "questions": {
                    "value": "See the weakness part."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Reviewer_4tVC"
                    ]
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission3902/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698283233722,
            "cdate": 1698283233722,
            "tmdate": 1700858065219,
            "mdate": 1700858065219,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "iJj1Nu0ePX",
                "forum": "2XwBIcywWM",
                "replyto": "T0ft37cVZE",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to reviewer 4tVC"
                    },
                    "comment": {
                        "value": "We thank Reviewer 4tVC for their feedback.\n\n\n**Graphical model**\n\nWe agree with the reviewer that the graphical model might be misleading. We meant to express the conditional dependence structure between random variables (data and latent variables). We changed it to \u201cProbabilistic modeling graph\u201d in the updated paper.\n\n**Estimation conditional probabilities**\n\n(1) For the prior distribution $p_\\phi (w_t | X_t, \\theta_s)$, we first generate the features $z_t$ of the batch of images $X_t$ and their pseudo labels $\\hat{Y}_{t}$ through the source trained model $\\theta_s$. \n\nThen we generate the averaged features $z_t^c$ for each category according to the pseudo labels. The categorical averaged features $z_t^c$ are then fed to the MLP network $\\phi$ to generate the mean and variance of $p_\\phi(w_t)$. $X_t$ here is not a random variable. It denotes the batch of images, similar to the image $x_t$.\n\n(2) For the posterior distribution $q_\\phi (w_t | X_t, Y_t, \\theta_s)$, the reviewer is right that we never observe $Y_t$, so the distribution is intractable at test time. Therefore we use only the prior distribution for the test and introduce meta-generalization to estimate the posterior distribution for the meta-target data during training. The meta-target domain is simulated by the multiple source domains, so we can get $Y_{t\u2019}$ during training.\nSimilar to the prior distribution, we first generate the features $z_{t\u2019}$ of the batch of images $X_{t\u2019}$. Differently, the categorical averaged features are generated according to the ground truth meta-target labels $Y_{t\u2019}$. Then we use the same MLP $\\phi$ to generate q(w_t) by the categorical averaged features.\n\n  \n\n**Rationale of meta-generalization and graph**\n\nMeta-generalization is utilized to simulate distribution shifts during training by splitting the multiple source domains into meta-source and meta-target domains. By doing so, we learn to generalize over shifts between meta-source and meta-target distributions. At test time, we leverage this learned ability to generalize over the unseen target data. The meta-generalization mechanism alleviates the overfitting of directly learning a model on source data.\n\nUnder meta-generalization, the graph can be directly obtained by replacing the source and target variables in Figure 1 (c) with meta-source and meta-target variables.\n\n**Gradient descent makes it hard to construct a probabilistic term**\n\nWe agree with the reviewer that gradient descent makes it hard to construct a probabilistic term. Since the distribution of the model parameters is unknown, we have to rely on an empirical Bayesian method with gradient descent to approximate $\\theta_t$ (Chelsea Finn et al., NeurIPS 2018).\n\nNote we only use this approximation to estimate the final model parameter $\\theta_t$, the variational inference is used to generate the pseudo labels. During the generation of the variational neighbor labels, we never use gradient descent to approximate the probabilistic term.\n\nWe have clarified this in the methodology section.\n\n**Reason to use variational inference**\n\nOur key idea is to capture the uncertainty of the pseudo labels in the latent space for more robust generalization across distribution shifts. The probabilistic framework encodes the uncertainty and more target information for model generalization (e.g., the sample in Figure 6 in the appendix).\n\nTo optimize the probabilistic framework, we use variational inference to approximate the true posterior of the probabilistic pseudo labels, which inherently introduces more neighboring target information and categorical information during training.\nOur experimental results in Table 1 (as well as the additional ablations by Reviewer Hsmr) confirm the variational pseudo labels outperform the deterministic ones, especially when combined with our proposed meta-generalization.\n\nWe have added these discussions to the main paper.\n\n  \n\n**Why does the method improve the pseudo label quality and when**\n\nBy meta-generalization we simulate distribution shifts during training, so the model learns to generate more effective pseudo labels for fine-tuning the model across distribution shifts. The variational neighbor labels are further improved by considering more neighboring target information.\n\nIt works because we have multiple source domains available during training to mimic distribution shifts and the availability of a batch of target samples for neighboring information at test time.\n\nWe have added this discussion to the methodology section of the paper."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission3902/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700688635701,
                "cdate": 1700688635701,
                "tmdate": 1700689372696,
                "mdate": 1700689372696,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "vnQg69aH0i",
            "forum": "2XwBIcywWM",
            "replyto": "2XwBIcywWM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_CA6h"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_CA6h"
            ],
            "content": {
                "summary": {
                    "value": "In the presented paper, the authors advocate for domain generalization by developing models trained meticulously on source domains and subsequently deploying them on unexplored target domains. The authors unfold their contributions through strategies like probabilistic pseudo-labeling and meta-generalization stages, which seem instrumental in optimizing the performance of source-trained models when introduced to target domains.\n\nThe paper claims superior algorithmic performance in comparison to preceding methodologies. Experiments conducted seem to underpin the effectiveness of the proposed strategies, attesting to their potential relevance in domain generalization. \n\nDespite its merits, the paper's exposition of integrating uncertainty with meta-generalized neighborhood information appears somewhat ambiguous. While leveraging neighborhood information for generalization has been a commonplace strategy in prior studies, the paper could benefit from a clearer elucidation of the novelty in their approach, particularly concerning the integration of uncertainty.\n\nFurthermore, the validation scope of the proposed model seems narrowly focused, lacking a diverse spectrum of benchmarks for thorough evaluation. Inclusion of broader benchmarks could enhance the rigor of the validation process, presenting a more holistic view of the model\u2019s adaptability and performance across varied scenarios. Such an extended validation would embolden the research\u2019s integrity, offering a more comprehensive insight into its applicability and effectiveness."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "- **Superior Performance:** The authors have claimed that the proposed algorithm outperforms previous methods, showcasing its effectiveness and superiority in achieving enhanced results in the conducted experiments and evaluations."
                },
                "weaknesses": {
                    "value": "- **Ambiguity in Contribution regarding Meta-generalization and Uncertainty Utilizing Neighborhood Information:** Table 1 suggests that meta-generalization is the key step. The utilization of neighborhood information with uncertainty as a tactic for generalization is not novel. Such strategies have been previously explored and applied in various studies. The paper should explicitly articulate the unique contributions made in terms of incorporating uncertainty with meta-generalization. Delineating how uncertainty with meta-generalization has been applied or integrated in this study as a key contribution is essential for understanding the paper's novelty and significance.\n\n- **Limited Validation:** The paper lacks extensive validation across a diverse range of benchmarks. Including additional benchmarks such as **STL10, CIFAR10-C, or CIFAR100-C, etc..** at least would strengthen the evaluation process and enhance the generalizability and applicability of the proposed model. **For this exercise, I suggest not to utilize other corrupted domains for CIFAR10-C or CIFAR100-C, then, it's a good validation of the proposed algorithm with single source domain input with unseen target samples.** i.e., $S=1$ in Algorithm 1. For this validation, it doesn't have to show superior performance, but such an expansion in validation datasets would provide a more comprehensive and rigorous assessment of the model's performance and robustness in various scenarios, helping to establish its efficacy and reliability more convincingly."
                },
                "questions": {
                    "value": "- **Regarding meta-generalization training, does the process utilize information from the target domain \"training\" samples?** This critical question arises due to a statement on page 4, page 5, and Algorithm 1 mentioning the accessibility of actual labels of the meta-target data during training. I need confirmation and understanding this aspect is essential for assessing the generalizability and **the source of superior performance** of the proposed algorithm.\n\n- What advantages does meta-generalization offer when compared to a general domain adaptation, including source-free domain adaptation? For example, SHOT (Liang et al. 2020) is a source-free domain adaptation. The meta-generalization steps require the leverage of various source domains. Could the authors elucidate the unique benefits that meta-generalization brings to enhance the model's performance or adaptability in domain generalization tasks? This clarification would help in understanding the specific improvements or innovations that meta-generalization contributes beyond the capabilities of existing source-free domain adaptation approaches. **I suggest providing a more detailed and concrete discussion of the benefits of the proposed method beyond what is explained in Section 4.** For example, it's better to include the ablation study regarding hyperparameters of $\\lambda_1,\\lambda_2,\\lambda_3$ indicating the contribution of each factor.\n\n- For the update of the variational neighbor label generator, could the authors clarify the rationale behind employing the difference of two losses in $L_{CE}-\\mathcal{L}_{meta}$? I am curious about the motivation for the negative sign of meta loss.\n\n- Could the authors elaborate on why there is a **noticeable performance degradation in the Office-Home dataset** as shown in Table 3, especially when compared to the results reported by Xiao et al. (2022)? An explanation regarding this discrepancy would be helpful for a more comprehensive understanding of the algorithm\u2019s performance across different datasets.\n\n- Algorithm 1 indicates the use of $n$ samples for each domain. Could the authors provide guidance on how to effectively balance these samples across various domains to ensure a harmonized and representative dataset for each domain involved?\n\n- Are there any other hyper-parameters, aside from the learning rates $\\lambda_1, \\lambda_2, \\lambda_3$, that are crucial in the model's implementation and performance? \n\n- For further validation of the proposed algorithm, consider including **exercises in single source domain generalization**. Utilizing additional benchmarks, such as STL10, CIFAR10-C, or CIFAR100-C, would not only strengthen the evaluation process but also enhance the model's **generalizability** and applicability. Specifically, applying the algorithm in scenarios with a single source domain input and unseen target samples could provide a comprehensive validation of its effectiveness and robustness. For example, if the target domain is highly distorted (like some of the corruptions in CIFAR10/100-C), the selected hyperparameters might not suit the (unseen) target domain.\n\n- **The supplementary code provided appears to be non-executable in its current form**, and it lacks essential implementations pivotal to this concept. For example, in \"dg_adapt_sampler.py\", it seems that there are missing/or modified segments of code crucial for execution. I could find a lot more missing pieces, so it's impossible to validate the key implementation. To facilitate a better understanding and application of the idea presented, please consider supplying a more comprehensive and runnable version of the code that includes all key implementations and necessary details for successful execution."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Reviewer_CA6h"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission3902/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698556536342,
            "cdate": 1698556536342,
            "tmdate": 1699636350099,
            "mdate": 1699636350099,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "1VvYaqbURv",
                "forum": "2XwBIcywWM",
                "replyto": "vnQg69aH0i",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to reviewer CA6h"
                    },
                    "comment": {
                        "value": "We thank Reviewer C6Ah for their feedback.\n\n**Ambiguity in Contribution**\n\nWe agree that meta-generalization is important and helps us achieve a good improvement. By simulation of distribution shifts during training the model learns the ability to better encode uncertainty in the variational neighbor labels and improve generalization across distribution shifts, see also the requested ablation by Reviewer Hsmr. We will better stress its importance in the updated paper.\n\n**Limited validation**\n\nWe perform experiments on seven datasets that cater for (test-time) domain generalization, as we require multiple domains for training (similar to Gulrajani & Lopez-Paz, 2020; Iwasawa & Matsuo., 2021; Xiao et al., 2022). The suggested datasets are all single-source and used for (test-time) robustness to image corruptions. Nevertheless, we conducted the experiment on Cifar-10-C and obtained 21.60 as the error rate, where the source model without adaptation achieves 29.14 and Tent (Wang et al., 2021) obtains 13.95. We have added this comparison in the appendix. The dependence on multiple source domains during training is both a strength and a weakness of our proposal. We consider single-source domain generalization at test time a worthwhile avenue for future work, as highlighted in the conclusion.\n\n**Regarding utilizing information from the target domain training samples**  \nWe would like to stress that we do not utilize any target samples during training. Instead, we mimic domain shifts during source training by obtaining a \u201cmeta target\u201d set from the source domains. Specifically, during source training, we use one source domain as the meta-source and the other source domains as the meta-target in each iteration (this is the reason why we depend on datasets providing multiple domains).\n\n**Benefits of meta-generalization**\n\nThe benefit of meta-generalization is to simulate distribution shifts during training. By doing so, the model learns the ability of generalization across domain shifts. At test time, the method can use the learned generalization ability for the (unseen) distribution shift between source and target data, leading to more robust generalization compared with methods without meta-learning.\nTo further show the benefits of mimicking distribution shifts by meta-generalization. We conduct more ablations based on meta-generalization. As in the answer of Reviewer Hsmr, meta-generalization can also improve the performance of common pseudo-labeling and probabilistic pseudo-labeling, showing the effectiveness of mimicking distribution shifts. Meta-generalization of variational neighboring labels gains more improvement and the best overall results.\n\nWe also considered meta-generalization with fewer distribution shifts during training. When we train on two instead of three source domains from PACS we obtain 80.32\u00b11.8 on the \u201cart-painting\u201d target set, where using all three domains gives 83.81. Showing the importance of mimicking distribution shifts for meta-generalization.\n\n**Difference between \\L_{ce} and \\L_{meta}**\n\nThe negative sign is a typo, it should be a positive sign. We have updated it accordingly. $L_{ce}$ calculates the cross-entropy between neighbor labels and the ground truth, while $L_{meta}$ calculates the cross-entropy between the updated model's prediction and ground truth.\n\n**Performance degradation on Office-Home**\n\nThe reviewer is correct. We attribute the performance degradation for Office-Home to the larger number of 65 categories, demanding a larger model capacity $\\phi$. We have varied $\\phi$ with different numbers of layers in the MLP for Office-Home. We obtain a mean accuracy of 57.1 with 2 layers and 64.3 with 3 layers. We have discussed this in the main paper and kept the details of the experiment in the appendix. Thank you.\n\n**Clarification about n samples in Algorithm 1**\n\nWe just use the numbers \u201cn\u201d provided by the public datasets. Our method is not sensitive to \u201cn\u201d since we randomly select the meta-source and meta-target samples in each iteration.\n\n\n**Additional hyperparameters**\n\nSimilar to recent methods, we have ablated standard test-time hyperparameters such as batch size. Additionally, since we use a small $\\phi$ network we have also ablated its model capacity and added it in the main paper. There are no additional hyperparameters involved. We have clarified this in the main paper.\n\n**Code**  \nWe added more implementation details and updated the code, and will include a link to the public github repository in the final version."
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission3902/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700688352350,
                "cdate": 1700688352350,
                "tmdate": 1700688352350,
                "mdate": 1700688352350,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "qkplltF38D",
                "forum": "2XwBIcywWM",
                "replyto": "1VvYaqbURv",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission3902/Reviewer_CA6h"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission3902/Reviewer_CA6h"
                ],
                "content": {
                    "comment": {
                        "value": "I am thankful to the authors for taking the time to address my questions and concerns. In light of their responses, I maintain my initial score."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission3902/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700707126006,
                "cdate": 1700707126006,
                "tmdate": 1700707126006,
                "mdate": 1700707126006,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "VYDbGyZ254",
            "forum": "2XwBIcywWM",
            "replyto": "2XwBIcywWM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_JCc1"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_JCc1"
            ],
            "content": {
                "summary": {
                    "value": "In this work, the authors propose a test-time domain generation method from a probabilistic perspective by modeling pseudo labels as distributions. Specifically, variational neighbor labels are incorporated to generate more robust pseudo labels, and meta-learning-based algorithms are proposed to boost the performance. The experiments on seven datasets show its effectiveness."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "+ The experiments conducted on seven datasets show its superiority over SOTA, with subtle improvement. \n+ code is provided for reproducibility."
                },
                "weaknesses": {
                    "value": "- The experiments are limited to small-scale datasets.  Some commonly adopted large-scale datasets are missing, e.g. CIFAR10-C, CIFAR100-C, ImageNet-C, VisDA.\n- The amount of improvement is limited. Ablation study on variational neighbor labels shows a subtle improvement from neighbor-labeling.   \n- Presentation:\n   - The paper writing needs improvement, which is hard to follow. \n   - I suggest labeling the proposed approach with a meaningful code instead of \"this paper\".  \n   - It is better to move section 4, \"related work\" ahead the following introduction. \n- The hyperparameter selection, e.g. learning rate,  for experiments on every dataset are not explained. \n-  what is the inference speed. How much computation cost does this neighbor pseudo label introduce?"
                },
                "questions": {
                    "value": "please check the weakness section."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission3902/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698821113932,
            "cdate": 1698821113932,
            "tmdate": 1699636350022,
            "mdate": 1699636350022,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "FU20I055g7",
                "forum": "2XwBIcywWM",
                "replyto": "VYDbGyZ254",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to reviewer JCc1"
                    },
                    "comment": {
                        "value": "We thank Reviewer JCc1 for their feedback.\n\n  \n\n**Scale of datasets**\n\nWe agree with the reviewer that the commonly used datasets PACS (9,991 images with 7 classes) and VLCS (10,729 images with 5 classes) are relatively small-scale. That is why we also conducted experiments on the larger-scale datasets Office-Home (15,588 images with 65 classes) and mini-DomainNet (140,000 images with 126 classes) in the appendix. On all datasets our method achieves competitive performance.\n\nSince we utilize meta-learning to mimic domain shifts and neighboring target information, we indeed require multiple source domains (Iwasawa & Matsuo., 2021) during training as supported by the domain generalization datasets PACS, VLCS, Terra Incognita, Office-Home and mini-DomainNet. Consequently, it is difficult to conduct our method on single-source datasets intended for image corruption robustness, like CIFAR-10C (70,000 images with 10 classes) and ImageNet-C (14,197,122 images with 1000 classes). Nevertheless, we conducted the experiment on Cifar-10-C and obtained 21.60 as the error rate, where the source model without adaptation achieves 29.14 and Tent (Wang et al., 2021) achieves 14.30. We have added this comparison in the appendix. The dependence on multiple source domains during training is both a strength and a weakness of our proposal. We consider single-source domain generalization at test time a worthwhile avenue for future work, as highlighted in the conclusion.\n\n  \n\n**Improvement over prior work**\n\nWe achieve state-of-the-art on 6 of 7 domain generalization datasets, and the improvement per dataset varies from 0.4% (VLCS) to 2.1% (Terra Incognita). We observe our peers report similar improvement gains (e.g., Iwasawa & Matsuo, 2022, Chen et al., 2023b, Jang et al., 2023, Xiao et al., 2022), while achieving state-of-the-art on fewer datasets (e.g., Iwasawa & Matsuo, 2022 on 2 out of 4 datasets reported; Chen et al., 2023 on 3 out of 5 datasets reported). Alongside its empirical performance, our method also achieves better calibration (Figure 2) and addresses complex scenarios (Figure 5).  \n  \n\n**Presentation**\n\nThank you for the suggestions. We have relocated related work and used the more meaningful codename \u2018VNL\u2019 for our method in the updated paper.\n\n\n  \n\n**Other datasets hyperparameters**\n\nWe use similar settings and hyperparameters for all domain generalization benchmarks that are reported in the main paper. We have moved the description from the appendix to the main paper.\n\n**Inference speed and computational cost**\n\nAlthough we are not as fast at inference as the online classifier adjustment method by Iwasawa & Matsuo., (2021) and BN fine-tuning methods (Wang et al., 2021 (BN)), we are comparable to other test-time domain generalization methods (Jang et al., 2023, Liang et al., 2020) as shown in the following table.  \n  \n\n\n|                            | VLCS   | PACS   | Terra   | OfficeHome |\n|----------------------------|--------|--------|---------|------------|\n| Wang et al., 2021          | 7m 28s | 3m 16s | 10m 34s | 7m 25s     |\n| Wang et al., 2021 (BN)     | 2m 8s  | 33s    | 2m 58s  | 1m 57s     |\n| Liang et al., 2020         | 8m 09s | 4m 22s | 12m 40s | 8m 38s     |\n| Jang et al., 2023          | 10m 34s| 9m 30s | 26m 14s | 22m 24s    |\n| Iwasawa & Matsuo., 2021    | 2m 09s | 33s    | 2m 59s  | 2m 15s     |\n| Variational Neighbor labels| 2m 20s | 5m 33s | 14m 30s | 7m 07s     |\n\n\nWe introduce about 1% more parameters than the backbone model, while keeping computational costs low. We have mentioned the result of this experiment and the computational cost in the main paper and kept the Table in the appendix."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission3902/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700688211175,
                "cdate": 1700688211175,
                "tmdate": 1700693736778,
                "mdate": 1700693736778,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "wbv7yScTLn",
            "forum": "2XwBIcywWM",
            "replyto": "2XwBIcywWM",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_Hsmr"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission3902/Reviewer_Hsmr"
            ],
            "content": {
                "summary": {
                    "value": "This paper presents three novel contributions aimed at addressing the issue of unreliable test-time domain generalization using pseudo labels. The authors' first contribution involves defining pseudo labels as stochastic variables and estimating their distributions, enabling the modeling of uncertainty in the predictions obtained from the source-trained models. Secondly, the authors propose the learning of variational neighbor labels to enhance the robustness of the pseudo labels. Lastly, they introduce a meta-generalization method that allows for the learning of variational neighbor labels during training, enabling the models to adapt to domain shifts. The authors support their claims with comprehensive empirical experiments, demonstrating the effectiveness of their proposed approach."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "1. Overall paper is well-written and easy to read. \n2. The proposed method uses stochastic variables to represent pseudo labels and estimates their \ndistributions. In addition, it learns variational beighbor labels to enhance the robustness of pseudo labels.\n3. The method introduces a meta-generalization method to solve the problem of domain shifts.\n4. The experiments conducted in the article are highly intuitive and sufficiently comprehensive."
                },
                "weaknesses": {
                    "value": "1. Behind the Equation 2, the authors don\u2019t explain the symbol delta.\n2. Shoule include more ablations, such as pseudo-labeling with meta-generalization and meta-generalization with probabilistic pseudo-labeling."
                },
                "questions": {
                    "value": "See above."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission3902/Reviewer_Hsmr"
                    ]
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission3902/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1699007286565,
            "cdate": 1699007286565,
            "tmdate": 1700644340630,
            "mdate": 1700644340630,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "vKfWaJU3o8",
                "forum": "2XwBIcywWM",
                "replyto": "wbv7yScTLn",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission3902/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to reviewer Hsmr"
                    },
                    "comment": {
                        "value": "We thank Reviewer Hsmr for their feedback.\n\n**delta symbol**\n\nThe delta symbol indicates the Dirac delta distribution, also known as unit impulse. The approximation of $p(\\theta_t|\\theta_s, x_t)$ by $\\delta(\\theta_t=\\theta_t^*)$ indicates we use the deterministic MAP value $\\theta_t^*$ to approximate the distribution $p(\\theta_t)$. We have clarified this in the updated paper.\n\n**More ablations for meta-generalization**\n\nFollowing your suggestion, we report additional ablations on PACS: meta-generalization with pseudo-labeling, and meta-generalization with probabilistic pseudo-labeling. Meta-generalization with the proposed variational pseudo-labeling improves the most. We have added these results in the experiments section.\n\n  \n|                                                       | PACS  |\n|-------------------------------------------------------|-------|\n| Meta-generalization with pseudo-labeling              | 82.0  |\n| Meta-generalization with probabilistic pseudo-labeling | 82.7  |\n| Meta-generalization with variational pseudo-labeling  | 83.5  |"
                    }
                },
                "number": 1,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission3902/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700688133964,
                "cdate": 1700688133964,
                "tmdate": 1700688133964,
                "mdate": 1700688133964,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]