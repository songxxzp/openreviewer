[
    {
        "title": "LLMCarbon: Modeling the End-to-End Carbon Footprint of Large Language Models"
    },
    {
        "review": {
            "id": "g0sFMwwnOT",
            "forum": "aIok3ZD9to",
            "replyto": "aIok3ZD9to",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_12is"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_12is"
            ],
            "content": {
                "summary": {
                    "value": "The work builds an analytic model that predicts carbon equivalent emissions of LLM training and deployment. The model is extensive and contains variables and functions such as scaling laws, parallelism used, mixture of experts, data center efficiencies, and embodied carbon footprint.\n\nRecommendation: While the model could further be extended to include more detailed variables, it is a groundbreaking effort that will lay the foundation for all future carbon models. I recommend this work to be highlighted at the conference."
                },
                "soundness": {
                    "value": "4 excellent"
                },
                "presentation": {
                    "value": "4 excellent"
                },
                "contribution": {
                    "value": "4 excellent"
                },
                "strengths": {
                    "value": "- a very comprehensive model that captures previously neglected variables that led to widely inaccurate carbon emission predictions\n- uses scaling laws and other variables to make accurate predictions of the carbon emissions of any training run\n- validation of the model with reported carbon footprints in the literature."
                },
                "weaknesses": {
                    "value": "- the mixture of expert models seems to use regular scaling laws equations for performance prediction. More appropriate would be to use the equations from the routed scaling laws paper.\n- some factors are not very well discussed. For example, experimentation can have a large variance of CO2eq used. For deployment, more experimentation is usually undertaken to improve model efficiency through speculative decoding and distillation. A short discussion on the most CO2eq intensive factors and how they might differ between companies/institutions would be appropriate (no need to model this)"
                },
                "questions": {
                    "value": "Comments:\n- Figure 6 and 7 caption seem to be swapped\n\nQuestions:\n- why do you use 16 A100s, batch size 32 and 128 tokens for inference benchmarking? I would assume the most common deployment strategies for inference are (1) 8x A100 + NVSwitch with batch size of 64-128 for token-by-token generation and (2) personal deployment with batch size 1 (this can be significant for T5 and other open source LLMs which enjoy large widespreadnn use)"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "10: strong accept, should be highlighted at the conference"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission1387/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698710734786,
            "cdate": 1698710734786,
            "tmdate": 1699636066463,
            "mdate": 1699636066463,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "WKubwXK8nC",
                "forum": "aIok3ZD9to",
                "replyto": "g0sFMwwnOT",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**Thank Reviewer 12is for the careful and insightful review of our manuscript!**\n\n## 1. The mixture of expert models seems to use regular scaling laws equations for performance prediction. More appropriate would be to use the equations from the routed scaling laws paper.\n\nThe reviewer's observation regarding the scaling behavior of MoE LLMs is indeed valid. We have noted that MoE LLMs exhibit scaling patterns distinct from those of dense LLMs. However, in the context of the \"Training Carbon Footprint Scaling\" subsection within Section 6, when comparing MoE and dense LLMs, we have employed the same scaling law for both MoE and dense LLMs. Considering that the test loss of an MoE LLM with P parameters closely resembles that of its dense counterpart with only P/8 parameters, as demonstrated by Rajbhandari et al. (2022), we have opted to adjust the value of P for MoE LLMs to P/8 within Equation 3. We acknowledge the need to refine this approach and employ routed scaling laws to enhance the accuracy of modeling MoE LLMs in future iterations of our work.\n\n\n## 2. Some factors are not very well discussed. For example, experimentation can have a large variance of CO2eq used. For deployment, more experimentation is usually undertaken to improve model efficiency through speculative decoding and distillation. A short discussion on the most CO2eq intensive factors and how they might differ between companies/institutions would be appropriate (no need to model this).\n\nOur primary aim is to establish a baseline framework with the capacity to delineate the carbon footprint attributed to LLMs. It is essential to underscore that the current investigation does not encompass certain intricate algorithmic optimizations, including but not limited to speculative decoding, model distillation, and token pruning. Furthermore, we have refrained from incorporating advanced hardware enhancements, such as aggressive quantization techniques (utilizing formats such as fp16, int8, and int4). Our intention is to delve into the integration of these advanced features in our forthcoming research endeavors. We will add a short discussion on the most CO2eq intensive factors and how they might differ between institutions in the next version of this manuscript.\n\n\n## 3. Why do you use 16 A100s, batch size 32 and 128 tokens for inference benchmarking? I would assume the most common deployment strategies for inference are (1) 8x A100 + NVSwitch with batch size of 64-128 for token-by-token generation and (2) personal deployment with batch size 1 (this can be significant for T5 and other open source LLMswhich enjoy large widespreadnn use)\n\nThe rationale behind our utilization of 16 A100 GPUs, a batch size of 32, and a token count of 128 for conducting inferences resides in the imperative requirement to validate the LLM inference phase using LLMCarbon. The validation data is sourced from (Yu et al., 2022), where these specific configurations\u2014namely, 16 A100 GPUs, batch size 32, and 128 tokens\u2014were employed. It is paramount for us to replicate these configurations in their entirety to ensure the fidelity of the inference carbon footprint generated for the purpose of validating LLMCarbon."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700068510522,
                "cdate": 1700068510522,
                "tmdate": 1700068510522,
                "mdate": 1700068510522,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "gUeF1UPEgH",
            "forum": "aIok3ZD9to",
            "replyto": "aIok3ZD9to",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_pKfr"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_pKfr"
            ],
            "content": {
                "summary": {
                    "value": "The main contribution of this paper is to present a comprehensive model for end-to-end carbon footprint of LLMs. Observing that LLMs can be a major contributed to overall carbon footprint, the authors model its carbon footprint from both operational and embodied perspectives, and presents detailed results for different types of architectures."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "Modeling carbon footprint is an interesting (and increasingly important) research direction. This submission is probably one of the early papers on the topic."
                },
                "weaknesses": {
                    "value": "Not clear whether the authors' definition of embodied carbon is accurate.\nNot clear where the carbon coefficient factors in in the model formulation."
                },
                "questions": {
                    "value": "While the paper certainly addresses an important topic, there are at least three issues with it, from the perspective of this reviewer:\n\n\n1) It seems to me that the authors definition of embodied carbon is the carbon emitted during the production of the hardware on which LLM models run. If that is the case, why? Because that hardware is not just used for running LLM workloads; it is. probably used for running other workloads as well. In my humble opinion, the embodied carbon -- in the case of LLMs -- should represent the carbon emitted during the training, as trained model is the main product/output of LLM. What do authors think about this?\n\n2) It is not immediately evident to me how carbon (emission) factor is accounted for in this modeling. In principle, this coefficient is location dependent and consequently depending on where you are ruining your LLMs, you should get a different carbon footprint. Can the authors clarify that?\n\n3) While I appreciate the importance of carbon modeling of LLMs, it is not clear from this work i) whether the paper is relevant to ICLR as it does not address any core topic in learning, and ii) how it can be used for optimization purposes."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission1387/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission1387/Reviewer_pKfr",
                        "ICLR.cc/2024/Conference/Submission1387/Senior_Area_Chairs"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission1387/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698771884573,
            "cdate": 1698771884573,
            "tmdate": 1700690589602,
            "mdate": 1700690589602,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "fH5uA9o39S",
                "forum": "aIok3ZD9to",
                "replyto": "gUeF1UPEgH",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**Thank Reviewer pKfr for the careful and insightful review of our manuscript!**\n\n## 1. Not clear where the carbon coefficient factors in the model formulation. It seems to me that the author\u2019s definition of embodied carbon is the carbon emitted during the production of the hardware on which LLM models run. If that is the case, why? Because that hardware is not just used for running LLM workloads; it is. probably used for running other workloads as well. \n\nWe have adopted the definition of the embodied carbon footprint for machine learning models as delineated (Wu et al., 2022) and (Tannu & Nair, 2022). The embodied carbon footprint quantifies the quantity of carbon emissions generated during the manufacturing of the hardware, subsequently multiplied by the processing duration of an LLM. This resultant value is then divided by the overall lifespan of the hardware. It is important to acknowledge that the hardware infrastructure within data centers serves not only the processing needs of LLMs but also supports various other computational workloads. This consideration has been duly taken into account in our analysis. In Table 5, it is evident that the training latency associated with Meta XLM accounts for a mere 1.12% of the total projected lifespan of the hardware upon which it operates. We have made the assumption that the hardware is designed to endure for a period of 5 years. Furthermore, our Equation 12 underscores the intrinsic relationship between the processing duration of an LLM and the anticipated lifespan of the hardware hosting the LLM.\n\n## 2. It is not immediately evident to me how carbon (emission) factor is accounted for in this modeling. In principle, this coefficient is location dependent and consequently depending on where you are ruining your LLMs, you should get a different carbon footprint. Can the authors clarify that?\n\nThe reviewer's observation regarding the dependency of the coefficient on geographical location, and consequently, on the location where LLMs are operated, is indeed accurate. The influence of the data center's location is explicitly accounted for through the incorporation of Power Usage Effectiveness (PUE) and carbon intensity in Equation 9 and Equation 10. It is worth noting that distinct data centers exhibit varying values for both Power Usage Effectiveness (PUE), as expounded upon by Henderson et al. (2020), and carbon intensity. PUE is a metric defined as the ratio of the overall energy consumption of a data center, encompassing all ancillary components such as cooling, to the energy consumed exclusively by the computing hardware housed within the data center. On the other hand, carbon intensity serves as a metric that evaluates the environmental impact stemming from the energy consumption of a data center. In Table 4, one can discern the disparities in CO2eq/KWh and PUE values across different data centers, underscoring the significance of geographical location in determining these metrics.\n\n## 3. While I appreciate the importance of carbon modeling of LLMs, it is not clear from this work i) whether the paper is relevant to ICLR as it does not address any core topic in learning, and ii) how it can be used for optimization purposes.\n\nWe sincerely appreciate the reviewer's acknowledgment of the significant role that sustainability plays in the development LLMs. Our LLMCarbon tool represents a pioneering effort in accurately modeling both the operational and embodied carbon footprints of LLMs, a facet of research that undeniably aligns with the core themes of societal considerations at ICLR.\n\nIn Section 6 of our manuscript, we have meticulously presented an extensive analysis comprising four distinct user case studies, each serving to elucidate the valuable applications of our LLMCarbon tool. These case studies serve as exemplary instances of how LLMCarbon can be effectively employed for optimization purposes. The four case studies are as follows:\n1. Impact of Renewable Energy Adoption in Data Centers: Within this context, we thoroughly investigate the impact of incorporating renewable energy sources into data centers, specifically in relation to their influence on the carbon footprint of LLMs.\n2. Optimal Parallelism Settings in LLM Training: This case study offers an in-depth exploration of the consequences associated with the adoption of optimal parallelism settings during the training of LLMs, with a particular focus on their carbon footprint implications.\n3. Adoption of New Hardware Accelerators (TPUv3 and TPUv4): Our investigation delves into the implications and advantages of integrating advanced hardware accelerators, namely TPUv3 and TPUv4, across all phases of LLM processing.\n4. Training Carbon Footprint Scaling Across Various LLMs: This case study delves into the concept of Training Carbon Footprint Scaling, providing insights into the intricate interplay between the carbon footprint, test loss, and the architectural parameter count of different LLMs."
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700068811981,
                "cdate": 1700068811981,
                "tmdate": 1700068811981,
                "mdate": 1700068811981,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "klZZitEAfp",
                "forum": "aIok3ZD9to",
                "replyto": "fH5uA9o39S",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_pKfr"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_pKfr"
                ],
                "content": {
                    "comment": {
                        "value": "Thank you for answering my concerns. Although I am still not convinced about the embodied carbon definition adopted in this work, I will raise my score (as the last two concerns of mine have been addressed well)."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700690548671,
                "cdate": 1700690548671,
                "tmdate": 1700690548671,
                "mdate": 1700690548671,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "OP6ihqed4j",
            "forum": "aIok3ZD9to",
            "replyto": "aIok3ZD9to",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_5gUj"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_5gUj"
            ],
            "content": {
                "summary": {
                    "value": "The paper provides a tool for estimating the carbon footprint of large language models (LLMs). The tool accounts for each life-cycle phase of an LLM: embodied carbon, training, inference, storage. The energy used by hardware is accounted for by considering data center characteristics and model architecture attributes. Comparison with published carbon numbers shows less than 10% error in estimation."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "- Problem statement is clear\n- Carbon footprint considers a comprehensive view of LLM life-cycle\n- Use of real-world data points from literature to perform carbon footprints\n- Validation against published carbon footprint numbers\n- Low error rates in estimation"
                },
                "weaknesses": {
                    "value": "- It is not clear how the \"ground truth\" carbon footprint numbers were established by prior works. Did they perform actual measurements? This is a concern because if the numbers are estimated, and there is an overlap in estimation methods, then it's not surprising that the error rate is low.\n- It is difficult to separate the contributions of the paper from the prior works. Much of the equations and parameters of the equations are based on prior work. Is the contribution of the paper to sum up carbon numbers from prior work equations? \n- There is no measure of utility of an LLM. For example, one can reduce the emissions by increasing test loss, but a high test loss can lead to poor performance which cannot be used in the real-world. It'll be interesting to measure the utility across classical ML models such as those used for classification, regression, translation, etc. \n- It would be good to discuss the utility of the measurement tool. Is the expectation that model designers pick an appropriate data center, architecture, or training dataset to use based on carbon footprint? Much of the time such decisions are constrained by other requirements. For example, model designers have little control over the embodied footprint of the ML model."
                },
                "questions": {
                    "value": "- Are ground truth carbon footprint values based on actual measurements? \n- Did you tune your equations or its parameters to reduce the error? If so, how do we know that LLMCarbon is not \"overfitting\"?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission1387/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698782136393,
            "cdate": 1698782136393,
            "tmdate": 1699636066280,
            "mdate": 1699636066280,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "Uv4DmfLa2t",
                "forum": "aIok3ZD9to",
                "replyto": "OP6ihqed4j",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**Thank Reviewer 5gUj for the careful and insightful review of our manuscript!**\n\n## 1. About the \"ground truth\" carbon footprint numbers and  not \"overfitting\"?\n\nWithin Table 4, we have embraced the \"ground truth\" carbon footprint values of LLMs as reported by Google (Patterson et al., 2021) and Meta (Wu et al., 2022). It is our contention that these cloud service providers have conducted comprehensive assessments of the operational energy consumption associated with their hardware infrastructures during LLM training. Subsequently, they have employed specific equations, such as Equation 10 and Equation 11 presented in this study, to derive estimates for the operational carbon footprint values. In contrast, we introduce Equations 1 through 9, which serve as a direct means of modeling the operational energy consumption of their computational devices during LLM training. We have then employed their publicly available data to validate the predictions generated by our equations. In the context of Table 4, we have utilized the same LLMCarbon framework to forecast the operational carbon footprint of various LLMs. The results of our validation process reveal a maximum difference of +8.2% between the predicted carbon footprint and the previously published data.\n\n\n## 2. It is difficult to separate the contributions of the paper from the prior works.\n\nWith the continuous expansion in the scale of LLMs, the ecological ramifications concerning carbon footprints have gained heightened significance. The distinctive contribution of LLMCarbon resides in its pioneering endeavor, presenting the inaugural tool capable of meticulously modeling both the operational and embodied carbon footprints associated with an LLM. It is pertinent to emphasize that, heretofore, no prior research has achieved this level of proficiency. While our approach incorporates certain foundational building blocks derived from prior research and relies on previously published data for the validation of LLMCarbon, it is paramount to acknowledge that no prior work has demonstrated the capacity to model the carbon footprint of LLMs, let alone attaining the precision level exhibited by LLMCarbon.\n\n## 3. There is no measure of utility of an LLM.\n\nWe have employed the scaling law (Kaplan et al., 2020) (Hoffmann et al., 2022) to formulate the representation of an LLM's test loss, as exemplified in Equation 3. Within the framework of LLMCarbon, we have the capacity to model scenarios in which the reduction of an LLM's carbon footprint is attainable through an increase in its test loss. As depicted in Figure 8, it is observable that the adoption of a smaller LLM, characterized by a reduced parameter count, can effectively diminish the carbon footprint. Nevertheless, this reduction in carbon footprint is accompanied by an associated increase in the test loss of the smaller LLM. However, now LLMCarbon cannot support the modeling of the accuracy of an LLM adopted in various downstream tasks.\n\n## 4.\tIt would be good to discuss the utility of the measurement tool. Is the expectation that model designers pick an appropriate data center, architecture, or training dataset to use based on carbon footprint? \n\nIn Section 6 of our work, we have presented a comprehensive analysis encompassing four distinct user case studies, each elucidating the utility of our LLMCarbon tool. These four case studies are as follows:\n1. Impact of Renewable Energy Adoption in Data Centers: We examine the effect of incorporating renewable energy sources within data centers on the carbon footprint of LLMs.\n2. Optimal Parallelism Settings in LLM Training: This case study delves into the ramifications of adopting optimal parallelism settings during the training process of LLMs, particularly with regard to their carbon footprint.\n3. Adoption of New Hardware Accelerators (TPUv3 and TPUv4): The investigation focuses on the implications of integrating advanced hardware accelerators, specifically TPUv3 and TPUv4, across all phases of LLM processing.\n4. Training Carbon Footprint Scaling Across Various LLMs: We explore the concept of Training Carbon Footprint Scaling across different LLMs, shedding light on the interplay between the carbon footprint, test loss, and LLM parameter count (architecture).\n\nWhile it is notable that we have not included a user case study explicitly examining the impact of data centers, LLM architectures, and datasets on the carbon footprint of an LLM, it is essential to highlight that our first user case study 1 partially underscores the significance of selecting environmentally sustainable data centers. Moreover, our fourth user case study elucidates the trade-off dynamics involving the LLM's carbon footprint, test loss, and LLM parameter count (architecture). Lastly, our third user case study provides insight into the embodied footprint of an LLM, offering designers the option to make adjustments by choosing between TPUs and GPUs for LLM training."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700069081947,
                "cdate": 1700069081947,
                "tmdate": 1700069081947,
                "mdate": 1700069081947,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "ygxXhgbeLH",
                "forum": "aIok3ZD9to",
                "replyto": "Uv4DmfLa2t",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_5gUj"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_5gUj"
                ],
                "content": {
                    "title": {
                        "value": "Thanks for the detailed responses"
                    },
                    "comment": {
                        "value": "Thank you for answering the weakness points raised in the review.\n\nI would still like the answer to the following question: \nDid you tune your equations or its parameters to reduce the error? If so, how do we know that LLMCarbon is not \"overfitting\"? \n\nFor point (2), I understand that you demonstrated superior modeling capacity/proficiency using existing tools. I'm asking what research questions (if any) did the paper address? Are all of the equations well-known, and did prior works estimate similar metrics (such as cost or energy use) for ML architectures using them? \n\nI'm satisfied with your responses for the rest of the issues raised."
                    }
                },
                "number": 9,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700694073922,
                "cdate": 1700694073922,
                "tmdate": 1700694073922,
                "mdate": 1700694073922,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "eufWCUElAK",
            "forum": "aIok3ZD9to",
            "replyto": "aIok3ZD9to",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_KiRY"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_KiRY"
            ],
            "content": {
                "summary": {
                    "value": "In this paper, the authors proposed an end-to-end carbon footprint predictor for llm services. Specificall, the predicted carbon footprint is the sum of two parts: operational carbon footprint and embodied carbon footprint. The former one is calculated with a model by taking model parameters, hardware efficiency as input; The latter one is calcuated with another model by taking hardware type, chip area, system power as input. Through extensive comparison experiments, the predicted results shows a better performance with at most 8.2% error."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "- Compared with baselines, the proposed llmcarbon generalize the carbon prediction to various network architectures (dense llm and moe llm), various hardwares (gpu and tpu) and various phase (training, inference, experimentaiton and storage).\n\n- The key submodels in llmcarbon are elaborated with mathematic formulation and detail description. All the architecture is easy to follow."
                },
                "weaknesses": {
                    "value": "- Some parameter is crucial to the final predicted results, the process of setting parameters should be clarified. For example, in equation 3, \\alpha, \\beta are the fitting parameters. However, the fitting dataset and fitting method are missing.\n\n- Apart form the parameters discussed in the paper, more factors also affect the footprint. e.g., the paramter precision (fp16, int8, int4) and the implementation of kernel operation.\n\n- There are not any text description about figure 3 and figure 4.\n\n- The proposed llmcarbon is somewhat like a system design with many prior experience from sota, the algorithm contribution are not notable."
                },
                "questions": {
                    "value": "See above weakness part."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission1387/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698844357256,
            "cdate": 1698844357256,
            "tmdate": 1699636066210,
            "mdate": 1699636066210,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "0cQn2o9Z53",
                "forum": "aIok3ZD9to",
                "replyto": "eufWCUElAK",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**Thank Reviewer KiRY for the careful and insightful review of our manuscript!**\n\n## 1. Some parameter is crucial to the final predicted results, the process of setting parameters should be clarified. For example, in equation 3, \\alpha, \\beta are the fitting parameters. However, the fitting dataset and fitting method are missing.\n\nWe have incorporated Equation 3 as presented in (Hoffmann et al., 2022). In the subsection titled \"Training Carbon Footprint Scaling\" within Section 6, we stated the following: \" To compute the test loss, we adopt the fitting constants including \u03b1 = 0.34, \u03b2 = 0.28, A = 406.4, B = 410.7, and E = 1.69 for Equation 3 from (Hoffmann et al., 2022). Since the test loss of an MoE LLM with P parameters is similar to that of its dense counterpart with only P/8 parameters (Rajbhandari et al., 2022), we decreased the P of MoE LLMs to P/8 in Equation 3.\"\n\n## 2. Apart form the parameters discussed in the paper, more factors also affect the footprint. e.g., the parameter precision (fp16, int8, int4) and the implementation of kernel operation.\n\nOur objective is to establish a baseline framework capable of representing the carbon footprint associated with LLMs. It is noteworthy that, in the present study, we have not taken into account certain sophisticated algorithmic optimizations, including but not limited to speculative decoding, model distillation, and token pruning. Additionally, we have not incorporated advanced hardware enhancements such as aggressive quantization (utilizing formats like fp16, int8, and int4). We intend to explore the integration of these advanced features in our future work.\n\n## 3. There are not any text description about figure 3 and figure 4.\n\nWe have made textual alterations by introducing descriptive elements for Figure 3 and 4, which are delineated in blue text.\n\n## 4. The proposed LLMCarbon is somewhat like a system design with many prior experience from SOTA, the algorithm contribution are not notable.\n\nAs the size of LLMs continues to grow, the environmental impact in terms of carbon footprints becomes increasingly noteworthy. Consequently, the development of a precise tool for modeling the carbon footprints of LLMs is of paramount importance. The principal contribution of LLMCarbon lies in its pioneering capability to accurately characterize both the embodied and operational carbon footprints associated with LLMs. While LLMCarbon leverages established building blocks and incorporates previously published data for validation purposes, it is worth noting that prior research endeavors have not achieved the same level of precision in modeling both the embodied and operational carbon footprints of LLMs."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700075489816,
                "cdate": 1700075489816,
                "tmdate": 1700075489816,
                "mdate": 1700075489816,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "ULb0Gvdbs7",
                "forum": "aIok3ZD9to",
                "replyto": "eufWCUElAK",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_KiRY"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_KiRY"
                ],
                "content": {
                    "comment": {
                        "value": "Thanks for providing detailed response. \nOverall, I think this work is a good initiative and baseline for carbon footprint in LLM. \nIt would be great the author could build a benchmark tool and standards like MLPerf, and open-source it to the community and industrial, since the field is fast iterated, not only the hardware, but also the training and inference techniques. \nThe carbon footprint computing logic will be greatly changed based on those newly evolved techniques. \nWith such a tool/benchmark to push the industrial moving more green in LLM, I think that is more important than an ICLR publication."
                    }
                },
                "number": 12,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700713985885,
                "cdate": 1700713985885,
                "tmdate": 1700714163223,
                "mdate": 1700714163223,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "TOEP5u59ej",
            "forum": "aIok3ZD9to",
            "replyto": "aIok3ZD9to",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_aKac"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_aKac"
            ],
            "content": {
                "summary": {
                    "value": "This paper introduces LLMCarbon, a comprehensive cost model developed to estimate the carbon footprint associated with various stages of LLM computation, such as training, inference, experimentation, and storage. LLMCarbon extends its applicability beyond previously established models by incorporating support for a broader range of LLM architectures, with a specific focus on the mixture-of-experts architecture and more types of hardware. The paper provides an in-depth discussion of LLMCarbon\u2019s cost model, covering aspects like parameter count, FLOPs, and hardware efficiency. To validate LLMCarbon\u2019s efficacy, we present experimental results across different LLMs and hardware configurations."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "This paper is both well-written and well-motivated, addressing the critical issue of environmental sustainability by studying the carbon footprint of LLM computation. The authors have proposed a cost model that appears to be both fine-grained and carefully designed, reflecting a thorough approach to this significant topic."
                },
                "weaknesses": {
                    "value": "- the procedure of how LLMCarborn figures out the optimal parallelism is not quite clear.\n- It is not clear how to use LLMCarborn to guide the design of future generations of LLM architectures and figure AI accelerators.\n- The relationships and connections between the proposed hardware efficiency and metrics like arithmetic intensity and MFU are not clear."
                },
                "questions": {
                    "value": "- For figuring out the optimal parallelism strategy using LLMCarborn, how different are the strategies returned by LLMCarborn compared to the one solved using the compilation approach, e.g., the one proposed in [1]?\n- Instead of scaling law, recent LLM pre-training efforts usually leverage a certain training number of tokens, e.g., 1T/1.4T in LLaMA. Would it be sufficient to directly use the number of training tokens instead of loss/perplexity?\n- How can one use LLMCarborn to guide the designs of future generations of LLM architecture/training procedures or even AI hardware design?\n\n[1] https://www.usenix.org/system/files/osdi22-zheng-lianmin.pdf  \n[2] https://arxiv.org/abs/2302.13971"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "8: accept, good paper"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission1387/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission1387/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission1387/Reviewer_aKac"
                    ]
                }
            },
            "number": 5,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission1387/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698902392774,
            "cdate": 1698902392774,
            "tmdate": 1700691238683,
            "mdate": 1700691238683,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "7s8FrxJstY",
                "forum": "aIok3ZD9to",
                "replyto": "TOEP5u59ej",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "**Thank Reviewer aKac for the careful and insightful review of our manuscript!**\n\n## 1. The procedure of how LLMCarborn figures out the optimal parallelism is not quite clear. For figuring out the optimal parallelism strategy using LLMCarborn, how different are the strategies returned by LLMCarborn compared to the one solved using the compilation approach, e.g., the one proposed in [1]? [1] https://www.usenix.org/system/files/osdi22-zheng-lianmin.pdf\n \nThe primary objective of modeling optimal parallelism in LLMCarbon is to calculate the maximum hardware efficiency for a given combination of hardware and LLM configurations. Hardware efficiency plays a pivotal role in determining both the training duration (Equation 7) and the operational energy (Equation 8) of the system. It's noteworthy that whether LLMs are manually compiled [Narayanan et al., 2021] (Megatron-LM) or automatically compiled [1] on a specific hardware configuration, the maximum hardware efficiency remains constant. The validation of LLMCarbon's optimal parallelism modeling is carried out against the results obtained from manual compilation [Narayanan et al., 2021] (Megatron-LM). As indicated in Figure 7(a) in [1], the throughput achieved through automatic compilation is marginally lower than that achieved through the manual compilation technique (Megatron-LM).\n\nWe have revised the procedure explaining how LLMCarbon computes optimal parallelism. Please review the modified sections highlighted in blue in the PDF file. The central concept of optimal parallelism modeling involves the utilization of a polynomial regression model, trained using maximum hardware efficiency data from [Narayanan et al., 2021], to predict the maximum hardware efficiency based on LLM parameters. Each recorded maximum hardware efficiency value corresponds to an optimal number of computing devices (GPUs). Furthermore, LLMCarbon accommodates scenarios involving MoE LLMs and training with a fewer number of computing devices than the optimal configuration dictates.\n\n\n## 2. Instead of scaling law, recent LLM pre-training efforts usually leverage a certain training number of tokens, e.g.,1T/1.4T in LLaMA. Would it be sufficient to directly use the number of training tokens instead of loss/perplexity?\n\nIn brief, no. The scaling law takes into account not only the number of training tokens but also factors in the model's parameter count and the computational resources utilized during training. Relying solely on the number of training tokens allows us to address only a specific LLM architecture characterized by a predetermined parameter count.\n\n## 3. It is not clear how to use LLMCarborn to guide the design of future generations of LLM architectures and figure Accelerators. How can one use LLMCarborn to guide the designs of future generations of LLM architecture/training procedures or even AI hardware design?\n\nWe have presented four user case studies facilitated by LLMCarbon in Section 6. Specifically, as illustrated in Figure 8, designers can evaluate the carbon footprints and test loss of various prospective LLM architectures to determine potential candidates for future development. Furthermore, by referring to Figure 7, hardware designers can ascertain whether a new generation of TPUs will lead to a reduction or increase in the training carbon footprint of state-of-the-art LLMs.\n\n## 4. The relationships and connections between the proposed hardware efficiency and metrics like arithmetic intensity and MFU are not clear.\n\nWhen the architecture of an LLM is fixed, the concept of hardware efficiency pertains to the extent of inactivity exhibited by computational devices, such as GPUs, during the training process of the LLM. This measurement allows LLMCarbon to make estimations regarding the duration of the training process (as specified in Equation 7), as well as the mean energy consumption of these computational devices throughout the LLM training (as elucidated in Equation 8), relying on the values of hardware efficiency. On the contrary, on the same hardware platform, the arithmetic intensity and MFU may be determined by the architecture of the LLM. Some architectures may involve higher arithmetic intensity, others may need a lower one. So the hardware efficiency and the arithmetic intensity are two totally different concepts."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700076108362,
                "cdate": 1700076108362,
                "tmdate": 1700076108362,
                "mdate": 1700076108362,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "qnsHb6yvY4",
                "forum": "aIok3ZD9to",
                "replyto": "7s8FrxJstY",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_aKac"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission1387/Reviewer_aKac"
                ],
                "content": {
                    "title": {
                        "value": "Thank you for your response"
                    },
                    "comment": {
                        "value": "I thank the authors for their careful and thorough responses, which have overall addressed my concerns. I would especially like to thank the authors for modifying the optimal parallelism section.\n\nI would like to raise my overall rating from 6 to 8."
                    }
                },
                "number": 8,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700691224300,
                "cdate": 1700691224300,
                "tmdate": 1700691224300,
                "mdate": 1700691224300,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "ZqJI0Qyt68",
            "forum": "aIok3ZD9to",
            "replyto": "aIok3ZD9to",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_12is"
            ],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission1387/Reviewer_12is"
            ],
            "content": {
                "title": {
                    "value": "To other reviewers: it is unreasonable that _all_ carbon-related factors are accounted for and validated"
                },
                "comment": {
                    "value": "From reading the other reviewers, I think that many concerns are valid, but I would like to note that most of these concerns are very difficult to model or verify. I think the work proposes a carbon model of unprecedented accuracy and accounts for many factors. I am not aware of work that has similar complexity. While this work does not have new algorithms or does not account for complex factored (embodied carbon for the accelerators) it does improve considerably on previous models and will be a strong tool for modeling carbon usage for LLMs.\n\nAs such, I will keep my score and encourage other reviewers to raise theirs as well."
                }
            },
            "number": 10,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission1387/-/Official_Comment"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1700699187523,
            "cdate": 1700699187523,
            "tmdate": 1700699187523,
            "mdate": 1700699187523,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": []
    }
]