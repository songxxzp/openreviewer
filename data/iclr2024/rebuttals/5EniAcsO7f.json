[
    {
        "title": "Tailoring Retrieval Representations to Long-term Visual Localization"
    },
    {
        "review": {
            "id": "1jG3VYmkW3",
            "forum": "5EniAcsO7f",
            "replyto": "5EniAcsO7f",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission332/Reviewer_Hu6J"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission332/Reviewer_Hu6J"
            ],
            "content": {
                "summary": {
                    "value": "This paper tailors the training of a retrieval model to the challenging task of long-term visual localization. The paper uses language-based data augmentation to improve the robustness of retrieval models to adversarial daytime, weather, and seasonal variations, and further introduces geometry-based strategies for filtering and sampling from a pool of synthetic images. Experimental results show that the proposed method achieves significant improvements over the state-of-the-art on six common benchmarks."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "1. It makes sense to me to start with state-of-the-art techniques for landmark retrieval and gradually adapt them to intuitions about visual localization. The paper uses language-based data augmentation to improve the robustness of retrieval models to adversarial daytime, weather, and seasonal changes.\n2. The paper is well written and structured\n3. The paper performs nice ablation experiments on all different combinations of pre-trained targets and dataset combinations.\n4. The paper provides a detailed explanation and description of related work."
                },
                "weaknesses": {
                    "value": "1. Relative to HOW (Tolias et al., 2020), InstructPix2Pix (Brooks et al., 2023), LightGlue (Lindenberger et al., 2023), the contributions appear to be incremental, such as two contributions training with synthetic variants, and synthetic variant generation and geometric consistency.\n2. To handle large environments, a trade-off must be made between accuracy and computation time. Then, is the approach utilized in practical applications?"
                },
                "questions": {
                    "value": "1. What is the difference between the loss function of Ret4Loc-HOW-Synth (Eq. (2)) and Eq. (1)? Does Eq. (2) just use the extended tuple set?\n2. How does the training time gets impacted with the newly introduced loss?\n3. Since the authors discussed synthesizing a training set from generated text to image models, did they also compare on a visual classification task?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "details_of_ethics_concerns": {
                    "value": "No"
                },
                "rating": {
                    "value": "8: accept, good paper"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission332/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission332/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission332/Reviewer_Hu6J"
                    ]
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission332/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698216014955,
            "cdate": 1698216014955,
            "tmdate": 1699635960185,
            "mdate": 1699635960185,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "gctTeGEHmW",
                "forum": "5EniAcsO7f",
                "replyto": "1jG3VYmkW3",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response"
                    },
                    "comment": {
                        "value": "We sincerely thank the Reviewer for finding our approach intuitive, our paper well written and for praising our experimental evaluation. Below we respond to all their questions and concerns.\n\n> \u201cTo handle large environments, a trade-off must be made between accuracy and computation time. Then, is the approach utilized in practical applications?\u201d\n\nOur method proposes a better training process designed to improve the model used in the retrieval step of visual localization. All the changes we make are at _training time_, and do not affect scalability at test time. In fact, it is worth noting that improving the retrieval step is what makes the difference in large environments, i.e. localization for cases where the database is large. The shortlist passed on to the pose approximation methods matters even more in such cases. We hope this answers the Reviewer\u2019s question and apologize if we misunderstood what the reviewer meant by \u201clarge environments\u201d. We are happy to discuss this further if needed.\n\n> \u201cWhat is the difference between the loss function of Ret4Loc-HOW-Synth (Eq. (2)) and Eq. (1)? Does Eq. (2) just use the extended tuple set?\u201d\n\n\nThere are two differences between the two losses: First, as the Reviewer notes, Eq. (2) extends the tuple set to all real and synthetic tuples. Apart from that, it also introduces the feature aggregation function phi, a function that aggregates the embeddings from the real and all synthetic variants per image. Because of that, tuples are not treated independently anymore at the loss level.\n\n> \u201cHow does the training time gets impacted with the newly introduced loss?\u201d\n\n\nThis is a great question. Below we report training time and memory requirements for our method and the baseline. It is worth highlighting that we can train our model in less than 8 hours on a single A100 GPU. We ran image generation as a pre-processing step once, this took about 25 hours for the SfM-120k dataset when running it for all prompts in parallel. \n\n\n| Model                | Number of variants K used in Eq. (2) | Total number of available training images |  Training time | Maximum GPU memory usage | RobotCar Night Recall@1 | RobotCar Night Recall@10 |\n| ---------------------------------- | --------------------------------- | ----------------------------------------- |  ------------- | ------------------------ | ----------------------- | ------------------------ |\n| Ret4Loc-HOW         | 1 (no synthetic)                     | 91K (real)                                       | ~4 hours      | 21.8 GB                  | 24.1                    | 38.1                     |\n| Ret4Loc-HOW-Synth++ | 3                                    | 91K (real) + 1M (synthetic)                                      | ~8 hours      | 65.4 GB                  | __33.3__ (+9.2%)            | __45.3__ (+7.2%)             |\n\n\n> Since the authors discussed synthesizing a training set from generated text to image models, did they also compare on a visual classification task?\n\n\nPart of the motivation of our paper is to tailor retrieval to the specific task of visual localisation and all our experiments and backbones are tuned for that. We believe it is beyond the scope of this paper to also report results on classification. However, there do exist recent papers that use a training set from generated text to image models for ImageNet classification (e.g. Sariyildiz et al, CVPR 2023 or He et al, ICLR 2023) that we could discuss further if the reviewer believes we should.\n\nWe thank the Reviewer again for a constructive review and hope that our answers above clarify all main concerns. We are looking forward to hearing their thoughts on our responses and welcome further discussion."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700232028629,
                "cdate": 1700232028629,
                "tmdate": 1700232028629,
                "mdate": 1700232028629,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "BD7FAh9cxr",
            "forum": "5EniAcsO7f",
            "replyto": "5EniAcsO7f",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
            ],
            "content": {
                "summary": {
                    "value": "This paper aims to improve the retrieval accuracy to enhance the localization performance under challenging conditions such as illumination, weather and season variations between the query and reference images. \n\nTo deal with these challenges, the authors propose to expand the training data by generating a large number of synthetic images with the aforementioned variations via generative text-to-image models. Additionally, a geometry-based method is adopted to filter and sample training images.\n\nThe model trained on expanded training data gives better performance than previous methods on multiple public datasets."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "1.\tMotivation. A map used for localization is usually built on images captured at very short the time interval without large appearance changes. However, the query images could be recorded at different times with huge illumination, weather, and season differences to reference images in the map, which makes long-term localization challenging. \nIn the paper, the authors propose to bridge the gap by generating training data with these variations. The idea is straightforward but very useful especially for the retrieval task.\n\n2.\tGeometric constraints. I am more interested in this part. One reason is as mentioned in the paper that this allows synthetic images to preserve location-specific information which cannot be guaranteed by generative models. One more important reason is that localization using 3D map has two steps: coarse localization by retrieval and fine localization with PnP + RANSAC from 2D-3D matches. Due to appearance changes, the best retrieved images may not give the most accurate poses as the final pose is also influenced by how matches can be found between the query and retrieved images. It seems like this point is not discussed in the paper.\n\n3.\tExtensive experiments. The proposed method is evaluated on multiple public datasets including RobotCar-Seasons, Aachen Day-Night, ECMU, Gangnam Station B2, Baidu Mall and Tokyo 24/7. Results demonstrate that regular augmentations are the most effective techniques (Ret4Loc-How vs. How) and the proposed training with synthetic data (Ret4Loc-How-synthetic) and geometric constraints (Ret4Loc-How-synth+ and Ret4Loc-How-synth++) also improve the performance."
                },
                "weaknesses": {
                    "value": "The proposed method is simple and easy to follow. My major concerns come from the evaluation.\n\n1.\tResults on RobotCar-Seasons dataset. The textural prompts are from tags in RobotCar-Seasons dataset, but in Table 1, models + synthetic data + geometric constraints, denoted as Ret4Loc-How-synth+ and Ret4LocHow-synth++ do not give obvious improvements to Ret4Loc-How.\n\n2.\tIn Table 2, Ret4Loc-HOW-Synth++ achieves better results than previous single-state methods but gives worse accuracy than approaches with reranking. Since in the paper the authors mention that reranking can also be applied to the proposed methods, why not provide results of proposed methods with reranking? In theory, models such as Ret4Loc-HOW-Synth++ plus reranking should work better than other methods with re-ranking.\n\n3.\tComparison with NetVLAD and GEM. As far as I know, NetVLAD and GEM are the most popular methods used for retrieval on ECMU, Aachen and RobotCar-Seasons datasets. It would be better to include results of these methods. By the way, although ECMU contains images with diverse seasonal changes, it provides sequential images, which makes retrieval and localization easy. Therefore, results on Aachen and RobotCar-Seasons datasets are more convincing.\n\n4.\tResults of localization with 3D map. Fig.10 in appendix shows results with 3D map. However, according to the website (https://www.visuallocalization.net/benchmark/), some more recent methods such as SP+SG, sfd2_4000kpts_netvlad50, KAPTURE-R2D2-APGeM, imp_4kpoints_netvlad50, SP+LightGlue give more much better accuracy with only NetVLAD for reference search. As these methods give the current SOTA results, the proposed method in the paper should be compared with these methods. I can understand that these methods may use different local features and global features to R2D2 and HoW. But it is possible to replace the global feature with Ret4Loc-synth++ and report the results.\n\n5.\tIt is not very clear to me in Fig. 9, the authors show matches given by LightGlue not R2D2, but R2D2 is the local feature used for finding 2D-2D matches in the paper. I also want to know is R2D2 used for geometric constraints?  \n\n6.\tIn Sec.5, related works of visual localization under challenging conditions are discussed. Image augmentation with style transfer such Day-Night transfer is only one way to handle appearance changes. Some other solutions like semantic localization and semantic features (e.g., Visual Localization Using Sparse Semantic 3D Map, Sfd2). Related papers can be found from https://www.visuallocalization.net/benchmark/) are also solutions to challenging conditions as semantics are more robust to appearance changes. Discussions on these works should also be included if this work focuses on improve visual localization under challenging conditions."
                },
                "questions": {
                    "value": "Please see Weaknesses for details."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "5: You are absolutely certain about your assessment. You are very familiar with the related work and checked the math/other details carefully."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission332/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission332/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission332/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698634041281,
            "cdate": 1698634041281,
            "tmdate": 1700684026312,
            "mdate": 1700684026312,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "WTPneujTNb",
                "forum": "5EniAcsO7f",
                "replyto": "BD7FAh9cxr",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response - part 1 of 2"
                    },
                    "comment": {
                        "value": "We thank the Reviewer for lots of constructive feedback and for finding strengths in our work across multiple dimensions. In this response we address the concerns that the reviewer raised regarding our evaluation. \n\n> 1. \u201cResults on RobotCar-Seasons dataset. The textural prompts are from tags in RobotCar-Seasons dataset, but in Table 1 [...] geometric constraints do not give obvious improvements over Ret4Loc-HOW.\u201d\n\nIt is true that, for the day split of RobotCar, we do not see gains from the use of synthetic data. This is however not the case for the more challenging Robotcar night split. There, the best model is Ret4Loc-HOW-Synth, i.e. the one that uses all synthetic data without filtering (row 3). It shows strong performance gains over Ret4Loc-HOW, i.e. 3.3% and 6.7% in localization accuracy for two precision thresholds using 3D maps, while gains are even higher for the EWB protocol, where retrieval matters the most. \n\nIt is however also true that adding geometric constraints to filter/sample the data does not really improve over using all synthetic data for Robotcar in general. One explanation could be indeed the fact that textural prompts are coming from tags in RobotCar-Seasons: even distorted night images might act as regularization and lead to improved performance.\n\nHowever, this behavior is the exception: We can see from the extended result over all localization and retrieval datasets (Tables 1,2, and Figures 10,11,12) that top performance in most cases comes from our variants that also exploit geometric constraints. \n\n> 2. \u201cIn Table 2, Ret4Loc-HOW-Synth++ achieves better results than previous single-state methods but gives worse accuracy than approaches with reranking. [...] why not provide results of proposed methods with reranking? \u201c\n\nWe thank the Reviewer; we agree that having results with reranking in Table 2 would strengthen our paper even more. It will be hard to get those results by the end of the rebuttal period, but we will set up and run reranking experiments, and present them in a camera-ready version. \n\nThat said, we believe that reranking experiments would be good to have, but not crucial. One of our paper\u2019s contributions is our extensive evaluations on 5 localization datasets using precise visual localization with 3D maps (Table 1 and Figure 3 in the main paper, as well as Figures 10, 11 and 12). This is unique for a paper proposing a retrieval method yet essential in our case since part of our novelty is tailoring retrieval to localization. These localization evaluations that we report already go way beyond reranking experiments, which could be seen as an intermediate set evaluation. \n\n\n\n> 3. \u201cComparison with NetVLAD and GEM.\u201d\n\nThis is a great point and we apologize for these missing comparisons to standard methods. We have already computed the two methods for EWB (that is faster) and promise to report them in Fig 3 of the updated pdf we post during rebuttal. For EWB, we observe that the missing baselines change our relative gains reported in Fig 3 only slightly, and only for the Aachen-night EWB case (+14.1% -> +13.6%). In all other cases our strong gains remain unchanged, i.e. for Robotcar Night (+14.7%) and Gangnam (+4.6%). We also have results for Aachen-night SfM where our relative gains also remain unchanged (+1.6%). We will provide complete comparisons to both methods on all datasets for a camera-ready version."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700231749252,
                "cdate": 1700231749252,
                "tmdate": 1700231749252,
                "mdate": 1700231749252,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "g0lEm4Bm57",
                "forum": "5EniAcsO7f",
                "replyto": "WTPneujTNb",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                ],
                "content": {
                    "title": {
                        "value": "3. Comparison with NetVLAD and GEM"
                    },
                    "comment": {
                        "value": "Many thanks for the reply. It is very easy to find the source code of NetVLAD and GeM from github to run the experiments. The author can also use the open-sourced framework HFNet which already incorporates NetVLAD and GeM to do that. I believe it will not take much time."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700579992455,
                "cdate": 1700579992455,
                "tmdate": 1700579992455,
                "mdate": 1700579992455,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "55wzmuLbjB",
                "forum": "5EniAcsO7f",
                "replyto": "uTct8X8QJN",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                ],
                "content": {
                    "title": {
                        "value": "Reply to Q4 and Q5"
                    },
                    "comment": {
                        "value": "Q4\n\nI agree that the idea in the paper is simple and useful. Because of this, I hope to see a more convincing comparison with previous SOTA methods that achieve the best localization performance on Aachen and RobotCar datasets.\n\nPrevious methods do the retrieval on the whole dataset of Aachen, so it would be a fair comparison to replace NetVLAD with the method proposed in the paper and report the numbers. \n\nAs for RobotCar dataset, the author could adopt the same setup used by prior approaches and conduct the experiments.\n \nQ5. \n\nThanks for the reply. One question which is not answered is that if R2D2 or LightGlue+other local feature is used in the training process especially the geometric constraints."
                    }
                },
                "number": 8,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700580382196,
                "cdate": 1700580382196,
                "tmdate": 1700580382196,
                "mdate": 1700580382196,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "H2125lHil4",
                "forum": "5EniAcsO7f",
                "replyto": "BD7FAh9cxr",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Additional authors' response"
                    },
                    "comment": {
                        "value": ">Comparissons to AP-GeM and NetVLAD added for Aachen and Robotcar\n\nWe have added Ap-GeM and NetVLAD in Figures 3 and the extended Fig 10 for Aachen and Robotcar. We see that Ret4Loc models still offer significant gains over all baselines on the night slices of the two important benchmarks that the reviewer mentions. Performance gains are noteworthy in the EWB case, i.e. the case where retrieval plays a primary role. We report gains of _over 10% in localization accuracy_ with our top Ret4Loc model for both Aachen night and Robotcar night.  \n\nLet us also note that we have verified our reproductions match the results reported for the two methods in the IJCV 2022 study on retrieval for localization by Humenberger et al. (see Fig 6 of the journal paper).\n\n\n> Q4. I agree that the idea in the paper is simple and useful. Because of this, I hope to see a more convincing comparison with previous SOTA methods that achieve the best localization performance on Aachen and RobotCar datasets. Previous methods do the retrieval on the whole dataset of Aachen, so it would be a fair comparison to replace NetVLAD with the method proposed in the paper and report the numbers.\n\nWe thank the reviewer again for finding the idea simple and useful. We hope that after adding the two baselines the reviewer is also convinced that our method also offers strong gains in terms of both retrieval  and localization performance. Let us note again that all our localization experiments are run _under a fair setting_, i.e. exactly the setup that the reviewer describes: We are only switching the retrieval method and keep the pose estimation step fixed in all experiments to a common choice for SfM based- localization, i.e. Kapture with Feather-R2D2. \n\n> As for RobotCar dataset, the author could adopt the same setup used by prior approaches and conduct the experiments.\n\nDespite the fact that in that setup retrieval would matter even less, we agree that this is another experiment that would be nice to have for completeness. We hope however that the reviewer understands that all these experiments are hard to conduct during rebuttal. Similar to the experiment that the reviewer asked with reranking, we do intend to include it in a camera ready version if our paper gets accepted. \n\nWe also hope the reviewer agrees that either of the two are merely complementary to the strong and fair evaluations that already exist in the paper.\n\n> Q5. Thanks for the reply. One question which is not answered is that if R2D2 or LightGlue+other local feature is used in the training process, especially the geometric constraints.\n\nWe apologize if our response above was not clearly expressed. We use only LightGlue during training, for computing the geometric consistency score for each of the synthetic pairs in our extended _training set_ (i.e. SfM-120k). We then use R2D2 local features only in the pose estimation step of localization via 3D maps, i.e. as part of the Kapture based SfM-based localization process that we consider a black box. We chose R2D2 since this is a common choice that is also used in the recent study on retrieval for localization by Humenberger et al (IJCV 2022).\n\nThank you for the interaction and discussion, we appreciate it. Let us know if the above additional response clarifies all remaining concerns. Happy to discuss further."
                    }
                },
                "number": 11,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700591078747,
                "cdate": 1700591078747,
                "tmdate": 1700591449684,
                "mdate": 1700591449684,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "TzixnGH6QB",
                "forum": "5EniAcsO7f",
                "replyto": "H2125lHil4",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_dtiA"
                ],
                "content": {
                    "title": {
                        "value": "pose rebuttal"
                    },
                    "comment": {
                        "value": "Thanks for the reply. I have no other concers."
                    }
                },
                "number": 13,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700684003154,
                "cdate": 1700684003154,
                "tmdate": 1700684003154,
                "mdate": 1700684003154,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "TG0MFSJOYS",
            "forum": "5EniAcsO7f",
            "replyto": "5EniAcsO7f",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission332/Reviewer_oYk5"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission332/Reviewer_oYk5"
            ],
            "content": {
                "summary": {
                    "value": "In this paper, the author proposes a new method named for Long-term Visual localization. The author first builds a strong baseline, i.e., a baseline with strong data augmentations for visual localization. Then, the author proposed to use the conditional diffusion model to generate synthetic data, then the author proposed some strategies to train with joint real data and synthetic data. The proposed methods achieve performance gain over previous methods."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "In general, I'm satisfied with the paper. The proposed method is simple and effective. Without bells and whistles, the proposed method achieves state-of-the-art performances on major benchmark datasets."
                },
                "weaknesses": {
                    "value": "However, I still have some concerns about the paper:\n\n1. Though the proposed method is simple, I think the author could provide more detailed comparisons of the method, like the number of training images, the generating time, etc. The proposed method utilizes a conditional diffusion model to generate the augmented dataset rather than the previously manual data augmentations. Thus it is noticeable and essential to bring the cost (training and memory cost), the training image numbers comparisons, and the training time cost for the model.\n\n2. Though the InstructPix2Pix model is a natural choice for the paper. There are many choices with the model, e.g., Stable Diffusion with ControlNet, etc., the author could provide more extra experiments with different methods (even though ablations on a small dataset) will make the paper more robust. Also, the proposed filtering metric should be discussed over different generation settings."
                },
                "questions": {
                    "value": "Please mainly see the weaknesses section for details."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission332/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698687197676,
            "cdate": 1698687197676,
            "tmdate": 1699635960037,
            "mdate": 1699635960037,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "nA5rmnUsnX",
                "forum": "5EniAcsO7f",
                "replyto": "TG0MFSJOYS",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response - part 1 of 2"
                    },
                    "comment": {
                        "value": "We thank the Reviewer for a constructive and overall positive review. In this response, we address the reviewer\u2019s concerns and provide the data and statistics requested. We will incorporate all information presented below in the updated pdf.\n\n> 1.  \u201cmore detailed comparisons of the method, like the number of training images, the generating time [...] it is noticeable and essential to bring the cost (training and memory cost), the training image numbers comparisons, and the training time cost for the model.\u201d\n\nThank you for this comment, we fully agree that it is important to report such statistics.\nWe present and discuss i) the model training and memory usage, and ii) the generation part separately, as, in practice, we ran synthetic image generation _as an offline process_ once and saved all 11 variants for each training image. \n\nThe first table below presents timings for model training and memory usage, together with some basic quantitative results for the retrieval performance on Robotcar. Training times in this table  _do not include the part of the image generation itself_ and were obtained using a single A100 GPU.  \n\n| Model                | Number of variants K used in Eq. (2) | Total number of available training images |  Training time | Maximum GPU memory usage | RobotCar Night Recall@1 | RobotCar Night Recall@10 |\n| ---------------------------------- | --------------------------------- | ----------------------------------------- |  ------------- | ------------------------ | ----------------------- | ------------------------ |\n| Ret4Loc-HOW         | 1 (no synthetic)                     | 91K (real)                                       | ~4 hours      | 21.8 GB                  | 24.1                    | 38.1                     |\n| Ret4Loc-HOW-Synth++ | 3                                    | 91K (real) + 1M (synthetic)                                      | ~8 hours      | 65.4 GB                  | __33.3__ (+9.2%)            | __45.3__ (+7.2%)             |\n\nThe second table below presents the synthetic image generation time. It is affected by two parameters: the generated image resolution (Resolution) and the number of diffusion steps (Steps). Below we show the generation time per image in seconds (Time), for different resolutions and number of steps. \n\n| Resolution | Steps | Time (sec) |\n| ---------- | ------------------- | ----------------------------- |\n| 512        | 10                  | 0.30                          |\n| 512        | 20                  | 0.44                          |\n| 512        | 30                  | 0.64                          |\n| 768        | 10                  | 0.62                          |\n| _768_        | _20_                  | _0.98_                          |\n| 768        | 30                  | 1.39                          |\n| 1024       | 10                  | 1.16                          |\n| 1024       | 20                  | 1.99                          |\n| 1024       | 30                  | 2.78                          |\n\nWe chose to use a resolution of 768 pixels and 20 steps for all results in the paper. For these parameters, the time needed for generating all synthetic images for a single prompt was approximately 25 hours for the complete SfM dataset. Given that the process is independent per prompt, we ran synthetic data extraction in parallel for all prompts and generated images for all variants _in about a day_.  With model training taking approximately 8 hours, we see that data generation time is at least 3 times higher than the actual model training. However, we do not believe this is an issue in practical applications for mainly three reasons:\n\na) As a pre-processing step, data generation needs to run only once. This is unlike model training, a process that one usually needs to run multiple times, e.g. to perform hyperparameter validation. \n\nb) the overall training time for our model (data generation + model training) is approximately 32 hours. This means that learning state-of-the-art retrieval models for visual localization using our method is manageable in reasonable time, even with modest resources. \n\nc) We believe that over time the data synthesis overhead will eventually be even less of an issue: generative AI models will inevitably become more efficient and we envision in the near future such generation to happen on-the-fly, during batch construction."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700231490178,
                "cdate": 1700231490178,
                "tmdate": 1700231490178,
                "mdate": 1700231490178,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "dgx5SBajbs",
                "forum": "5EniAcsO7f",
                "replyto": "huIWp0aLXw",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_oYk5"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission332/Reviewer_oYk5"
                ],
                "content": {
                    "title": {
                        "value": "Reply to authors"
                    },
                    "comment": {
                        "value": "I think the response has adequately addressed my concerns in the review. Thanks the author for providing detailed experiments and explanations."
                    }
                },
                "number": 12,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission332/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700615082714,
                "cdate": 1700615082714,
                "tmdate": 1700615082714,
                "mdate": 1700615082714,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]