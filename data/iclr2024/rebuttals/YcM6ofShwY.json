[
    {
        "title": "BayesDiff: Estimating Pixel-wise Uncertainty in Diffusion via Bayesian Inference"
    },
    {
        "review": {
            "id": "n4jKHwAhVr",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_AU5E"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_AU5E"
            ],
            "forum": "YcM6ofShwY",
            "replyto": "YcM6ofShwY",
            "content": {
                "summary": {
                    "value": "This paper proposes to leverage epistemic uncertainty in the (reverse) sampling process of diffusion models. This is done by applying the last-layer Laplace approximation to the image-to-image neural network that approximates the score function. Using some approximations, this uncertainty gives rise to uncertainty in the image sample at each time step of the backward diffusion process. Applications like filtering low-quality samples and sample diversity enhancement are discussed."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "I find the paper is well-written and easy to follow even for me, who is not very familiar with diffusion models. In any case, the proposed method is sound and most importantly, very practical---the authors noted that the overhead of their method is no more than 1x of the standard diffusion sampling. \n\nI especially find the applications presented to be very interesting, illuminating, and again: practical. I emphasize the practicality of this paper since Bayesian neural networks are often quite impractical for large-scale problems like diffusion models."
                },
                "weaknesses": {
                    "value": "1. Some details that might be useful for potential readers are glossed over. E.g. how is $\\mathrm{diag}(\\gamma_\\theta^2(x_t, t))$ computed? What approximation of the Hessian is used? etc.\n2. Sec. 4.2 and 4.3 are a bit handwavy---it would be much better if the authors could make them more quantitative, like Sec. 4.1. Handpicked examples are not useful to instill confidence about the benefits of BayesDiff.\n3. Some figures are quite hard to follow:\n    1. Fig. 2 is quite hard to understand. The caption is not descriptive at all and the colors are hard to see in print.\n    2. Fig. 3 & 4: need more spacing between \"left\" and \"right\" groups. I was really confused at first trying to parse what is \"left\" and what is \"right\".\n    3. Fig. 5: The colors are horrible (esp. in print), they're indistinguishable. It's better to use different markers or different linestyle instead."
                },
                "questions": {
                    "value": "The last-layer Laplace approximation can still be very expensive for networks with high output dimensionality, e.g. in text or image generation. For example, if the image is $d \\times d$, then the network has an output dim of $d^2$. Assuming the last-layer feature dim of $h$, this means the last-layer weight matrix is $d^2 \\times h$ and so the Hessian is $hd^2 \\times hd^2$. Then, to get the variance over outputs $\\gamma^2(x, t)$, you need to multiply the Hessian with the last-layer Jacobian, which itself is large---$d^2 \\times hd^2$. Can the authors elaborate on how BayesDiff overcomes this issue in practice?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "8: accept, good paper"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Reviewer_AU5E"
                    ]
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6736/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1697385417371,
            "cdate": 1697385417371,
            "tmdate": 1700509809021,
            "mdate": 1700509809021,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "Yl4MLhwZFp",
                "forum": "YcM6ofShwY",
                "replyto": "n4jKHwAhVr",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer AU5E"
                    },
                    "comment": {
                        "value": "Thank you for the positive feedback and useful suggestions! We are glad you noted the practical benefits. We address your concerns point by point below.\n\nW1 & Q: Implementation details of the Laplace approximation.\n\nThank you for pointing out that we lack implementation details regarding the Laplace approximation, we have added this to our paper. \n\nWe adopt the most lightweight diagonal factorization and ignore off-diagonal elements for Hessian approximation [1]. Regarding the covariance $\\gamma_\\theta^2(x,\u00a0t)\u00a0\\in\u00a0R^{h d^2 * h d^2}$ of the posterior predictive distribution, as you point out, to get the accurate covariance of outputs is indeed time-consuming (17s when the image size is 64*64). Luckily, in our settings, we do not need to estimate the entire covariance matrix; we only need to estimate the diagonal. So we adopt the Monte Carlo method to approximate the accurate variance of outputs $diag(\\gamma_\\theta^2(x,\u00a0t))$ directly by the variance of samples { $ f_{\\theta_i}(x,t) $ }, $\\theta_i \u00a0\\sim p(\\theta|\\mathcal{D})\u00a0=\\mathcal{N}(\\theta ; \\theta_{\\text{MAP}}$, $\\boldsymbol{\\Sigma})$. This avoids storing large Jacobian matrix, resulting in faster computation speed, while still maintaining a reasonable level of accuracy. \n\nThe number of samples is chosen as 100 in practice. That is, by performing 99 additional inferences of the last layer, we can accurately estimate the posterior distribution without significant computational or time constraints (the computational time decreases from 17s to 0.1s). Furthermore, when comparing the results obtained from the accurate variance and the approximated variance, the average approximation error per pixel is 10%. It is minor and can be negligible because the magnitude of the variance relative to the mean is significantly small.\n\nW2: Qualitative nature of the results presented in Section 4.2.\n\nFor flawed samples exhibiting artifacts and misalignments selected by humans, we can provide possibilities for generating potential refined samples with BayesDiff. However, it is important to note that quantitatively measuring such value on a large scale poses challenges as there are no benchmarks or quantitative metrics to assess the presence of high-granularity artifacts. Therefore, the effectiveness of our method can only be demonstrated through the case study based on human evaluations. To provide a more intuitive demonstration of the significance of our resampling method, we have included additional prompts and corresponding images containing artifacts annotated by humans in Appendix A.7. By observing the resampling results, we find that the success rate of resampling flawed samples into desirable samples is approximately at least 60%. We will involve more human experts in the evaluation process in the final version.\n\nW3: Suggestions on figures in the paper.\n\nThanks for your useful suggestions! We have made the modifications to the figures based on your suggestions. If you have any further advice, please feel free to provide them.\n\nGiven these improvements and changes to your initial concerns, we hope for your reconsideration in raising your score.\n\n[1] Daxberger E, Kristiadi A, Immer A, et al. Laplace redux-effortless bayesian deep learning. Advances in Neural Information Processing Systems 2021."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700169701792,
                "cdate": 1700169701792,
                "tmdate": 1700384138202,
                "mdate": 1700384138202,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "QfpMBMoOaz",
                "forum": "YcM6ofShwY",
                "replyto": "Yl4MLhwZFp",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Reviewer_AU5E"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Reviewer_AU5E"
                ],
                "content": {
                    "title": {
                        "value": "Reply"
                    },
                    "comment": {
                        "value": "Thanks for your clarification! I don't have further questions. I updated my score accordingly."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700509791371,
                "cdate": 1700509791371,
                "tmdate": 1700509791371,
                "mdate": 1700509791371,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "XFvr0Zm7rb",
                "forum": "YcM6ofShwY",
                "replyto": "n4jKHwAhVr",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Acknowledgement"
                    },
                    "comment": {
                        "value": "Thank you again for your valuable feedback on our submission."
                    }
                },
                "number": 10,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700536707938,
                "cdate": 1700536707938,
                "tmdate": 1700539011204,
                "mdate": 1700539011204,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "XwOiSxMHmQ",
            "forum": "YcM6ofShwY",
            "replyto": "YcM6ofShwY",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_CcvE"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_CcvE"
            ],
            "content": {
                "summary": {
                    "value": "This paper proposes to use a last-layer Laplace approximation in diffusion models and derives how to propagate variance iteratively through the diffusion dynamics to obtain per-pixel uncertainty estimates. The experiments leverage these for filtering out low-fidelity samples, rectifying visual artifacts and visualization.\n\nOverall the method seems sensible, although I am unfortunately not too familiar with diffusion models, so may not be the best person to judge this. The evaluation seems to largely rely on subjective, qualitative analysis, and where it is quantitative the differences are mostly small and error bars missing. So all in all I would slightly lean towards rejection, but I am not strongly opinionated either way due to a lack of confidence.\n\nEDIT: In light of the rebuttal, I now lean towards acceptance."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "* Overall the methodology seems sensible, utilizing the fact that diffusion models are probabilisitic to perform inference is quite a natural approach.\n* The paper is well structured and clear on what prior work it builds on."
                },
                "weaknesses": {
                    "value": "* I find it hard to tell whether the proposed method does anything meaningful. Most of the comparisons are rather qualitative, and where they are quantitative they are hard to interpret, e.g. it is quite difficult to decide what to make of Table 1. Many of the differences are quite small and without error bars it seems impossible to know whether those correspond to meaningful performance gains.\n* There are no baselines. I appreciate that there may not have been any prior work in this direction (although I would imagine that there would be some non-probabilistic filtering techniques. Perhaps from the literature on GANs?), however given that the iterative sampling process involves a Gaussian at every step, if I am understanding things correctly I would think that a deterministic diffusion model would also give us pixelwise variances that could be used as a baseline.\n* Alternatively, it might have been interesting to experiment with different covariance structures for the Laplace approximation to see if those make a difference.\n* I did not find the background section on diffusion models (2.1) particularly helpful as it relies on a lot of terminology on SDEs. The opening paragraph is good, perhaps something similar that briefly summarizes things from an algorithmic perspective (what kind of network are we typically training to predict what and w.r.t. what objective, what is being sampled, ...)."
                },
                "questions": {
                    "value": "* I would like to see error bars for (some of) the quantitative results.\n* Is there a strict need to use a Laplace approximation for inference? The likelihood is a Gaussian, so if you are only estimating uncertainty over the final layer weights, shouldn't the posterior be Gaussian as well? Or is this not the case due to the iterative sampling process?\n* Could the sampling variances be used to create a baseline with a deterministic diffusion model?\n\nMinor:\n* I think it would be helpful to complement Figure 2 with a plot of skipping intervals vs Spearman correlation with the no-skipping ranking.\n* For Figure 5, I would suggest using a different color palette (with different colors rather than differing shades) and distinct markers. It is unnecessarily difficult to match the lines and legends as is."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "2: You are willing to defend your assessment, but it is quite likely that you did not understand the central parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Reviewer_CcvE"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6736/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698253084785,
            "cdate": 1698253084785,
            "tmdate": 1700585575936,
            "mdate": 1700585575936,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "3pRX8Y37IO",
                "forum": "YcM6ofShwY",
                "replyto": "XwOiSxMHmQ",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer CcvE"
                    },
                    "comment": {
                        "value": "Thank you for your attentive comments and useful suggestions! We are glad you thought our method was sensible. We address your feedback point by point below.\n\nW1 & Q1: Error bar of results in Table 1.\n\nTable 1 showcases a comparison of metrics between randomly selected 50,000 images and the remaining 50,000 images after filtering out those with the highest uncertainty from 60,000 generated images. In response to your feedback, we conducted multiple random selections (10 different random seeds) of 50,000 images and provided error bars for the FID metric of the randomly selected images. **Results added in Table 1 show that the improvement in the overall distribution metrics by filtering out low-quality images based on the sample-wise uncertainty metric is significant compared to the variance of the measurement.**\n\nMoreover,  we would like to reiterate the significance of our method. There are still low-quality generations in large-scale models currently, and it is challenging to identify such individual images using traditional metrics (FID, IS, LIPSIS) that measure the quality of a large set of images distribution-wisely. The core value of our approach lies in introducing a sample-wise metric based on pixel-wise uncertainty. This sample-wise metric enables us to effectively filter out cluttered low-quality images.\n\nQ2\uff1aIs there a strict need to use a Laplace approximation for inference?\n\nSorry that we did not explain this perfectly. You are correct that the posterior distribution of the parameters is indeed a Gaussian distribution in our settings. However, conventional methods require a significant amount of data to fit the Gaussian posterior distribution, which can be computationally expensive. **The reason we opt for the Laplace approximation is to directly leverage the parameters of the pre-trained model.** Under this approximation, the parameters of the pre-trained model can serve as the Maximum A-Posteriori (MAP) estimate of the Gaussian posterior distribution, i.e. the mean of the Gaussian distribution is approximated by the pre-trained weights. It is training-free and facilitates practical applications.\n\nW2 & Q3: Could the sampling variances be used to create a baseline with a deterministic diffusion model?\n\nThank you for your appreciation of our work as the first one in this direction. Regarding the baseline, as far as I know, most filtering techniques do not apply to our task because they focus on detecting deepfake images or filtering out low-quality images from training datasets. [1, 2] There is currently no widely accepted sample-wise metric that can be used to detect low-quality images generated by large-scale generative models, so we adopt the randomly filtered data as a comparison in our quantitative result. On the other hand, **the sampling variances with a deterministic diffusion model cannot be used to create a baseline.** This is because, for an ODE solver-based reverse generative process, the sampling process does not follow a Gaussian distribution but is deterministic, lacking sample variance. As for an SDE solver-based reverse generative process, all samples' sampling variances are equal, making it unable to distinguish between samples.\n\nW3: Other approximation methods for Hessian.\nIndeed, our method supports the use of other approximation methods for Hessian, although that is not the primary focus of our contribution. The experimental section primarily emphasizes the understanding and utilization of pixel-wise variance. However, your point about exploring alternative approximation methods is intriguing, and we will explore it as part of our future work.\n\nW4: Suggestions on Section 2.1.\n\nWe have incorporated the common architectural selection of the neural network and specific sampling methods in Section 2.1 based on your suggestions. If you have any further advice, please feel free to share.\n\nGiven these improvements and changes to your initial concerns, we hope you would like to raise your score.\n\n[1] Le B M, Woo S S. Add: Frequency attention and multi-view based knowledge distillation to detect low-quality compressed deepfake images. AAAI 2022.\n\n[2] Wong Y, Chen S, Mau S, et al. Patch-based probabilistic image quality assessment for face selection and improved video-based face recognition. CVPR 2011 WORKSHOPS."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700169684339,
                "cdate": 1700169684339,
                "tmdate": 1700169684339,
                "mdate": 1700169684339,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "BtwpLqeDaX",
                "forum": "YcM6ofShwY",
                "replyto": "1zfrH9ha0N",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Reviewer_CcvE"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Reviewer_CcvE"
                ],
                "content": {
                    "comment": {
                        "value": "Thank you for the clarifications and updates, I will increase my score."
                    }
                },
                "number": 11,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700585531094,
                "cdate": 1700585531094,
                "tmdate": 1700585531094,
                "mdate": 1700585531094,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "qzWQLlF0I8",
                "forum": "YcM6ofShwY",
                "replyto": "XwOiSxMHmQ",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Acknowledgement"
                    },
                    "comment": {
                        "value": "Thank you for your feedback\uff01"
                    }
                },
                "number": 13,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700627870299,
                "cdate": 1700627870299,
                "tmdate": 1700628031088,
                "mdate": 1700628031088,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "wegjXrexYR",
            "forum": "YcM6ofShwY",
            "replyto": "YcM6ofShwY",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_NYDr"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_NYDr"
            ],
            "content": {
                "summary": {
                    "value": "Diffusion models are powerful generative models but it is not easy to output standard bayesian uncertainty statistics from them such as posterior predictive probability, or pixel-wise uncertainty etc. Knowing if there are some pixels in an image, or an entire image, can be very helpful in ensuring high quality in downstream tasks.\n\nThis work uses the well known method of Laplacian approximation to estimate parameter uncertainty in the score network of an image diffusion model. For computational efficiency, and tractability in converting parameter uncertainty into sample uncertainty the authors use the well known approximation to only estimate the variance in the last linear layer of the neural network. Once the uncertainty update from a single application of the score network can be computed then the final uncertainty can be easily computed by deriving the update equation for different first-order and second order discrete time samplers.\n\n==== After rebuttal ======\nThanks for the updates. No changes to rating. Best wishes."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "The paper is reasonably novel and presents a methodology that practitioners may find useful. Specially the use of pixel-uncertainty in fixing the sample may be useful."
                },
                "weaknesses": {
                    "value": "While the overall method is quite simple and the experiments show some potential for the method but the actual experiments are not clear/substantive enough. See questions section for more details."
                },
                "questions": {
                    "value": "1. Section 4.2 shows that pixel wise uncertainty can be used to correct bad portions / artefacts in the original images. Many questions come to mind about this experiment. Were the bounding boxes for the artefacts determined automatically based on pixel uncertainty ? Even if they were identified manually ? How  often are the refined samples sampled using rejection sampling on pixel uncertainty score better than the original ? In other words are the examples in figure 8 cherry picked or representative of the pixel-wise uncertainty rejection sampling method ? \n\n2. Figure 2 tries to demonstrate that despite skipping the \"pixel-variance sum\" statistic is able to separate out high uncertainty images from low uncertainty images. However at skipping=3 and skipping=4 the two clusters seem to be mixed quite a lot. Also it's not clear why the mean of the scores decreases for skipping=5 and skipping=6 when it was increasing monotonically from skipping=1 to 4."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Reviewer_NYDr"
                    ]
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6736/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698639968967,
            "cdate": 1698639968967,
            "tmdate": 1700629677618,
            "mdate": 1700629677618,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "dNBlXIEIpJ",
                "forum": "YcM6ofShwY",
                "replyto": "wegjXrexYR",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer NYDr"
                    },
                    "comment": {
                        "value": "Thank you for the positive feedback and useful suggestions! We are glad you thought \"this paper is reasonably novel and presents a methodology that practitioners may find useful\". We address your concerns point by point below.\n\nQ1:  Questions about qualitative results for Section 4.2.\n\nThe flawed samples are identified by humans and the bounding boxes are manually annotated. This is reasonable and feasible due to a typical pattern of chat logs in the Discord server of Stable Diffusion: users provide a prompt, and the channel bot generates multiple images based on the prompt. Subsequently, individuals manually select one image for further processing [1]. We have included additional prompts and corresponding images containing artifacts annotated by humans in Appendix A.7. By observing the resampling results, we find that the success rate of resampling flawed samples into desirable samples is approximately at least 60%. We will involve more human experts in the evaluation process in the final version.\n\nQ2:  Consistency between BayesDiff and BayesDiff-Skip.\n\nFor samples with uncertainty around the mean, it is indeed challenging to differentiate them steadily. However, as mentioned in the article, the top and bottom 10% of samples based on uncertainty can be correctly classified. We compare the top and bottom 10% images based on the highest and lowest uncertainty in the new version of Figure 2, which fulfills the requirement of accurately excluding samples with the highest uncertainty in practical applications. Furthermore, we have directly visualized the sorting of samples with different skipping sizes in Appendix A.6. These visualizations demonstrate that regardless of the skipping size, there is a consistent trend from cluttered to clean images. This finding confirms that skip algorithms can be employed in practical applications.\n\nThe uncertainty dynamics in diffusion models are complex, as the relationship between Cov$(x_t, \\epsilon_t)$ and Var$(\\epsilon_t)$ with respect to $t$ is not necessarily a simple monotonic relationship. Therefore, we cannot consider the length of the skipping interval as a simple monotonic relationship with the sum of pixel-wise variance. The exact relationship between them is not easily determined through theoretical analysis. However, this does not hinder our application of skipping algorithms. \n\nGiven these improvements and changes to your initial concerns, we hope for your reconsideration in raising your score.\n\n[1] Wu X, Sun K, Zhu F, et al. Better aligning text-to-image models with human preference. ICCV 2023."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700169631283,
                "cdate": 1700169631283,
                "tmdate": 1700215667025,
                "mdate": 1700215667025,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "cJkqOqH5pf",
            "forum": "YcM6ofShwY",
            "replyto": "YcM6ofShwY",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_B5Gy"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission6736/Reviewer_B5Gy"
            ],
            "content": {
                "summary": {
                    "value": "Authors propose to obtain a Laplace approximation to the last layer of a diffusion model to filter out low-fidelity images."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "**Originality.** The idea of obtaining Laplace approximations to the weights of neural networks is not new, neither is the idea of filtering out low-fidelity images.\n\n**Quality and clarity.** The paper is easy to follow.\n\n**Significance.** I do not find the proposed approach a theoretically sound approach, hence not significant."
                },
                "weaknesses": {
                    "value": "* Why not use the model likelihood to rule out low-fidelity images? The likelihood of diffusion models is tractable as done in [Song et al.](https://openreview.net/pdf/ef0eadbe07115b0853e964f17aa09d811cd490f1.pdf)\n\n* Despite authors' justification, I am not convinced that the posterior distribution over the weights of the last layer can be accurately approximated with a Gaussian distribution. This statement is as accurate as the statement that a Gaussian prior is a good prior for the weights of a neural network. Is that true? I suggest plotting per-weight histograms of the last layer of a trained diffusion model to see if they are Gaussian.\n\n* The whole notion of removing low-fidelity images and promoting generative models to create \"good looking\" images has been recently highly criticized due to this process biasing generative models. See [this paper](https://arxiv.org/pdf/2106.10270.pdf) and [this paper](https://arxiv.org/abs/2306.06130) and similar papers (in reference and citations)."
                },
                "questions": {
                    "value": "See weaknesses."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission6736/Reviewer_B5Gy",
                        "ICLR.cc/2024/Conference/Submission6736/Senior_Area_Chairs"
                    ]
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission6736/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698789450115,
            "cdate": 1698789450115,
            "tmdate": 1700585790565,
            "mdate": 1700585790565,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "HGnSr5xDO5",
                "forum": "YcM6ofShwY",
                "replyto": "cJkqOqH5pf",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer B5Gy (Part 1/2)"
                    },
                    "comment": {
                        "value": "We sincerely thank the reviewer for the time to read our paper. We are glad you thought our paper was easy to follow.\n\nTo address your concerns, we would like to clarify our contributions first. Obtaining Bayesian uncertainty through Laplace approximation is not the goal of this work. Instead, we target estimating the generations' uncertainty arising from Bayesian model uncertainty, which has not been investigated before. We overcome the challenges caused by the complexity of the iterative sampling process and the gap between the uncertainty of model output (estimated score function) and the uncertainty of sample $x_0$ in the diffusion models. Our empirical achievements involve not only the filtering of low-fidelity generation but also the data augmentation and error rectification ability in text-to-image tasks. Next, we address your feedback point by point below.\n\nW1\uff1aWhy not use the model likelihood to rule out low-fidelity images?\n\nThank you for providing this insight, but as far as we know, a model can have poor log-likelihood and produce great samples, or have great log-likelihood and produce poor samples. **Log-likelihood and visual appearance of samples are therefore largely independent.** You can refer to this article [[1](https://arxiv.org/abs/1511.01844)] for details.\n\nBased on [the official code of the paper you provided](https://github.com/yang-song/score_sde_pytorch), we computed the per-sample negative log-likelihood (NLL) w.r.t the ODE reverse process, i.e., $- log (p_\\theta^{ODE}(x_0))$ for two datasets. Detailed experimental results can be found in Appendix A.5. **Experimental results demonstrate that model likelihood is indeed unsuitable for filtering out low-quality images. In comparison, the sample-wise metric based on uncertainty enables us to effectively eliminate low-quality images with cluttered backgrounds.** Due to time constraints, we are currently in the process of measuring the quantitative metric for comparison, which will be added to the article as soon as we complete it. \n\nW2\uff1aThe confusion about the posterior distribution of the parameters.\n\nIf we understand correctly, when you mention \"per-weight histograms of the last layer of a trained diffusion model\", you are referring to plotting the posterior distribution of the parameters of the last layer of the pre-trained model after introducing Bayesian priors to these parameters. \n\nTo address this concern, we would like to clarify that in our setting, where we introduce Gaussian prior to the NN parameters, **the posterior distribution of the last-layer parameters is exactly a Gaussian distribution rather than being approximated as one.** Note that:\n\n- The Gaussian prior is common in practice. E.g., the widely used weight decay regularization in optimization just corresponds to the MAP estimation under a centered Gaussian prior.\n- The training objective, in the form of the L2 norm, actually corresponds to modeling the likelihood probability $p(y|f_\\theta(x))$ as a Gaussian distribution. \n- For the parameters of the last layer (denoted as $\\theta_L$) of the network, $p(\\mathcal{D}|\\theta_L)=\u00a0p(y|f_{\\theta_L}(x))$ is still Gaussian distribution regarding $\\theta_L$.\n\nTherefore, $p(\\theta_L| \\mathcal{D})\\propto p(\\theta_L)p(\\mathcal{D}|\\theta_L)$ is exactly a Gaussian distribution. \n\nAdditionally,  to address your concerns, we plot posterior distributions of the first four parameters of the last linear layer of U-ViT, which contains 18864 parameters in total, in Figure 11 of Appendix A.4.\n\n[1] Theis, L., A. van den Oord, and M. Bethge. A note on the evaluation of generative models. International Conference on Learning Representations 2016.\n\n[2] Song Y, Durkan C, Murray I, et al. Maximum Likelihood Training of Score-Based Diffusion Models. Advances in Neural Information Processing Systems 2021."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700169569813,
                "cdate": 1700169569813,
                "tmdate": 1700535603506,
                "mdate": 1700535603506,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "hz30YVNCEq",
                "forum": "YcM6ofShwY",
                "replyto": "cJkqOqH5pf",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "comment": {
                        "value": "W3\uff1aThe whole notion of removing low-fidelity images and promoting generative models to create \"good looking\" images has been recently highly criticized due to this process of biasing generative models.\n\nFirstly, thank you for providing the paper for discussion, which highlights the potential undesired effects of incorporating AI-created data into the training dataset of real data, such as inducing bias in future versions of generative models. It has inspired insights into the future development of generative models. However, **it is important to clarify that our paper does not aim to promote filtered data as new valuable data for training or finetuning generative models, thus we will not induce bias into generative models.**\n\nInstead, our objective is to derive a sample-wise metric based on uncertainty which can be utilized to detect low-fidelity data generated by a pre-trained model. This is important and meaningful for the application of large-scale generative models, which often suffer from low-quality generations [3, 4]. By doing so, we can enhance the quality of feedback provided to users, thereby demonstrating practical significance. We hope that this restatement of our motivation addresses your concerns.\n\nWe hope these reclarifications and explanations of our method in response to your initial concerns can convince you to increase your score.\n\n[3] Ma Y, Yang H, Wang W, et al. Unified multi-modal latent diffusion for joint subject and text conditional image generation. arXiv:2303.09319, 2023.\n\n[4] Tang Z, Gu S, Bao J, et al. Improved vector quantized diffusion models. CVPR 2022."
                    },
                    "title": {
                        "value": "Response to Reviewer B5Gy (Part 2/2)"
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700169601050,
                "cdate": 1700169601050,
                "tmdate": 1700535626282,
                "mdate": 1700535626282,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "2gQj7Ntq8O",
                "forum": "YcM6ofShwY",
                "replyto": "21dA8zjrff",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Reviewer_B5Gy"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Reviewer_B5Gy"
                ],
                "content": {
                    "comment": {
                        "value": "Thank you for your thorough responses. My concerns are mostly addressed. I will consider raising my score."
                    }
                },
                "number": 12,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700585770464,
                "cdate": 1700585770464,
                "tmdate": 1700585770464,
                "mdate": 1700585770464,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "8H0zm2WyoO",
                "forum": "YcM6ofShwY",
                "replyto": "cJkqOqH5pf",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission6736/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Acknowledgement"
                    },
                    "comment": {
                        "value": "Thank you for your feedback\uff01"
                    }
                },
                "number": 14,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission6736/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700627924437,
                "cdate": 1700627924437,
                "tmdate": 1700628015677,
                "mdate": 1700628015677,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]