[
    {
        "title": "Certifiably Byzantine-Robust Federated Conformal Prediction"
    },
    {
        "review": {
            "id": "e9lD8rrB9N",
            "forum": "rFZtyj5kBz",
            "replyto": "rFZtyj5kBz",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_LS6w"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_LS6w"
            ],
            "content": {
                "summary": {
                    "value": "The authors study a robust conformal prediction problem in a federated learning setting. Since local datasets share some privacy properties, some agents may not truthfully report their non-conformity score.  In this scenario, making a prediction interval based on this contaminated data would be harmful and lack the correct coverage probability. To solve such an issue, the authors propose a novel algorithm and obtain a coverage bound close to the desired level under both iid and non-iid settings."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "1. The authors study a realistic setting where the agents may not be truthful in reporting their non-conformity score, and they developed an ``outlier detection\" algorithm to ensure the prediction sets are made based on truthful agents.\n\n2. Rigorous theoretical guarantees are provided on the coverage probability lower and upper bounds.\n\n3. The methodology is applied to various types of datasets to measure its performance, which is great."
                },
                "weaknesses": {
                    "value": "1. It seems the results are derived based on either knowing the number of truthful agents or being able to consistently estimate this quantity.  This could be a relatively strong assumption in reality.\n\n2. The assumption on bounded distribution disparity could be relatively strong. There would be the cases where the underlying distributions of different group of agents are not the same. In that case, this assumption can be easily violated."
                },
                "questions": {
                    "value": "1. Could the authors establish some theoretical guarantees where the number of truthful agents is not correctly estimated? What will happen if they are underestimated or overestimated? \n\n2. Could the authors also provide some numerical results to illustrate the sensitivity if the number of truthful agents is not correctly identified?\n\n3. Again, as I mentioned in the weakness part, if the distributions of underlying agents are no-i.i.d., it is very likely that assumption 3.1 will be violated, even if the agents report the true non-conformity score. It seems the current algorithm may not handle this point very well."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission8184/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission8184/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission8184/Reviewer_LS6w"
                    ]
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission8184/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698606984710,
            "cdate": 1698606984710,
            "tmdate": 1699637014842,
            "mdate": 1699637014842,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "gEPMRweN8c",
                "forum": "rFZtyj5kBz",
                "replyto": "e9lD8rrB9N",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer LS6w [1/3]"
                    },
                    "comment": {
                        "value": "> Q1: It seems the results are derived based on either knowing the number of truthful agents or being able to consistently estimate this quantity. Could the authors establish some theoretical guarantees where the number of truthful agents is not correctly estimated? What will happen if they are underestimated or overestimated?\n\nWe thank you for the valuable comment. If the number of benign clients is overestimated, then there must be a portion of malicious clients in the output set of RobFCP $\\mathcal{B}$. Those malicious clients will participate in the conformal calibration and distort the computed quantile value. In Theorem 6 in Appendix F, we added the analysis of this scenario. The theoretical results show that (1) compared to the bound with the correct number $K\\_b$, the overestimate $K\u2019\\_b$ asymptotically looses the bound by a factor $1-K\\_b/K\u2019\\_b$, and (2) a larger overestimate $K\u2019\\_b$ leads to worse coverage guarantees. If the number of benign clients is underestimated, we can always find a benign client not in the set $\\mathcal{B}$, which makes the original proof smooth. Therefore, Theorem 1 and Corollary 1 still hold by plugging a smaller $K\u2019\\_b$ into the bound, but the coverage guarantee also becomes worse due the monotonicity regarding the number of benign clients $K\\_b$. \n\n> Q2: The assumption on bounded distribution disparity could be relatively strong. There would be cases where the underlying distributions of different group of agents are not the same. In that case, this assumption can be easily violated.\n\nWe thank you for your valuable comments and suggestions. We added clarifications and improvements of Rob-FCP for the non-IID setting from both the theoretical perspective and the evaluation perspective. \n\nFrom the perspective of theoretical analysis, we provide the coverage guarantees of Rob-FCP in the non-IID setting in Corollary 1 based on the assumption of bounded disparity among benign clients in Assumption 3.1. We added clarifications that the assumption is quite standard, typical, and not simplified across the literature of non-IID federated learning analysis [1] and Byzantine analysis [2,3]. Concretely, Li et al. [1] quantify the non-iid degree (i.e., disparity) of local loss of clients with $\\Gamma$ in Section 3.1 of [1] and accordingly provide the convergence guarantee of federated optimization in Theorem 1 of [1], which is a function of the disparity $\\Gamma$. Park et al. [2] assume a bounded difference $\\rho_1$ between the local loss of benign clients and global loss in Assumption 2 of [2] and provide the convergence analysis in federated Byzantine optimization in Theorem 1 of [2] as a function of $\\rho_1$. Data et al. [3] have an assumption of bounded gradient dissimilarity $\\kappa$ in Assumption 2 of [3] and prove a convergence guarantee in Theorem 1 of [3] regarding $\\kappa$. Similarly, in our paper, we assume a bounded disparity of score statistics quantified with $\\sigma$ in Assumption 3.1 and accordingly provide the coverage guarantees of Rob-FCP in the non-IID setting in Corollary 1 as a function of $\\sigma$. As we can see, the type of assumption is quite standard in the analysis setup of the line of non-IID analysis and Byzantine analysis. The assumption is also essential since without a quantity to restrict the disparity in local behavior, the local behavior can vary arbitrarily, and we can not control global performance quantitatively. From the results in Corollary 1, we can also see that as long as the disparity bound $\\sigma$ is finite, the coverage bound in the non-IID setting is asymptotically valid and tight with sufficiently large benign sample sizes $n_b$. We added these clarifications and details in Section 3.3 in the revised manuscript."
                    }
                },
                "number": 8,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606597623,
                "cdate": 1700606597623,
                "tmdate": 1700606720785,
                "mdate": 1700606720785,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "yGJbtUZEIl",
                "forum": "rFZtyj5kBz",
                "replyto": "e9lD8rrB9N",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer LS6w [2/3]"
                    },
                    "comment": {
                        "value": "> To continue the answer of Q1\n\nFrom the evaluation perspective, we added more clarifications and illustrations on how we construct non-IID data of different levels and also added more evaluations on various approaches to non-IID data construction. We first added clarifications that we followed the standard evaluation setup of non-IID federated learning by sampling different label ratios for different clients from the Dirichlet distribution as the literature [4,5,6,7]. Concretely, we sample $p_{c,j} \\sim \\text{Dir}(\\beta)$ and allocate a $p_{c,j}$ proportion of the instances with class $c$ to the client $j$. Here $\\text{Dir}(\u00b7)$ denotes the Dirichlet distribution and $\\beta$ is a concentration parameter ($\\beta$ > 0). Dirichlet distribution is commonly used as the prior distribution in Bayesian statistics and is an appropriate\nchoice to simulate real-world data distribution. An advantage of this approach is that we can flexibly change the imbalance level by varying the concentration parameter $\\beta$. If $\\beta$\nis set to a smaller value, then the partition is more unbalanced. We fixed the imbalance level $\\beta$ as $0.5$ in the evaluations before the rebuttal period. Following the suggestion, we added evaluations with different imbalance levels $\\beta$ to show the effectiveness of Rob-FCP under different non-IID settings. The results in the following Table 1 demonstrate that under multiple degrees of data imbalance in non-IID federated conformal prediction, Rob-FCP consistently outperforms FCP in achieving a nominal marginal coverage level in the existence of Byzantine clients. We also consider alternative approaches to construct non-IID data with demographic differences in federated learning. Concretely, we split the SHHS dataset by sorting five different attributes: wake time, N1, N2, N3, REM. For example, we first sort the instances according to the wake time of patients and then assign them to 100 clients in sequence. Therefore, some clients are assigned patients with an early wake time, and some are assigned instances with late wake time. The results in Table 2 show that in this type of non-IID partition, Rob-FCP still demonstrates robustness and effectiveness compared to FCP.\n\nTable 1. Marginal coverage / average set size with different non-IID imbalance level $\\beta$, the parameter of Dirichlet distribution where the label ratios of clients are sampled from. The evaluation is done under different Coverage attack with $40\\%~(K_m/K=40\\%)$ malicious clients. The desired marginal coverage is $0.9$.\u00a0\n\n| | $\\beta=0.1$ | $\\beta=0.3$ | $\\beta=0.5$ | $\\beta=0.7$ | $\\beta=0.9$ |\n| - | - | - | - | - | - |\n| FCP on MNIST | 0.780 / 1.173 |\u00a0 0.817 / 1.318 | 0.833 / 1.384 | 0.805 / 1.265 |\u00a0 0.828 / 1.363 |\n| Rob-FCP on MNIST | **0.899** / 1.806 | **0.905** / 1.809 | **0.903** / 1.827 |\u00a0 **0.898** / 1.781 | **0.893** / 1.768 |\n| FCP on CIFAR-10 | 0.806 / 1.641 | 0.821 / 1.717 | 0.836 / 1.791 | 0.823 / 1.744 | 0.824 / 1.723 |\n| Rob-FCP on CIFAR-10 | **0.899** / 2.260 |\u00a0 **0.907** / 2.405 | **0.892** / 2.243 | **0.904** / 2.396 | **0.910** / 2.416 |\n| FCP on Tiny-ImageNet | 0.840 / 28.625 | 0.830 / 28.192 |\u00a0 0.833 / 28.340 |\u00a0 0.821 / 27.140 | 0.8308 / 28.751 |\n| Rob-FCP on Tiny-ImageNet | **0.913** / 45.872 | **0.910** / 44.972 | **0.898** / 42.571 | **0.887** / 41.219 | **0.898** / 43.298 |\n| FCP on PathMNIST | 0.850 / 1.106 | 0.839 / 1.065 | 0.837 / 1.055 | 0.839 / 1.065\t | 0.832 / 1.043 |\n| Rob-FCP on PathMNIST | **0.895** / 1.311 | **0.900** / 1.355 | **0.900** / 1.355 | **0.899** / 1.354 | **0.901** / 1.363 |\n\n\nTable 2. Marginal coverage / average set size on SHHS with non-IID data partition based on different attributes: wake time, N1, N2, N3, REM. The evaluation is done under different Coverage attack with $40\\%~(K_m/K=40\\%)$ malicious clients. The desired marginal coverage is $0.9$.\u00a0\n\n| | wake time | N1 | N2 | N3 | REM |\n| - | - | - | - | - | - |\n| FCP on SHHS | 0.835 / 1.098 | 0.841 / 1.104 | 0.841 / 1.104 | 0.837 / 1.105 | 0.840 / 1.107 |\n| Rob-FCP on SHHS | *0.901* / 1.367 | *0.902* / 1.358 | *0.902* / 1.355 | *0.902* / 1.375 | *0.900* / 1.356 |\n\n*[1] Li, Xiang, et al. \"On the convergence of fedavg on non-iid data.\" ICLR 2020.*\n\n*[2] Park, Jungwuk, et al. \"Sageflow: Robust federated learning against both stragglers and adversaries.\" NeurIPS 2021.*\n\n*[3] Data, Deepesh, et al. \"Byzantine-resilient high-dimensional SGD with local iterations on heterogeneous data.\" ICML 2021.*\n\n*[4] Yurochkin, Mikhail, et al. \"Bayesian nonparametric federated learning of neural networks.\" International conference on machine learning. ICML 2019.*\n\n*[5] Lin, Tao, et al. \"Ensemble distillation for robust model fusion in federated learning.\" NeurIPS 2020.*\n\n*[6] Wang, Hongyi, et al. \"Federated learning with matched averaging.\" ICLR 2020.*\n\n*[7] Gao, Liang, et al. \"Feddc: Federated learning with non-iid data via local drift decoupling and correction.\" CVPR 2022.*"
                    }
                },
                "number": 9,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606704977,
                "cdate": 1700606704977,
                "tmdate": 1700606727700,
                "mdate": 1700606727700,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "MQWB0tqFDw",
                "forum": "rFZtyj5kBz",
                "replyto": "e9lD8rrB9N",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer LS6w [3/3]"
                    },
                    "comment": {
                        "value": "> Q3: Could the authors also provide some numerical results to illustrate the sensitivity if the number of truthful agents is not correctly identified?\n\nWe thank you for the valuable suggestion. In the following Table 3, we provided evaluations of Rob-FCP with incorrect numbers of malicious clients. The results show that either underestimated numbers or overestimated numbers would harm the performance to different extents. Specifically, an underestimate of the number of malicious clients will definitely lead to the inclusion of malicious clients in the identified set $\\mathcal{B}$ and downgrade the quality of conformal prediction. On the other hand, an overestimated number will lead to the exclusion of some benign clients. The neglect of non-conformity scores of those clients will lead to a distribution shift from the true data distribution in the calibration process, breaking the data exchangeability assumption of conformal prediction, and a downgraded performance. Therefore, correctly estimating the number of malicious clients is of significance, and this is why we propose the malicious client number estimator, which is sound both theoretically and empirically to achieve the goal.\n\nTable 3. Marginal coverage / average set size under different Coverage attack with underestimated and overestimated numbers of malicious clients on TinyImageNet. The true ratio of malicious clients is $40\\%~(K_m/K=25\\%)$, while we evaluate Rob-FCP with different ratios of malicious clients $K\u2019_m/K$ ranging from $5\\%$ to $45\\%$. The desired marginal coverage is $0.9$. \n\n| | $K\u2019_m/K=5\\\\%$ | $K\u2019_m/K=10\\\\%$ | $K\u2019_m/K=15\\\\%$ | $K\u2019_m/K=20\\\\%$ | $K\u2019_m/K=25\\\\%$ |  $K\u2019_m/K=30\\\\%$ | $K\u2019_m/K=35\\\\%$ | $K\u2019_m/K=40\\\\%$ | $K\u2019_m/K=45\\\\%$ |\n| - | - | - | - | - | - | - | - | - | - |\n| Marginal coverage / average set size | 0.8682 / 35.8754 | 0.8756 / 37.1307 | 0.8812 / 38.3729 | 0.8884 / 40.6433 | 0.9078 / 44.5781 | 0.8936 / 42.1735 | 0.8921 / 42.0232 | 0.8834 / 38.3463 | 0.8803 / 38.0232 |\n\n\n> Q4: If the distributions of underlying agents are no-i.i.d., it is very likely that assumption 3.1 will be violated, even if the agents report the true non-conformity score. It seems the current algorithm may not handle this point very well.\n\nWe thank you for the interesting question. We can actually think about the effectiveness of Rob-FCP in the non-IID setting from two perspectives. (1) If the malicious clients attempt to disturb the quantile value of conformity scores to a large extent, they need to report a score vector far away from the cluster of score vectors of benign clients. Although the benign score vectors have some heterogeneity, the malicious score vector in this case is still distinguishable in the vector space and effectively excluded during the calibration. (2) If the malicious clients report score vectors close to the cluster of benign score vectors, then even if the Rob-FCP algorithm does not identify malicious clients exactly, the malicious score vectors can also characterize the structure of the benign score cluster, and thus, the computed quantile value would not deviate much. The two situations are exactly the important intuitions in the proof of Theorem 1 and Corollary 1, which rigorously formulates the coverage guarantee of Rob-FCP as a function of the non-IID degree $\\sigma$."
                    }
                },
                "number": 10,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606769085,
                "cdate": 1700606769085,
                "tmdate": 1700606844275,
                "mdate": 1700606844275,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "mypUsHzc7z",
            "forum": "rFZtyj5kBz",
            "replyto": "rFZtyj5kBz",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_bwYM"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_bwYM"
            ],
            "content": {
                "summary": {
                    "value": "The paper studies federated conformal prediction (i.e. perform conformal prediction when the calibration dataset is distributed among multiple agents) where there may be Byzantine agents who may act maliciously. The paper shows how to detect such malicious behaviors by recording their deviation from the rest of the population; for each agent, they record the empirical histogram over H bins, calculate the average distance away from their closest neighbors where the distance is measured by the Lp distance between their H histogram bins, and mark agents with high distance away from their neighbors as malicious agents. \n\nThey show that under a few assumptions (iid or non-iid + some other assumptions), their algorithm can identify malicious agents and provide a target coverage guarantee (Theorem 1 and Corollary 1). In the case the number of malicious agents is not known, they show a way to estimate such number via some approximation (approximating the multinomial with multivariate normal). \n\nFinally, they evaluate their algorithm on a few different datasets (Section 5)."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "2 fair"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "-The idea to identify the malicious agents behavior via their deviation from the non-malicious agents in terms of the non-conformal score distribution seems novel.\n-Their algorithm seem to perform quite well in their experiments."
                },
                "weaknesses": {
                    "value": "-The main reason why the algorithm in the paper works seems to be due to the homogeneity of the non-malicious agents. Even in the experiments, the clients are partitioned randomly and hence their distributions will be pretty similar. However, as discussed even in the intro of the paper, there can be many settings where there is quite a bit of heterogeneity among the agents not due to their Byzantine and malicious behaviors but the underlying distributions are just inherently different. In fact, this heterogeneity seemed to me the motivation to studying this problem \u2014 i.e. the bolded sentences in the second paragraph of the intro. But the paper seems to study cases when there isn\u2019t much heterogeneity?"
                },
                "questions": {
                    "value": "-It\u2019s not clear to me what is exactly meant by the non-iid setting. Is it just that the agents\u2019s non-conformal scores don\u2019t come from the same distribution? However, the assumption that the v^(k) values (the histogram values) aren\u2019t too different across agents in the non-iid setting essentially gives you an iid setting, right? I\u2019m a little confused on the difference so it would be helpful to compare exactly the iid setting and the non-iid setting (along with other assumptions made for each setting) and how exactly they are really different.\n\n\n-In proving the main result (Theorem 1), the appearance of the inverse of the CDF of the standard normal distribution seems surprising as there was no normality assumption before; it would be good to cite a reference for what is referred to as \u201cthe binomial proportion confidence interval\u201d or eqn (13) in the proof of Theorem 1. Also, can\u2019t one just apply the DKW inequality (https://en.wikipedia.org/wiki/Dvoretzky%E2%80%93Kiefer%E2%80%93Wolfowitz_inequality) here? It should be sufficient to show concentration of the empirical CDF (which exactly characterizes the empirical histogram values v(k)_h) toward the true CDF (which also characterizes the true bar(v) values). This would avoid the need to union bound over H values too as DKW tells you that over all possible h values (i.e. hth cut point), the empirical and the true CDF value is close with high probability. \n\n\n -How\u2019s the final (1-alpha)-quantile being calculated after identifying the benign clients? Is it simply combining all the clients non-conformal scores altogether and then calculating the (1-alpha)-quantile? If that\u2019s the case, I\u2019m not understanding the federated nature of this problem except for the fact that some of the clients data are being ignored due to their apparent distributional difference to other clients?  How can one tell if this distributional difference of some clients is due to their malicious behavior or truly inherent distributional difference?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission8184/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission8184/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission8184/Reviewer_bwYM"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission8184/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698704722402,
            "cdate": 1698704722402,
            "tmdate": 1699637014727,
            "mdate": 1699637014727,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "BjyCmZdV8p",
                "forum": "rFZtyj5kBz",
                "replyto": "mypUsHzc7z",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer bwYM [1/3]"
                    },
                    "comment": {
                        "value": "> Q1: More clarification of the consideration of heterogeneity in analysis and evaluations.\n\nWe thank you for your valuable comments and suggestions. We added clarifications and improvements of Rob-FCP for the non-IID setting from both the theoretical perspective and the evaluation perspective. \n\nFrom the perspective of theoretical analysis, we provide the coverage guarantees of Rob-FCP in the non-IID setting in Corollary 1 based on the assumption of bounded disparity among benign clients in Assumption 3.1. We added clarifications that the assumption is quite standard, typical, and not simplified across the literature of non-IID federated learning analysis [1] and Byzantine analysis [2,3]. Concretely, Li et al. [1] quantify the non-iid degree (i.e., disparity) of local loss of clients with $\\Gamma$ in Section 3.1 of [1] and accordingly provide the convergence guarantee of federated optimization in Theorem 1 of [1], which is a function of the disparity $\\Gamma$. Park et al. [2] assume a bounded difference $\\rho_1$ between the local loss of benign clients and global loss in Assumption 2 of [2] and provide the convergence analysis in federated Byzantine optimization in Theorem 1 of [2] as a function of $\\rho_1$. Data et al. [3] have an assumption of bounded gradient dissimilarity $\\kappa$ in Assumption 2 of [3] and prove a convergence guarantee in Theorem 1 of [3] regarding $\\kappa$. Similarly, in our paper, we assume a bounded disparity of score statistics quantified with $\\sigma$ in Assumption 3.1 and accordingly provide the coverage guarantees of Rob-FCP in the non-IID setting in Corollary 1 as a function of $\\sigma$. As we can see, the type of assumption is quite standard in the analysis setup of the line of non-IID analysis and Byzantine analysis. The assumption is also essential since without a quantity to restrict the disparity in local behavior, the local behavior can vary arbitrarily, and we can not control global performance quantitatively. From the results in Corollary 1, we can also see that as long as the disparity bound $\\sigma$ is finite, the coverage bound in the non-IID setting is asymptotically valid and tight with sufficiently large benign sample sizes $n_b$. We added these clarifications and details in Section 3.3 in the revised manuscript.\n\nFrom the evaluation perspective, we added more clarifications and illustrations on how we construct non-IID data of different levels and also added more evaluations on various approaches to non-IID data construction. We first added clarifications that we followed the standard evaluation setup of non-IID federated learning by sampling different label ratios for different clients from the Dirichlet distribution as the literature [4,5,6,7]. Concretely, we sample $p_{c,j} \\sim \\text{Dir}(\\beta)$ and allocate a $p_{c,j}$ proportion of the instances with class $c$ to the client $j$. Here $\\text{Dir}(\u00b7)$ denotes the Dirichlet distribution and $\\beta$ is a concentration parameter ($\\beta$ > 0). Dirichlet distribution is commonly used as the prior distribution in Bayesian statistics and is an appropriate\nchoice to simulate real-world data distribution. An advantage of this approach is that we can flexibly change the imbalance level by varying the concentration parameter $\\beta$. If $\\beta$\nis set to a smaller value, then the partition is more unbalanced. We fixed the imbalance level $\\beta$ as $0.5$ in the evaluations before the rebuttal period. Following the suggestion, we added evaluations with different imbalance levels $\\beta$ to show the effectiveness of Rob-FCP under different non-IID settings. The results in the following Table 1 demonstrate that under multiple degrees of data imbalance in non-IID federated conformal prediction, Rob-FCP consistently outperforms FCP in achieving a nominal marginal coverage level in the existence of Byzantine clients. We also consider alternative approaches to construct non-IID data with demographic differences in federated learning. Concretely, we split the SHHS dataset by sorting five different attributes: wake time, N1, N2, N3, REM. For example, we first sort the instances according to the wake time of patients and then assign them to 100 clients in sequence. Therefore, some clients are assigned patients with an early wake time, and some are assigned instances with late wake time. The results in Table 2 show that in this type of non-IID partition, Rob-FCP still demonstrates robustness and effectiveness compared to FCP."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606325580,
                "cdate": 1700606325580,
                "tmdate": 1700606325580,
                "mdate": 1700606325580,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "GTJ0bdn8L6",
                "forum": "rFZtyj5kBz",
                "replyto": "mypUsHzc7z",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer bwYM [2/3]"
                    },
                    "comment": {
                        "value": "> Q1 (to continue): More clarification of the consideration of heterogeneity in analysis and evaluations.\n\nTable 1. Marginal coverage / average set size with different non-IID imbalance level $\\beta$, the parameter of Dirichlet distribution where the label ratios of clients are sampled from. The evaluation is done under different Coverage attack with $40\\%~(K_m/K=40\\%)$ malicious clients. The desired marginal coverage is $0.9$.\u00a0\n\n| | $\\beta=0.1$ | $\\beta=0.3$ | $\\beta=0.5$ | $\\beta=0.7$ | $\\beta=0.9$ |\n| - | - | - | - | - | - |\n| FCP on MNIST | 0.780 / 1.173 |\u00a0 0.817 / 1.318 | 0.833 / 1.384 | 0.805 / 1.265 |\u00a0 0.828 / 1.363 |\n| Rob-FCP on MNIST | **0.899** / 1.806 | **0.905** / 1.809 | **0.903** / 1.827 |\u00a0 **0.898** / 1.781 | **0.893** / 1.768 |\n| FCP on CIFAR-10 | 0.806 / 1.641 | 0.821 / 1.717 | 0.836 / 1.791 | 0.823 / 1.744 | 0.824 / 1.723 |\n| Rob-FCP on CIFAR-10 | **0.899** / 2.260 |\u00a0 **0.907** / 2.405 | **0.892** / 2.243 | **0.904** / 2.396 | **0.910** / 2.416 |\n| FCP on Tiny-ImageNet | 0.840 / 28.625 | 0.830 / 28.192 |\u00a0 0.833 / 28.340 |\u00a0 0.821 / 27.140 | 0.8308 / 28.751 |\n| Rob-FCP on Tiny-ImageNet | **0.913** / 45.872 | **0.910** / 44.972 | **0.898** / 42.571 | **0.887** / 41.219 | **0.898** / 43.298 |\n| FCP on PathMNIST | 0.850 / 1.106 | 0.839 / 1.065 | 0.837 / 1.055 | 0.839 / 1.065\t | 0.832 / 1.043 |\n| Rob-FCP on PathMNIST | **0.895** / 1.311 | **0.900** / 1.355 | **0.900** / 1.355 | **0.899** / 1.354 | **0.901** / 1.363 |\n\n\nTable 2. Marginal coverage / average set size on SHHS with non-IID data partition based on different attributes: wake time, N1, N2, N3, REM. The evaluation is done under different Coverage attack with $40\\%~(K_m/K=40\\%)$ malicious clients. The desired marginal coverage is $0.9$.\u00a0\n\n| | wake time | N1 | N2 | N3 | REM |\n| - | - | - | - | - | - |\n| FCP on SHHS | 0.835 / 1.098 | 0.841 / 1.104 | 0.841 / 1.104 | 0.837 / 1.105 | 0.840 / 1.107 |\n| Rob-FCP on SHHS | *0.901* / 1.367 | *0.902* / 1.358 | *0.902* / 1.355 | *0.902* / 1.375 | *0.900* / 1.356 |\n\n*[1] Li, Xiang, et al. \"On the convergence of fedavg on non-iid data.\" ICLR 2020.*\n\n*[2] Park, Jungwuk, et al. \"Sageflow: Robust federated learning against both stragglers and adversaries.\" NeurIPS 2021.*\n\n*[3] Data, Deepesh, et al. \"Byzantine-resilient high-dimensional SGD with local iterations on heterogeneous data.\" ICML 2021.*\n\n*[4] Yurochkin, Mikhail, et al. \"Bayesian nonparametric federated learning of neural networks.\" International conference on machine learning. ICML 2019.*\n\n*[5] Lin, Tao, et al. \"Ensemble distillation for robust model fusion in federated learning.\" NeurIPS 2020.*\n\n*[6] Wang, Hongyi, et al. \"Federated learning with matched averaging.\" ICLR 2020.*\n\n*[7] Gao, Liang, et al. \"Feddc: Federated learning with non-iid data via local drift decoupling and correction.\" CVPR 2022.*\n\n> Q2: More clarifications of the comparisons between IID setting and non-IID setting.\n\nWe consider the standard IID and non-IID settings in federated learning literature. Specifically, the data of local clients are sampled from the same data distribution in the IID setting, while the data of clients are sampled from different data distributions in the non-IID setting. In the context of federated conformal prediction, IID data samples among clients can imply the IID non-conformity scores of clients, which implies that the characterization vectors of scores are sampled from the same multinomial distribution. Similarly, non-IID data samples among clients can also imply the non-IID non-conformity scores of clients, which implies that the characterization vectors are sampled from different multinomial distributions. In Assumption 3.1, we quantify the maximum disparity of different multinomial distributions with $\\sigma>0$, and a larger $\\sigma$ can induce a larger non-IID degree. Note that $\\sigma=0$ is equivalent to the IID setting because $\\sigma=0$ implies that the parameters of multinomial distributions are the same: $\\overline{\\rm{v}}^{(k\\_1)} = \\overline{\\rm{v}}^{(k\\_2)}, \\forall k\\_1,k\\_2$. To conclude, $\\sigma=0$ in Assumption 3.1 formally defines the IID setting in the context of federated conformal prediction, while Assumption 3.1 with $\\sigma>0$ defines the non-IID setting with non-IID degree $\\sigma$."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606388882,
                "cdate": 1700606388882,
                "tmdate": 1700606388882,
                "mdate": 1700606388882,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "O1PUNpLOEW",
                "forum": "rFZtyj5kBz",
                "replyto": "mypUsHzc7z",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer bwYM [3/3]"
                    },
                    "comment": {
                        "value": "> Q3: Improvement of the concentration bound of the empirical CDF and true CDF.\n\nWe thank you for the valuable suggestion! We added the underlying assumption of the binomial proportion confidence interval [1] in Theorem 1 and the proof. We also leveraged the more advanced DKW inequality [2] to bound the error between the empirical CDF and population CDF, and provided the results in Theorem 5 and Corollary 3 in Appendix E. With the DKW inequality, we can basically improve the concentration factor from $\\dfrac{H\\Phi^{-1}({1-\\beta/2HK\\_b})}{2 \\sqrt{n\\_b}}$ to $H\\sqrt{\\dfrac{\\ln(2K\\_b/\\beta)}{2n\\_b}} \\left( 1+\\dfrac{N\\_m}{n\\_b}\\dfrac{2}{1-\\tau} \\right)$, which removes the necessity of applying union bound over $H$ subintervals. We referred to the results with DKW inequality in the remarks of Theorem 1 and Corollary 1 in the main text.\n\n*[1] Wallis, Sean. \"Binomial confidence intervals and contingency tests: mathematical fundamentals and the evaluation of alternative methods.\" Journal of Quantitative Linguistics 20.3 (2013): 178-208.*\n\n*[2] Dvoretzky, Aryeh, Jack Kiefer, and Jacob Wolfowitz. \"Asymptotic minimax character of the sample distribution function and of the classical multinomial estimator.\" The Annals of Mathematical Statistics (1956): 642-669.*\n\n> Q4: How is the final $(1-\\alpha)$ quantile computed? Is it simply combining all the clients non-conformal scores altogether and then calculating the (1-alpha)-quantile?\n\nWe added clarifications that we did not combine all the non-conformal scores of clients  $\\\\{s_j^{(k)}\\\\}~(k \\in {1,2,..,K})$ because sending all the conformity scores to the server is expensive and leak much information about local data samples in the federated setting. Therefore, we characterize the scores $\\\\{s_j^{(k)}\\\\}$ with a histogram statistics vector $v^{(k)}$, which computes score frequency in $H$ equally partitioned subintervals. The characterization vector $v^{(k)}$ has a much smaller dimension than the universal scores $\\\\{s_j^{(k)}\\\\}$ ($H \\ll n_k$) and thus leaks much less private information during the communication between the server and clients.\nThe characterization vector is an approximation of the universal scores and can induce an approximation error of federated calibration, quantified by $\\epsilon$ in Section 2.2. We also consider the influence of $\\epsilon$ on the coverage guarantee in the Byzantine setting in Theorem 1 and Corollary 1, indicating a tradeoff between the tightness of conformal guarantee bound and the private information leakage/communication costs in federated settings.\n\n> Q5: How can one tell if this distributional difference of some clients is due to their malicious behavior or truly inherent distributional difference?\n\nWe thank you for the interesting question. We can actually think about the effectiveness of Rob-FCP in the non-IID setting from two perspectives. (1) If the malicious clients attempt to disturb the quantile value of conformity scores to a large extent, they need to report a score vector far away from the cluster of score vectors of benign clients. Although the benign score vectors have some heterogeneity, the malicious score vector in this case is still distinguishable in the vector space and effectively excluded during the calibration. (2) If the malicious clients report score vectors close to the cluster of benign score vectors, then even if the Rob-FCP algorithm does not identify malicious clients exactly, the malicious score vectors can still characterize the structure of the benign score cluster, and thus, the computed quantile value would not deviate much. The two situations are exactly the important intuitions in the proof of Theorem 1 and Corollary 1, which rigorously formulates the coverage guarantee of Rob-FCP as a function of the non-IID degree $\\sigma$."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606500966,
                "cdate": 1700606500966,
                "tmdate": 1700606500966,
                "mdate": 1700606500966,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "I370WogJ1n",
            "forum": "rFZtyj5kBz",
            "replyto": "rFZtyj5kBz",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_eCJ4"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_eCJ4"
            ],
            "content": {
                "summary": {
                    "value": "This paper introduces an algorithm called Rob-FCP to perform Conformal Prediction in a federated learning setting where some agents are potentially malicious. This algorithm first discards the malicious agents and then performs a standard conformal prediction algorithm. Authors theoretically provide the conformal coverage bound of Rob-FCP in the Byzantine setting and show that the coverage of Rob-FCP is asymptotically close to the desired coverage level under mild conditions in both IID and non-IID settings. An algorithm for automatically determining the number of malicious agents is also provided. Finally, empirical experiments demonstrate that Rob-FCP is effective."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "1\\ This is a very interesting problem for the conformal prediction community.\n\n2\\ The paper treats both the iid setting and the non-iid setting.\n\n3\\\u00a0The paper is well-written, clear, and easy to follow.\n\n4\\ The experience shows that the method performs well in this federated learning setting with malicious agents."
                },
                "weaknesses": {
                    "value": "1\\ A major weakness is that to calculate the vector distance $d_{k_1, k_2}$ in step 8 of the algorithm (\"Algorithm 1 Identifying the malicious client\"), we need to send all the vectors $v^{(k)}$ to the server. It seems to me that this step is very problematic in a federated learning context.\n\n2\\ Another important weakness is that the bounds of Theorem 1 and Corollary 1 are in $1/(\\min n_i)$. Therefore, if a non-malicious agent has only one data point, the bound does not improve, even if the other agents have an increasing number of data. This may just be due to an artifact of the proof or maybe we really can't do any better. This has to be proven (or at least discussed).\n\n3\\ Citations are not always appropriate. For instance, the split conformal prediction method is attributed to Lei et al., 2018 but the citation should be Papadopoulos et al., 2002.  The same applies to the FCP which does not cite the first paper due to Lu et al., 2021, and the more recent one Humbert et al., 2023, and to related work on federated learning, which only cites papers from 2019 and above.\n\n4\\\u00a0Although the experiences are well explained and in large quantities, I think that the parameters of the experiments are not always given (maybe I am wrong). For example, we do not know how malicious data are generated.\n\nMinor:\n1\\\u00a0\"marginal prediction coverage: ...\" the definition is with an \"inclusion\"\n2\\ Mixture coefficients in the definition of $Q_{\\lambda}$ are missing.\n3\\ Problem in the definition of $N_m$.\n4\\\u00a0In the abstract and introduction, the federated learning framework is also justified by privacy concerns. In general, it is not true that federated learning guarantees privacy."
                },
                "questions": {
                    "value": "1\\ Is it possible to compute the vector distance $d_{k_1, k_2}$ with a federated algorithm ?\n\n2\\ The $\\min{n_i}$ in the bound of Theorem 1 and Corollary 1 cannot be improved or is it just an artifact of the proof?\n\n3\\ In Theorem 1 and Corollary 1, $\\varepsilon$ appears in the bound. Is it possible to control it? \n\n4\\\u00a0In addition to the previous question, in the experiment how much time it takes to compute the quantile? (and for wich $\\varepsilon$ ?)\n\n5\\ Regarding my remark on privacy, is it possible/easy to extend Rob-FCP in order to have differential privacy guarantees?"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission8184/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698747415421,
            "cdate": 1698747415421,
            "tmdate": 1699637014604,
            "mdate": 1699637014604,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "PbDCWfCSma",
                "forum": "rFZtyj5kBz",
                "replyto": "I370WogJ1n",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer eCJ4 [1/2]"
                    },
                    "comment": {
                        "value": "> Q1: More clarifications of sending all the characterization vectors $v^{(k)}$ to the server in the federated setting. Is it possible to compute the vector distance with a federated algorithm?\n\nWe added clarifications that the characterization vector $v^{(k)}$ is proposed exactly for the federated setting to reduce the privacy leakage of local scores and reduce communication costs. Concretely, in the federated conformal prediction context, each client $k$ computes the conformity scores of its $n_k$ local data samples $\\\\{s_j^{(k)}\\\\}$. However, sending all the conformity scores $\\\\{s_j^{(k)}\\\\}$ to the server is expensive and leaks much information about local data samples. Therefore, we characterize the scores $\\\\{s_j^{(k)}\\\\}$ with a histogram statistics vector $v^{(k)}$, which computes score frequency in $H$ equally partitioned subintervals. The characterization vector $v^{(k)}$ has a much smaller dimension than the universal scores $\\\\{s_j^{(k)}\\\\}$ ($H \\ll n\\_k$) and thus leaks much less private information during the communication between the server and clients.\nThus, the characterization vector distance computation on the server side also obeys the principle of federated learning for privacy-preserving and communication efficiency. \nThe characterization vector is an approximation of the universal scores and can induce an approximation error of federated calibration quantified by $\\epsilon$ in Section 2.2. We also consider the influence of $\\epsilon$ on the coverage guarantee in the Byzantine setting in Theorem 1 and Corollary 1, indicating a tradeoff between the tightness of conformal guarantee bound and the private information leakage/communication costs in federated settings.\n\n> Q2: More discussions of the factor of the minimal sample size of benign clients $1/\\min n_i$.\n\nWe thank you for the valuable comment. The appearance of $1/\\min n_i$ is indeed due to the artifact of the proof. In the derivation from Equation (36) to Equation (37) in the proof of Theorem 1, we lower bound the total sample sizes in $\\mathcal{B}$ (benign client set identified by Rob-FCP) with the minimal benign sample size $\\min_{k\u2019 \\in [K_b]} n_{k\u2019}$. We can definitely replace $\\min_{k\u2019 \\in [K_b]} n_{k\u2019}$ with the total sample sizes of $K_b-K_m$ benign clients with the smallest sample sizes, which leads to a tighter bound in many scenarios. This will introduce more complex notations, but it is only meaningful for some extreme cases. In practice, if a benign client has an extremely small sample size, then the characterization vector is almost useless for malicious client identification, and the influence on the conformal calibrated quantile is also negligible as FCP performs a weighted calibration based on sample sizes of clients. Therefore, for the extreme case of some benign clients with extremely small sample sizes (e.g., less than 10), it is more meaningful to discard their scores and apply Rob-FCP to the remaining clients, which is more beneficial to malicious client detection and only leads to negligible error for conformal calibration. We added the discussions to the remark of Theorem 1, which is similarly applied to Corollary 1.\n\n> Q3: Citations are not always appropriate.\n\nWe follow the suggestions to fix citations of split conformal prediction in Section 2.1, citations of FCP in Sections 1,6, and citations of federated learning in Section 1.\n\n> Q4: More details of experiment settings.\n\nWe included more details of used parameters in the main text for a better understanding in Section 5.1. We evaluate on three types of malicious data of Byzantine clients (i.e., Byzantine attacks): (1) *coverage attack* (CovAttack) with which malicious clients report the upper bound th conformity scores (e.g., $1$ for the mostly used LAC score) to induce a larger conformity score at the desired quantile and a lower coverage accordingly, (2) *efficiency attack* (EffAttack) with which malicious clients report the lower bound of the conformity scores (e.g., $0$ for the mostly used LAC score) to induce a lower conformity score at the quantile and a larger prediction set, and (3) *Gaussian Attack* (GauAttack) with which malicious clients inject random Gaussian noises with standard deviation $0.5$ to the scores to perturb the conformal calibration. \n\nWe also included more details about the non-IID setting construction in the main text. we sample $p_{c,j} \\sim \\text{Dir}(\\beta)$ and allocate a $p_{c,j}$ proportion of the instances of class $c$ to the client $j$. Here $\\text{Dir}(\u00b7)$ denotes the Dirichlet distribution and $\\beta$ is a concentration parameter ($\\beta$ > 0). We select $\\beta=0.5$ in evaluations without specification.\n\n> Q5: Notation errors.\n\nWe thank you for pointing out the notation issues. We fixed the notation error of marginal coverage, $\\mathcal{Q}_\\lambda$, and $N_m$ in the revised manuscript."
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606173257,
                "cdate": 1700606173257,
                "tmdate": 1700606173257,
                "mdate": 1700606173257,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "diJzS55EWu",
                "forum": "rFZtyj5kBz",
                "replyto": "I370WogJ1n",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer eCJ4 [2/2]"
                    },
                    "comment": {
                        "value": "> Q6: In Theorem 1 and Corollary 1, $\\epsilon$ appears in the bound. Is it possible to control it?\n\nWe follow FCP to introduce the notation $\\epsilon$ to quantify the approximation error of the estimated quantile $\\hat{q}\\_\\alpha$ by data sketching such that the rank of $\\hat{q}\\_\\alpha$ is between $(1-\\alpha-\\epsilon)(N+K)$ and $(1-\\alpha+\\epsilon)(N+K)$. The approximation error $\\epsilon$ affects the coverage bound of FCP as Equation (3) and accordingly affects the coverage bound in the Byzantine setting as Theorem 1. Since $\\epsilon$ is a quantity dependent on the score distribution, we cannot explicitly formulate it without further assumptions. However, we can control the approximation error $\\epsilon$ with the dimension of the characterization vector $H$. A large $H$ indicates a large number of subintervals for the histogram statistics and a fine-grained partition, which will lead to a more precise approximation and a low $\\epsilon$. Therefore, we can empirically adjust $H$ to control the approximation error $\\epsilon$. We included the discussions in the remarks of Theorem 1 in the revised manuscript.\n\n*[1] Lu, Charles, et al. \"Federated conformal predictors for distributed uncertainty quantification.\" ICML 2023.*\n\n> Q7: In the experiment how much time does it take to compute the quantile? (and for which $\\epsilon$?)\n\nWe follow the suggestion to add the runtime of quantile computation in Rob-FCP in the following Table 1, which indicates the efficiency of federated conformal prediction with our method.\n\nTable 1. Runtime of RobFCP quantile computation with $40\\%$ malicious clients.\n| | MNIST | CIFAR-10 | Tiny-ImageNet | SHHS | PathMNIST |\n| - | - | - | - | - | - |\n| Runtime (seconds) | 0.5284 | 0.5169 | 0.5563 | 0.2227 | 0.3032 |\n\n> Q8: Is it possible/easy to extend Rob-FCP in order to have differential privacy guarantees?\n\nWe thank you for the valuable question. To provide differential privacy guarantees of Rob-FCP, one practical approach is to add privacy-preserving noises to the characterization vectors before uploading them to the server. Essentially, we can view the characterization vector as the gradient in the setting of FL with differential privacy (DP) and add Gaussian noises to the characterization vector with differential privacy guarantees as a function of the scale of noises, which can be achieved by drawing analogy from the FL with DP setting [1,2,3]. Therefore, practically implementing the differential-private version of Rob-FCP is possible and straightforward.\n\n*[1] Zheng, Qinqing, et al. \"Federated f-differential privacy.\" AISTATS 2021.*\n\n*[2] Andrew, Galen, et al. \"Differentially private learning with adaptive clipping.\" NeurIPS 2021.*\n\n*[3] Zhang, Xinwei, et al. \"Understanding clipping for federated learning: Convergence and client-level differential privacy.\" ICML 2022.*"
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700606233189,
                "cdate": 1700606233189,
                "tmdate": 1700606233189,
                "mdate": 1700606233189,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "1O1FEegpDA",
                "forum": "rFZtyj5kBz",
                "replyto": "diJzS55EWu",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Reviewer_eCJ4"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Reviewer_eCJ4"
                ],
                "content": {
                    "comment": {
                        "value": "I would like to thank the authors for their very detailed responses.\n\n-- Regarding the bound with $1/\\min{n_i}$, if I understand correctly, it is possible to replace $1/\\min{n_i}$ with $1/N_b$ with $N_b$ the number of data of all the benign clients? If this is true, I suggest at least mentioning the fact that it could be improved in thiw way. In FL, having a bound in the total number of data is desirable.\n\n-- \"we can control the approximation error  with the dimension of the characterization vector\" \n\nIs it possible to have theoretical bounds on the error?"
                    }
                },
                "number": 12,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700643211864,
                "cdate": 1700643211864,
                "tmdate": 1700643211864,
                "mdate": 1700643211864,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "VctDOEQRnW",
            "forum": "rFZtyj5kBz",
            "replyto": "rFZtyj5kBz",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_YYE4"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission8184/Reviewer_YYE4"
            ],
            "content": {
                "summary": {
                    "value": "The authors consider the conformal prediction interval construction in the federated learning setting where (1) each client reports conformality scores, and (2) a subset of clients are malicious and can report distorted scores to mess up with the interval construction. To alleviate the influence of malicious clients, the authors (1) identify malicious clients by comparing the score distributions from different clients under the assumption that conformity scores for benign clients are sampled from the same underlying distribution (IID setting), or from, essentially, distributions with bounded distance (non IID setting); (2) construct conformal prediction interval using the estimated benign clients."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "1 poor"
                },
                "strengths": {
                    "value": "The paper is overall easy to follow; and robust prediction intervals against malicious clients are an important question."
                },
                "weaknesses": {
                    "value": "It seems to be that the assumptions considered seem over-simplified and may lead to less robustness and under-coverage of difficulty cases when violated: the entire paper is based on the assumption that benign clients have similar conformity score distributions, in both IID settings (identical) and non-IID settings (close), and a client whose conformity score is far from its K_b \"neighbors\" is claimed malicious.  However, in practice, benign clients can have data with different local characteristics, due to, e.g., demographic differences, differences in medical practice guidelines, etc."
                },
                "questions": {
                    "value": "More details of the nonIID setting + different levels of being nonIID can be helpful."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission8184/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698812912195,
            "cdate": 1698812912195,
            "tmdate": 1699637014499,
            "mdate": 1699637014499,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "A5SFsUZJXW",
                "forum": "rFZtyj5kBz",
                "replyto": "VctDOEQRnW",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer YYE4 [1/2]"
                    },
                    "comment": {
                        "value": "> Q1: The assumptions considered are over-simplified and may lead to failure in difficult cases. More details of the nonIID setting and different levels of being nonIID can be helpful.\n\nWe thank you for your valuable comments and suggestions. We added clarifications and improvements of Rob-FCP for the non-IID setting from both the theoretical perspective and the evaluation perspective. \n\nFrom the perspective of theoretical analysis, we provide the coverage guarantees of Rob-FCP in the non-IID setting in Corollary 1 based on the assumption of bounded disparity among benign clients in Assumption 3.1. We added clarifications that the assumption is quite standard, typical, and not simplified across the literature of non-IID federated learning analysis [1] and Byzantine analysis [2,3]. Concretely, Li et al. [1] quantify the non-iid degree (i.e., disparity) of local loss of clients with $\\Gamma$ in Section 3.1 of [1] and accordingly provide the convergence guarantee of federated optimization in Theorem 1 of [1], which is a function of the disparity $\\Gamma$. Park et al. [2] assume a bounded difference $\\rho_1$ between the local loss of benign clients and global loss in Assumption 2 of [2] and provide the convergence analysis in federated Byzantine optimization in Theorem 1 of [2] as a function of $\\rho_1$. Data et al. [3] have an assumption of bounded gradient dissimilarity $\\kappa$ in Assumption 2 of [3] and prove a convergence guarantee in Theorem 1 of [3] regarding $\\kappa$. Similarly, in our paper, we assume a bounded disparity of score statistics quantified with $\\sigma$ in Assumption 3.1 and accordingly provide the coverage guarantees of Rob-FCP in the non-IID setting in Corollary 1 as a function of $\\sigma$. As we can see, the type of assumption is quite standard in the analysis setup of the line of non-IID analysis and Byzantine analysis. The assumption is also essential since without a quantity to restrict the disparity in local behavior, the local behavior can vary arbitrarily, and we can not control global performance quantitatively. From the results in Corollary 1, we can also see that as long as the disparity bound $\\sigma$ is finite, the coverage bound in the non-IID setting is asymptotically valid and tight with sufficiently large benign sample sizes $n_b$. We added these clarifications and details in Section 3.3 in the revised manuscript.\n\nFrom the evaluation perspective, we added more clarifications and illustrations on how we construct non-IID data of different levels and also added more evaluations on various approaches to non-IID data construction. We first added clarifications that we followed the standard evaluation setup of non-IID federated learning by sampling different label ratios for different clients from the Dirichlet distribution as the literature [4,5,6,7]. Concretely, we sample $p_{c,j} \\sim \\text{Dir}(\\beta)$ and allocate a $p_{c,j}$ proportion of the instances with class $c$ to the client $j$. Here $\\text{Dir}(\u00b7)$ denotes the Dirichlet distribution and $\\beta$ is a concentration parameter ($\\beta$ > 0). Dirichlet distribution is commonly used as the prior distribution in Bayesian statistics and is an appropriate\nchoice to simulate real-world data distribution. An advantage of this approach is that we can flexibly change the imbalance level by varying the concentration parameter $\\beta$. If $\\beta$\nis set to a smaller value, then the partition is more unbalanced. We fixed the imbalance level $\\beta$ as $0.5$ in the evaluations before the rebuttal period. Following the suggestion, we added evaluations with different imbalance levels $\\beta$ to show the effectiveness of Rob-FCP under different non-IID settings. The results in the following Table 1 demonstrate that under multiple degrees of data imbalance in non-IID federated conformal prediction, Rob-FCP consistently outperforms FCP in achieving a nominal marginal coverage level in the existence of Byzantine clients. We also consider alternative approaches to construct non-IID data with demographic differences in federated learning. Concretely, we split the SHHS dataset by sorting five different attributes: wake time, N1, N2, N3, REM. For example, we first sort the instances according to the wake time of patients and then assign them to 100 clients in sequence. Therefore, some clients are assigned patients with an early wake time, and some are assigned instances with late wake time. The results in Table 2 show that in this type of non-IID partition, Rob-FCP still demonstrates robustness and effectiveness compared to FCP."
                    }
                },
                "number": 1,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700605584592,
                "cdate": 1700605584592,
                "tmdate": 1700605584592,
                "mdate": 1700605584592,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "pWf1tlvDrF",
                "forum": "rFZtyj5kBz",
                "replyto": "VctDOEQRnW",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Author response to Reviewer YYE4 [2/2]"
                    },
                    "comment": {
                        "value": "> Q1 (to continue): \u00a0The assumptions considered are over-simplified and may lead to failure in difficult cases. More details of the nonIID setting and different levels of being nonIID can be helpful.\n\nTable 1. Marginal coverage / average set size with different non-IID imbalance level $\\beta$, the parameter of Dirichlet distribution where the label ratios of clients are sampled from. The evaluation is done under different Coverage attack with $40\\%~(K_m/K=40\\%)$ malicious clients. The desired marginal coverage is $0.9$.\u00a0\n\n| | $\\beta=0.1$ | $\\beta=0.3$ | $\\beta=0.5$ | $\\beta=0.7$ | $\\beta=0.9$ |\n| - | - | - | - | - | - |\n| FCP on MNIST | 0.780 / 1.173 |\u00a0 0.817 / 1.318 | 0.833 / 1.384 | 0.805 / 1.265 |\u00a0 0.828 / 1.363 |\n| Rob-FCP on MNIST | **0.899** / 1.806 | **0.905** / 1.809 | **0.903** / 1.827 |\u00a0 **0.898** / 1.781 | **0.893** / 1.768 |\n| FCP on CIFAR-10 | 0.806 / 1.641 | 0.821 / 1.717 | 0.836 / 1.791 | 0.823 / 1.744 | 0.824 / 1.723 |\n| Rob-FCP on CIFAR-10 | **0.899** / 2.260 |\u00a0 **0.907** / 2.405 | **0.892** / 2.243 | **0.904** / 2.396 | **0.910** / 2.416 |\n| FCP on Tiny-ImageNet | 0.840 / 28.625 | 0.830 / 28.192 |\u00a0 0.833 / 28.340 |\u00a0 0.821 / 27.140 | 0.8308 / 28.751 |\n| Rob-FCP on Tiny-ImageNet | **0.913** / 45.872 | **0.910** / 44.972 | **0.898** / 42.571 | **0.887** / 41.219 | **0.898** / 43.298 |\n| FCP on PathMNIST | 0.850 / 1.106 | 0.839 / 1.065 | 0.837 / 1.055 | 0.839 / 1.065\t | 0.832 / 1.043 |\n| Rob-FCP on PathMNIST | **0.895** / 1.311 | **0.900** / 1.355 | **0.900** / 1.355 | **0.899** / 1.354 | **0.901** / 1.363 |\n\n\nTable 2. Marginal coverage / average set size on SHHS with non-IID data partition based on different attributes: wake time, N1, N2, N3, REM. The evaluation is done under different Coverage attack with $40\\%~(K_m/K=40\\%)$ malicious clients. The desired marginal coverage is $0.9$.\u00a0\n\n| | wake time | N1 | N2 | N3 | REM |\n| - | - | - | - | - | - |\n| FCP on SHHS | 0.835 / 1.098 | 0.841 / 1.104 | 0.841 / 1.104 | 0.837 / 1.105 | 0.840 / 1.107 |\n| Rob-FCP on SHHS | **0.901** / 1.367 | **0.902** / 1.358 | **0.902** / 1.355 | **0.902** / 1.375 | **0.900** / 1.356 |\n\n*[1] Li, Xiang, et al. \"On the convergence of fedavg on non-iid data.\" ICLR 2020.*\n\n*[2] Park, Jungwuk, et al. \"Sageflow: Robust federated learning against both stragglers and adversaries.\" NeurIPS 2021.*\n\n*[3] Data, Deepesh, et al. \"Byzantine-resilient high-dimensional SGD with local iterations on heterogeneous data.\" ICML 2021.*\n\n*[4] Yurochkin, Mikhail, et al. \"Bayesian nonparametric federated learning of neural networks.\" International conference on machine learning. ICML 2019.*\n\n*[5] Lin, Tao, et al. \"Ensemble distillation for robust model fusion in federated learning.\" NeurIPS 2020.*\n\n*[6] Wang, Hongyi, et al. \"Federated learning with matched averaging.\" ICLR 2020.*\n\n*[7] Gao, Liang, et al. \"Feddc: Federated learning with non-iid data via local drift decoupling and correction.\" CVPR 2022.*"
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700605784479,
                "cdate": 1700605784479,
                "tmdate": 1700605838284,
                "mdate": 1700605838284,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "HbnDlsdWzK",
                "forum": "rFZtyj5kBz",
                "replyto": "VctDOEQRnW",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission8184/Reviewer_YYE4"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission8184/Reviewer_YYE4"
                ],
                "content": {
                    "comment": {
                        "value": "I am sorry but I feel this is a very dangerous assumption, and leads to increased prediction disparity when leaving out minority samples that are not intentional attack. What makes it really dangerous is that this decision is  based on prediction quality, as a result, there is no way that you can even assess which samples during test are belonging to the left-out minority populations.\n\nI am willing to increase my score if the authors can explain to me why this is not a concern in the settings considered."
                    }
                },
                "number": 14,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission8184/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700708488250,
                "cdate": 1700708488250,
                "tmdate": 1700708507805,
                "mdate": 1700708507805,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]