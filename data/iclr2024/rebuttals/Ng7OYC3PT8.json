[
    {
        "title": "ATraDiff: Accelerating Online Reinforcement Learning with Imaginary Trajectories"
    },
    {
        "review": {
            "id": "gRO6zezBlO",
            "forum": "Ng7OYC3PT8",
            "replyto": "Ng7OYC3PT8",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_rtc7"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_rtc7"
            ],
            "content": {
                "summary": {
                    "value": "The paper introduces a method to generate synthetic trajectories for online reinforcement learning using diffusion models, using offline data to bootstrap data generation. The training data for the diffusion model is generated by projecting low-dimensional states to images and then stacking them in a single image. The authors then fine-tune Stable Diffusion with this dataset, with the option to continuously update with online data. Generated images are then projected back to low-dimensional states. The resulting approach improves performance on a number of standard benchmarks."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "1 poor"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "- The problem setting is well-motivated and important to data efficient reinforcement learning.\n- The paper proposes an interesting approach to generating trajectories in image-space by fine-tuning Stable Diffusion with stacked images.\n- The approach shows promising results across a wide variety of datasets and benchmarks, with ablations on relevant portions of the algorithm."
                },
                "weaknesses": {
                    "value": "While the paper shows promising improvements over the non-augmented baseline, unclear presentation and missing details make it hard to determine the contribution of the paper. In particular, \n- **(Incomplete description of algorithm)** A huge amount of detail is missing when the authors claim they convert states to images and then back to states in Section 4.1. This is highly non-trivial and should be justified further. For example, can the authors present pictures of rendered states, what is the error from converting to image and back again? There is also no description of how Stable Diffusion was fine-tuned or how long online image generation takes. Furthermore, it is not explained how the authors would generate low-dimensional actions or obtain rewards from an image model.\n- **(Benefit of trajectories vs. transitions)** The paper claims \u201cfull trajectories offer a more comprehensive source of information, enabling RL agents to better learn from past experiences\u201d without evidence in the introduction. No comparison is made to the transition-based baseline in [1] which also evaluates on the same MuJoCo locomotion environments in Figure 2. Furthermore, [3] also proposes a trajectory based method for generating synthetic data with diffusion models and is not discussed.\n- **(Why project states to images)** The paper claims that generating a collection of images outperforms single states in Figure 5. It is unclear why the simpler option of generating a sequence of states as in [2, 3] is not chosen. Given the image-based approach, it may also be asked why the authors do not focus on upsampling image datasets from the start, e.g. from [4].\n- **(Incomplete experimental description)** Unclear what experimental setup is used in Figure 2. Is each figure the average of 4 different D4RL datasets? No explanation for what environments or datasets are used in Figure 5.\n- **(Unclear description of sampling scheme)** There is an extremely vague description of what the reward or TD-error based pickup strategy means in Appendix A.1.1.\n\nMinor\n- The description of the state diffusion model in Appendix A.2 is copied nearly verbatim from Appendix B.2 of [1]. The authors should reword this to avoid plagiarism and cite this appropriately.\n\n\n[1] Synthetic Experience Replay. Cong Lu, Philip J. Ball, Yee Whye Teh, and Jack Parker-Holder. NeurIPS, 2023.\n\n[2] Planning with Diffusion for Flexible Behavior Synthesis. Michael Janner*, Yilun Du*, Joshua Tenenbaum, and Sergey Levine. ICML, 2022.\n\n[3] Diffusion Model is an Effective Planner and Data Synthesizer for Multi-Task Reinforcement Learning. Haoran He, Chenjia Bai, Kang Xu, Zhuoran Yang, Weinan Zhang, Dong Wang, Bin Zhao, Xuelong Li. NeurIPS, 2023.\n\n[4] Challenges and Opportunities in Offline Reinforcement Learning from Visual Observations; Cong Lu, Philip J. Ball, Tim G. J. Rudner, Jack Parker-Holder, Michael A. Osborne, Yee Whye Teh. TMLR, 2023."
                },
                "questions": {
                    "value": "I would appreciate clarifications and responses to each of the concerns in the weaknesses section."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "5: You are absolutely certain about your assessment. You are very familiar with the related work and checked the math/other details carefully."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 1,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission4030/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1697980317965,
            "cdate": 1697980317965,
            "tmdate": 1699636366069,
            "mdate": 1699636366069,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "Em3CoE4lqf",
                "forum": "Ng7OYC3PT8",
                "replyto": "gRO6zezBlO",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer rtc7 (Part 1)"
                    },
                    "comment": {
                        "value": "Thanks a lot for your insightful and inspiring comments! We provide the following clarifications in response to your concerns:\n\n1. Incomplete description of algorithm\n\n    - Thank you for pointing out the missing details in our methodology. To address this, we have revised our manuscript thoroughly and included the previously omitted methodology and implementation details, including those pointed out by the reviewer (e.g., the conversion method between images and states) and other details (e.g., the architecture of the generation models and the pick-up strategy). These details are discussed in the updated main paper, and a detailed  explanation is available in Section A of the updated appendix. In addition, we will release our code upon acceptance. We hope that the revision improves the clarity and provides a thorough understanding of our method and procedure. For ease of reference, below we briefly summarize the missing details raised by the reviewer, with more in-depth information available in the revision.\n\n    - **(converting between images and states)** For the renderer converting states to images, we follow the previous work [Ref1]. This involves running the agent in the environment and capturing observations as rendering results. The recognizer, which converts images back to states, comprises a general convolutional component and separate MLPs. These MLPs are tasked with estimating the 3D positions of key points, tailored to different environments.\n\n    - **(Pictures of rendered states)** In Appendix D of the updated appendix, we have included representative visualizations of our generated image trajectories. We present a variety of images generated under different conditions, including varying initial states and a range of tasks. The results demonstrate the robustness and effectiveness of our image generation method, consistently performing well across diverse scenarios and producing high-quality and temporally coherent image trajectories.\n\n    - **(Conversion error between images and states)** 1) The error of converting states to images and then back to states is relatively small. For example, during the training of our recognizer in Meta-World, we found that the loss, which represents the error, is less than $0.054$. 2) Important, we would like to point out that in our case, we are using the synthesized data to train RL methods, not for planning. This means that we do not require the conversion to be very accurate. Instated, we can tolerate the errors within this process and even benefit increased robustness from this.\n\n    - **(Description of the generation model and fine-tuning Stable Diffusion)** We have set the generation lengths for multiple generators at 5, 10, 15, 20, and 25, respectively. For fine-tuning each generator corresponding to length $k$, we use the offline dataset to generate training data, creating sub-trajectories from points in full trajectories. Sub-trajectories shorter than length $k$ are padded to length $k$ using the last frame. We use LoRA to fine-tune the Stable Diffusion based generators. Additionally, we have conducted an experiment on the wall-clock running time of our generator, detailed in Section C.4 of the updated appendix. We would like to note that in the context of online reinforcement learning, the most significant cost often lies in interacting with the real environment and data collection. Consequently, our primary focus with ATraDiff has been on optimizing sample efficiency to minimize the time required for environmental interaction.\n\n    - **(Action and reward generation)** We would like to clarify that the action and reward are not generated directly from images. Instead, they are derived from states obtained via the recognizer. More concretely, actions are calculated based on adjacent states, specific to the task, while rewards are generated through interaction with the ground-truth environment. Note that in the context of online training, RL methods inherently involve accessing the environment. Additionally, in the updated manuscript, we have also included a variant of our method that trains a reward prediction function from an offline dataset. The effectiveness of this reward predictor has been demonstrated in our offline experiments, the results of which are included in Section C.1 of the updated appendix."
                    }
                },
                "number": 10,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701649253,
                "cdate": 1700701649253,
                "tmdate": 1700701649253,
                "mdate": 1700701649253,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "iPSG0oQxWW",
                "forum": "Ng7OYC3PT8",
                "replyto": "gRO6zezBlO",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer rtc7 (Part 2)"
                    },
                    "comment": {
                        "value": "2. Benefits of trajectories vs. transitions: Comparison with SynthER\n\n    - First, we would like to clarify that **the task settings differ between our work and SynthER**. Our work primarily focuses on leveraging offline data to enhance online reinforcement learning performance. In contrast, SynthER [Ref2] aims to upsample the offline dataset using their data synthesizer. A crucial distinction lies in their methodology for online experiments, where they do not integrate the offline dataset, which is a key component in our approach. This fundamental difference in task settings initially led us to exclude a direct comparison with SynthER.\n\n    - Additionally, at the time of our submission to ICLR, SynthER was not yet published, appearing later in NeurIPS 2023. Given these circumstances, a direct comparison was not feasible in our initial submission.\n\n    - Following the reviewer\u2019s suggestion, we now include comparisons between our method and SynthER. Consistent with the discussion above, we consider two types of comparisons: **(I) Employ SynthER in our task setting, which we care most about**. To this end, we have conducted a comparative analysis in an **online** setting within the Meta-World Environments. This analysis is crucial to demonstrate the adaptability and effectiveness of our approach in dynamic and complex settings. **Our results indicate a significant performance advantage of our method over SynthER in these online environments**, as summarized in the table below. For more detailed results, including full performance curves, please refer to Section C.5 of the updated appendix.\n\n    |Task Name|SPiRL+SynthER|SPiRL+ours|RLPD+SynthER|RLPD+ours|\n    |---|:---:|:---:|:---:|:---:|\n    |multitask|0.45|0.61|0.52|0.75|\n    |sequencetask|0.49|0.57|0.62|0.80|\n\n    - **(II) Employ our method in SynthER\u2019s task setting, which is not the focus of our paper**. To this end, we have included an additional comparison in Section C.1 of the updated appendix. This comparison, conducted in the D4RL Locomotion environment under **offline** settings, demonstrates that our method can achieve comparable or superior results to SynthER.\n\n    |Task Name|TD3+BC|TD3+BC+SynthER|TD3+BC+ours|IQL|IQL+SynthER|IQL+ours|\n    |---|:---:|:---:|:---:|:---:|:---:|:---:|\n    | halfcheetah-random | 11.3 | 12.2 | 12.5 | 15.2 | 17.2 | 17.1|\n    | halfcheetah-medium | 48.1 | 49.9 | 52.3 | 48.3 | 49.6 | 53.1| \n    | halfcheetah-replay | 44.8 | 45.9 | 46.5 | 43.5 | 46.7 | 49.2 |\n    | halfcheetah-expert | 90.8 | 87.2 | 93.6 | 94.6 | 93.3 | 95.2 |\n    | hopper-random | 8.6 | 14.6 | 15.2 | 7.2 | 7.7 | 8.1|\n    | hopper-medium | 60.4 | 63.4 | 65.7 | 62.8 | 72.0 | 72.4 |\n    | hopper-replay | 64.4 | 53.4 | 64.7 | 84.6 | 103.2 | 103.6 |\n    | hopper-expert | 101.1 | 105.4 | 111.2 | 106.2 | 90.8 | 113.6 |\n    | walker-random | 0.6 | 2.3 | 2.1 | 4.1 | 4.2 | 4.3|\n    | walker-medium | 82.7 | 84.8 | 87.5 | 84.0 | 84.7 | 89.1 |\n    | walker-replay | 85.6 | 90.5 | 86.3 | 82.6 | 83.3 | 85.4 |\n    | walker-expert | 110.0 | 110.2 | 111.2 |111.7 |111.4 | 111.7 |\n\n    - In summary, our aforementioned experimental results validate that, **in both our task setting and SynthER\u2019s task setting, our trajectory-level generation outperforms the transition-level generation of SynthER**.\n\n3. Benefits of trajectories vs. transitions: Difference from [Ref3]\n\n    - Our work is different from [Ref3] in two important ways:  1) [Ref3] actually addresses a task different from our work. They focus on the planning phase, while we focus on the online training aspect. 2) Different from the one-time generation in their work, we leverage multiple generations from different start points with different tasks which deal with the unique challenges associated with flexible generation and distribution shift. We have discussed these differences in the Related Works section."
                    }
                },
                "number": 11,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701760682,
                "cdate": 1700701760682,
                "tmdate": 1700701760682,
                "mdate": 1700701760682,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "5eKOG0L3aV",
                "forum": "Ng7OYC3PT8",
                "replyto": "gRO6zezBlO",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer rtc7 (Part 3)"
                    },
                    "comment": {
                        "value": "4. Why projecting states into images\n\n    - We would like to emphasize that **our work develops a general plug-in data generation method to facilitate online RL algorithms, agnostic to the specific form of generation, which could either be pixel/image-level based or state-level based**. For example, the important deployment method of our generator and online adaptation technique are agnostic to the form of generation. In our paper, we have investigated the two variants of our data generation method: at image or state levels, as shown in Fig. 6. And we found that 1) both image and state generation variants significantly outperform the baselines; 2) image generation works better under our paradigm. Our hypothesis for the second finding is that image generation can benefit from a pre-trained generation model (e.g., Stable Diffusion) while state generation is trained from scratch, though image generation needs additional modules to convert between images and states.\n\n    - In principle, our method could still be applicable to those vision-based reinforcement learning tasks as suggested by the reviewer, not only restricted to the benchmarks we investigated in the paper. Following previous work [Ref2], this paper mainly focuses on traditional offline RL datasets like D4RL. Evaluating these vision-based tasks is an interesting direction for future work.\n\n5. Incomplete experimental descriptions\n\n    - For Fig. 3 (formerly Fig. 2 in the reviewer\u2019s original comment \u2013 we included another figure in the updated manuscript), in the original manuscript, we followed prior studies [Ref4] and presented the average performance across different datasets from the D4RL benchmark. To provide a more comprehensive understanding, we have now included separate results for datasets in Section C.3 of the updated appendix.\n\n    - In Fig. 6 (formerly Fig. 5 in the reviewer\u2019s original comment \u2013 we included another figure in the updated manuscript), we conducted experiments on the D4RL Locomotion environments. We have included the missing description to the caption in the updated manuscript.\n\n6. Unclear description of sampling scheme\n\n    - We apologize for any confusion. We have thoroughly revised Section A.1 of the updated appendix, providing detailed explanation on the pick-up strategy. We also elaborate on the various indicators used and how they influence sample selection in our model. Below we briefly summarize the key points: \n\n    - We investigated different indicators to represent the importance of the real samples collected from interacting with the environment when running online RL methods. These indicators are designed to discern different properties, influencing which samples are considered more crucial for effective learning and adaptation.\n\n    - To ensure that the selected samples used to adapt the generator are suitable, we developed 'pick-up strategies' according to different indicators. These strategies involve a systematic approach to maintaining a data structure that stores real samples and selecting the most appropriate ones for online adaptation. The intention is to ensure that our model utilizes the most valuable samples, as indicated by our chosen metrics, to optimize learning outcomes.\n\n    - The *TD-error indicator* uses the TD-error of a transition to represent its importance. It has the property of flexible importance during the training process. Therefore, we use a large buffer to store more samples, and select samples with the most importance each time when we need to update. In contrast, the *reward indicator* uses the total reward of a trajectory to represent its importance, which has the property of fixed importance. To avoid using fixed samples to update the generator too many times, we have designed a small buffer with a random dropping strategy.\n\n7. Description in Appendix A.2\n\n    - We apologize for this and appreciate the reviewer for pointing it out. We have rewritten this section as well as improved its clarity.\n\n    - We hope that our clarifications have addressed the reviewer\u2019s concern. We will also release our code upon acceptance. If there are any remaining details or concerns that require further clarification, please do not hesitate to let us know. We are committed to ensuring that our research is transparent and accessible.\n\nReferences:\n\n[Ref1] Younggyo Seo, Danijar Hafner, Hao Liu, Fangchen Liu, Stephen James, Kimin Lee, and Pieter Abbeel. Masked world models for visual control. CoRL 2022.\n\n[Ref2] Cong Lu, Philip J. Ball, Yee Whye Teh, and Jack Parker-Holder. Synthetic Experience Replay. NeurIPS, 2023.\n\n[Ref3] Haoran He, Chenjia Bai, Kang Xu, Zhuoran Yang, Weinan Zhang, Dong Wang, Bin Zhao, Xuelong Li. Diffusion Model is an Effective Planner and Data Synthesizer for Multi-Task Reinforcement Learning. NeurIPS, 2023.\n\n[Ref4] Philip J. Ball, Laura M. Smith, Ilya Kostrikov, and Sergey Levine. Efficient online reinforcement learning with offline data. ICML 2023."
                    }
                },
                "number": 12,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701849314,
                "cdate": 1700701849314,
                "tmdate": 1700701849314,
                "mdate": 1700701849314,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "eigBJfYovl",
            "forum": "Ng7OYC3PT8",
            "replyto": "Ng7OYC3PT8",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
            ],
            "content": {
                "summary": {
                    "value": "The paper introduces ATraDiff, which uses diffusion models to generate synthetic trajectories for online RL. It can augment the replay buffer of any online RL algorithm with full trajectories, improving data efficiency and performance. ATraDiff can handle varying trajectory lengths and distribution shifts between offline and online data. It achieves state-of-the-art results on several benchmarks, particularly in complex environments with sparse rewards."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "- It proposes a novel method that uses diffusion models to generate synthetic trajectories for online RL, which is a challenging and important problem due to distributional shift.\n- It can improve the data efficiency and performance of any online RL algorithm as a plug-in method, by augmenting the replay buffer with full trajectories that are conditioned on the current state and task.\n- It can handle varying trajectory lengths and distribution shifts between offline and online data by using a coarse-to-precise strategy and an online adaptation mechanism."
                },
                "weaknesses": {
                    "value": "See questions."
                },
                "questions": {
                    "value": "1. In Sec. 4.2, is the synthetic trajectory actually $(\\ldots,s_L,a_L)$ instead of $(\\ldots, s_t,a_t)$? \n2. How can the reward $R(s_i,a_i)$ of a synthetic state-action pair be calculated from the environment if the action is not executed in the environment, or is the reward function accessible to the agent?\n3. In the last part of Sec. 4.3, it states that \"Hence, we will randomly drop some samples from the maintained subset regardless of\ntheir importance\". Is there any ablation study to support the effectiveness of this random dropping strategy?\n4. A recent work [1] about offline and online data augmentation using diffusion models has been published. Could you please include some comparison between your work and [1]? Experimental comparison will be better.\n\n[1] Synthetic Experience Replay. NeurIPS 2023. https://arxiv.org/abs/2303.06614"
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "5: marginally below the acceptance threshold"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission4030/Senior_Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission4030/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
                    ]
                }
            },
            "number": 2,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission4030/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1698810298181,
            "cdate": 1698810298181,
            "tmdate": 1699636365999,
            "mdate": 1699636365999,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "gfrHFWhfDe",
                "forum": "Ng7OYC3PT8",
                "replyto": "eigBJfYovl",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer 8Lyo (Part 1)"
                    },
                    "comment": {
                        "value": "Thanks a lot for your insightful and inspiring comments! We provide the following clarifications in response to your concerns:\n\n1. Technique detail in Section 4.2\n\n    - In Sec. 4.2, the synthesized result is actually $(\\dots, s_t, a_t)$, not $(\\dots, s_L, a_L)$. Here $L$ represents the expected length of the generated trajectories, which is not the real length. In practice, the generated length can be flexible, due to the multiple generators and trajectory pruner.\n\n2. Reward generation\n\n    - The reward is calculated by accessing the ground truth environment. It is important to note that **in the context of online training, RL methods inherently involve accessing the environment**. Our work focuses on the paradigm that utilizes the offline data to improve the performance of online reinforcement learning, aiming to develop a general tool that can be applied to any online reinforcement methods. Therefore, our pipeline involves accessing the online environment in the online training phase, which might be different from traditional offline learning methods.\n\n    - We would like to also highlight that our ATraDiff's interaction with the environment is deliberately constrained in our method. As detailed in Section 4.2, the environment access probability is set as $\\frac{\\rho}{(1-\\rho)L}$. Here $L$ represents the expectation length of generation, $T$ represents the real sample time, and $\\rho$ is the controlling variable. This ensures that environment interactions with ATraDiff occur only $\\frac{\\rho} * T$ times, a constant and limited number, thereby controlling the potential increase in time costs.\n\n    - In the updated manuscript, we have also included a variant of our method that trains a reward prediction function from an offline dataset. To achieve this, we have followed the established methodology from prior work [Ref1], and implemented supervised training with the offline dataset. The effectiveness of this reward predictor has been demonstrated in our offline experiments, the results of which are included in Section C.1 of the updated appendix as well as shown in the table below. In our future work, we aim to adapt this reward predictor for online scenarios and further improve the performance.\n\n    |Task Name|TD3+BC|TD3+BC+ours_with_learned_reward|IQL|IQL+ours_with_learned_reward|\n    |---|:---:|:---:|:---:|:---:|\n    |halfcheetah-random|11.3 | 11.7 | 15.2 | 16.8|\n    |halfcheetah-medium|48.1 | 49.3 | 48.3 | 50.2|\n    |halfcheetah-medium-replay|44.8 | 45.3 | 43.5 | 45.6|\n    |halfcheetah-medium-expert|90.8 | 91.9 | 94.6 | 94.5|\n    |hopper-random|8.6 | 14.8 | 7.2 | 8.3 |\n    |hopper-medium|60.4 | 64.5 | 62.8 | 72.2|\n    |hopper-medium-replay| 64.4 | 65.2 | 84.6 | 97.0|\n    |hopper-medium-expert| 101.1 | 108.7 | 106.2 | 108.3 |\n    |walker-random| 0.6 | 3.4 | 4.1 | 4.0 |\n    |walker-medium|82.7 | 85.0 | 84.0 | 85.3 |\n    |walker-medium-replay|85.6 | 87.5 | 82.6 | 84.9|\n    |walker-medium-expert|110.0 | 111.1 | 111.7 | 111.6 |\n\n3. Random dropping strategy\n\n    - In the online adaptation phase of our pipeline, we employed the total reward importance indicator to assess the significance of each trajectory. An inherent characteristic of this method is that the importance assigned to any given trajectory remains constant throughout the training process. Consequently, trajectories with high importance are perpetually prioritized for generator updates.\n\n    - This consistent prioritization led us to implement a *random dropping* strategy. By introducing this strategy, we aimed to inject variability into the training process, mitigating potential biases that might arise from the continuous use of high-importance trajectories. We believe that this approach not only diversifies the training data but also enhances the robustness of our generator.\n\n    - To evaluate the effectiveness of the random dropping strategy, we have conducted an ablation study. The result and discussion are detailed in Section C.2 of the updated appendix, showing that the random dropping strategy significantly improves the performance."
                    }
                },
                "number": 7,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701249029,
                "cdate": 1700701249029,
                "tmdate": 1700701249029,
                "mdate": 1700701249029,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "nx1TZE1Kzl",
                "forum": "Ng7OYC3PT8",
                "replyto": "eigBJfYovl",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer 8Lyo (Part 2)"
                    },
                    "comment": {
                        "value": "4. Lack of comparison with SynthER\n\n    - First, we would like to clarify that **the task settings differ between our work and SynthER**. Our work primarily focuses on leveraging offline data to enhance online reinforcement learning performance. In contrast, SynthER aims to upsample the offline dataset using their data synthesizer. A crucial distinction lies in their methodology for online experiments, where they do not integrate the offline dataset, which is a key component in our approach. This fundamental difference in task settings initially led us to exclude a direct comparison with SynthER.\n\n    - Additionally, at the time of our submission to ICLR, SynthER was not yet published, appearing later in NeurIPS 2023. Given these circumstances, a direct comparison was not feasible in our initial submission.\n\n    - Following the reviewer\u2019s suggestion, we now include comparisons between our method and SynthER. Consistent with the discussion above, we consider two types of comparisons: **(I) Employ SynthER in our task setting, which we care most about**. To this end, we have conducted a comparative analysis in an **online** setting within the Meta-World Environments. This analysis is crucial to demonstrate the adaptability and effectiveness of our approach in dynamic and complex settings. **Our results indicate a significant performance advantage of our method over SynthER in these online environments**, as summarized in the table below. For more detailed results, including full performance curves, please refer to Section C.5 of the updated appendix.\n\n    |Task Name|SPiRL+SynthER|SPiRL+ours|RLPD+SynthER|RLPD+ours|\n    |---|:---:|:---:|:---:|:---:|\n    |multitask|0.45|0.61|0.52|0.75|\n    |sequencetask|0.49|0.57|0.62|0.80|\n\n    - **(II) Employ our method in SynthER\u2019s task setting, which is not the focus of our paper**. To this end, we have included an additional comparison in Section C.1 of the updated appendix. This comparison, conducted in the D4RL Locomotion environment under **offline** settings, demonstrates that our method can achieve comparable or superior results to SynthER.\n\n    |Task Name|TD3+BC|TD3+BC+SynthER|TD3+BC+ours|IQL|IQL+SynthER|IQL+ours|\n    |---|:---:|:---:|:---:|:---:|:---:|:---:|\n    | halfcheetah-random | 11.3 | 12.2 | 12.5 | 15.2 | 17.2 | 17.1|\n    | halfcheetah-medium | 48.1 | 49.9 | 52.3 | 48.3 | 49.6 | 53.1| \n    | halfcheetah-replay | 44.8 | 45.9 | 46.5 | 43.5 | 46.7 | 49.2 |\n    | halfcheetah-expert | 90.8 | 87.2 | 93.6 | 94.6 | 93.3 | 95.2 |\n    | hopper-random | 8.6 | 14.6 | 15.2 | 7.2 | 7.7 | 8.1|\n    | hopper-medium | 60.4 | 63.4 | 65.7 | 62.8 | 72.0 | 72.4 |\n    | hopper-replay | 64.4 | 53.4 | 64.7 | 84.6 | 103.2 | 103.6 |\n    | hopper-expert | 101.1 | 105.4 | 111.2 | 106.2 | 90.8 | 113.6 |\n    | walker-random | 0.6 | 2.3 | 2.1 | 4.1 | 4.2 | 4.3|\n    | walker-medium | 82.7 | 84.8 | 87.5 | 84.0 | 84.7 | 89.1 |\n    | walker-replay | 85.6 | 90.5 | 86.3 | 82.6 | 83.3 | 85.4 |\n    | walker-expert | 110.0 | 110.2 | 111.2 |111.7 |111.4 | 111.7 |\n\n\n    - In summary, our aforementioned experimental results validate that, **in both our task setting and SynthER\u2019s task setting, our trajectory-level generation outperforms the transition-level generation of SynthER**.\n\n\nReferences:\n\n[Ref1] Ksenia Konyushkova, Konrad Zolna, Yusuf Aytar, Alexander Novikov, Scott Reed, Serkan Cabi, and Nando de Freitas. Semi-supervised reward learning for offline reinforcement learning. NeurIPS Workshop, 2020.\n\n[Ref2] Cong Lu, Philip J. Ball, Yee Whye Teh, and Jack Parker-Holder. Synthetic Experience Replay. NeurIPS, 2023."
                    }
                },
                "number": 9,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701566893,
                "cdate": 1700701566893,
                "tmdate": 1700701566893,
                "mdate": 1700701566893,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "JagC9BhTOJ",
                "forum": "Ng7OYC3PT8",
                "replyto": "gfrHFWhfDe",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
                ],
                "content": {
                    "comment": {
                        "value": "Thanks for your detailed reply and additional experiments. The experiment results show that ATraDiff performs well under various settings and environments. However, I cannot agree with your explaination about accessing the ground truth reward function. Though RL agents can interact with the online environment, it is not clear that they can directly access the reward function. Online RL means that agents can receive the feedback of their actions from the environment, which they cannot in offline RL. If the ground truth reward function is defaultly accessible, it is redundant for many MBRL algorithms to learn an additional reward model besides the dynamics model. \n\nIt seems that your supplementary experiments with the learned reward function also performs well. I think the paper will be more solid if your take the similar scheme in the online RL part."
                    }
                },
                "number": 13,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700709544442,
                "cdate": 1700709544442,
                "tmdate": 1700709544442,
                "mdate": 1700709544442,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "UGU2Y36Jge",
                "forum": "Ng7OYC3PT8",
                "replyto": "Ru5cbDrc44",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Reviewer_8Lyo"
                ],
                "content": {
                    "comment": {
                        "value": "Thanks for your further reply. I am glad to admit that the performance of ATraDiff with learned reward functions is also excellent. But I am still curious about how the reward $R(s,a)$ can be obtained by interacting with the environment, unless the agent is set to state $s$ and takes action $a$. In Section 4.2, the synthetic transitions $(s_i,a_i)$ are not actually executed from my personal perspective. If my understanding is wrong, I am willing to hear the correct scheme of your algorithm."
                    }
                },
                "number": 15,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700728519268,
                "cdate": 1700728519268,
                "tmdate": 1700728519268,
                "mdate": 1700728519268,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "T8sUsmx2NE",
            "forum": "Ng7OYC3PT8",
            "replyto": "Ng7OYC3PT8",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_cnq2"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_cnq2"
            ],
            "content": {
                "summary": {
                    "value": "The paper proposes ATraDiff, a data augmentation method to generate synthetic trajectories with diffusion models to enhance online RL and offline-to-online RL. The method is able to handle varying trajectory lengths, and overcome offline-to-online data distribution shifts. Orthogonally applicable to RL methods with a replay buffer, ATraDiff improves their performance on several benchmarks, particularly in complicated tasks."
                },
                "soundness": {
                    "value": "3 good"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "3 good"
                },
                "strengths": {
                    "value": "- Good performance improvement, orthogonally applicable to any RL algorithm with a replay buffer."
                },
                "weaknesses": {
                    "value": "- The additional latency of using ATraDiff, and the continual training of the diffusion model on new experiences is not mentioned, but it's a rather important detail.\n- Figure line names ordering and colours are not very intuitive to follow\n- Would have liked to see an analysis on the quality of the images generated by ATraDiff, particularly it would be interesting to see how temporally correlated are the trajectories.\n- Overall the paper would benefit from more in depth analysis of the ablation studies too. Would like to see comparison with the state-based diffuser on more tasks, as well as a full comparison with it's closest method SynthER, both in terms of performance and computational requirements.\n- Unsure how reproducible the paper is as many implementation details are missing."
                },
                "questions": {
                    "value": "- How temporally correlated are the image trajectories generated by diffusion? Does it create a coherent video? A good analysis on this would definitely strengthen the paper.\n- What is the added latency of using ATraDiff compared to only using one of the baseline RL algorithms? Regardless if it's significantly more computationally expensive, it would still be helpful to know quantitatively.\n- Not sure I understand why there is no comparison with its closest method SynthER?\n\nTo recap, a more insightful analysis on the kind and quality of trajectories generated, and a comparison with SynthER could help improve the score.\n\nEdit: Rating improved after concerns were addressed by the authors response."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                },
                "first_time_reviewer": {
                    "value": "Yes",
                    "readers": [
                        "ICLR.cc/2024/Conference/Program_Chairs",
                        "ICLR.cc/2024/Conference/Submission4030/Area_Chairs",
                        "ICLR.cc/2024/Conference/Submission4030/Reviewer_cnq2",
                        "ICLR.cc/2024/Conference/Submission4030/Senior_Area_Chairs"
                    ]
                }
            },
            "number": 3,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission4030/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1699098791235,
            "cdate": 1699098791235,
            "tmdate": 1700734084525,
            "mdate": 1700734084525,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "QkrAC8678L",
                "forum": "Ng7OYC3PT8",
                "replyto": "T8sUsmx2NE",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer cnq2 (Part 1)"
                    },
                    "comment": {
                        "value": "Thanks a lot for your insightful and inspiring comments! We provide the following clarifications in response to your concerns:\n\n1. Additional latency of using ATraDiff\n    - Our ATraDiff is designed with a trade-off between sample efficiency and computational resource demands. We would like to emphasize that **in the context of online reinforcement learning, the most significant cost often lies in interacting with the real environment and data collection**. Consequently, our primary focus with ATraDiff has been on optimizing sample efficiency to minimize the time required for environment interaction.\n    - Following the reviewer\u2019s suggestion, we quantify the time impact of ATraDiff, by recording the total training time during experiments on the D4RL Locomotion dataset, running on a single NVIDIA RTX 4090TI GPU. The results are shown in the table below, which are also included in Table 4 of the updated Appendix. The comparison between SAC/REDQ and SAC/REDQ with ATraDiff shows that integrating ATraDiff with RL methods leads to an extension of the training duration. However, *this is counterbalanced by the improved efficiency in data utilization*.\n\n    ||walker2d|hopper|halfcheetah|\n    |---|---|---|---\n    |SAC|6.5h|7h|7h|\n    |SAC_with_ATraDiff|15h|17h|16.5h|\n    |REDQ|6h|6.5h|6.5h|\n    |REDQ_with_ATraDiff|14.5h|16.5h|16h|\n\n    - Moving forward, we are committed to enhancing the time efficiency of ATraDiff. Our goal is to reduce both training and inference times, while maintaining its current performance levels. We appreciate the reviewer\u2019s valuable feedback and view it as a guiding direction for our future work.\n\n2. Line names ordering and color in figures\n\n    - Thanks for your valuable feedback. We have adjusted the line name ordering and color in Figures 3, 4, and 5 of the updated manuscript."
                    }
                },
                "number": 5,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701034766,
                "cdate": 1700701034766,
                "tmdate": 1700701356253,
                "mdate": 1700701356253,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "2gUQ7RcCxf",
                "forum": "Ng7OYC3PT8",
                "replyto": "T8sUsmx2NE",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer cnq2 (Part 2)"
                    },
                    "comment": {
                        "value": "3. Lack of comparison with SynthER\n    - First, we would like to clarify that **the task settings differ between our work and SynthER**. Our work primarily focuses on leveraging offline data to enhance online reinforcement learning performance. In contrast, SynthER aims to upsample the offline dataset using their data synthesizer. A crucial distinction lies in their methodology for online experiments, where they do not integrate the offline dataset, which is a key component in our approach. This fundamental difference in task settings initially led us to exclude a direct comparison with SynthER.\n\n    - Additionally, at the time of our submission to ICLR, SynthER was not yet published, appearing later in NeurIPS 2023. Given these circumstances, a direct comparison was not feasible in our initial submission.\n\n    - Following the reviewer\u2019s suggestion, we now include comparisons between our method and SynthER. Consistent with the discussion above, we consider two types of comparisons: **(I) Employ SynthER in our task setting, which we care most about**. To this end, we have conducted a comparative analysis in an **online** setting within the Meta-World Environments. This analysis is crucial to demonstrate the adaptability and effectiveness of our approach in dynamic and complex settings. **Our results indicate a significant performance advantage of our method over SynthER in these online environments**, as summarized in the table below. For more detailed results, including full performance curves, please refer to Section C.5 of the updated appendix.\n\n    |Task Name|SPiRL+SynthER|SPiRL+ours|RLPD+SynthER|RLPD+ours|\n    |---|:---:|:---:|:---:|:---:|\n    |multitask|0.45|0.61|0.52|0.75|\n    |sequencetask|0.49|0.57|0.62|0.80|\n    - **(II) Employ our method in SynthER\u2019s task setting, which is not the focus of our paper**. To this end, we have included an additional comparison in Section C.1 of the updated appendix. This comparison, conducted in the D4RL Locomotion environment under **offline** settings, demonstrates that our method can achieve comparable or superior results to SynthER.\n\n    |Task Name|TD3+BC|TD3+BC+SynthER|TD3+BC+ours|IQL|IQL+SynthER|IQL+ours|\n    |---|:---:|:---:|:---:|:---:|:---:|:---:|\n    | halfcheetah-random | 11.3 | 12.2 | 12.5 | 15.2 | 17.2 | 17.1|\n    | halfcheetah-medium | 48.1 | 49.9 | 52.3 | 48.3 | 49.6 | 53.1| \n    | halfcheetah-replay | 44.8 | 45.9 | 46.5 | 43.5 | 46.7 | 49.2 |\n    | halfcheetah-expert | 90.8 | 87.2 | 93.6 | 94.6 | 93.3 | 95.2 |\n    | hopper-random | 8.6 | 14.6 | 15.2 | 7.2 | 7.7 | 8.1|\n    | hopper-medium | 60.4 | 63.4 | 65.7 | 62.8 | 72.0 | 72.4 |\n    | hopper-replay | 64.4 | 53.4 | 64.7 | 84.6 | 103.2 | 103.6 |\n    | hopper-expert | 101.1 | 105.4 | 111.2 | 106.2 | 90.8 | 113.6 |\n    | walker-random | 0.6 | 2.3 | 2.1 | 4.1 | 4.2 | 4.3|\n    | walker-medium | 82.7 | 84.8 | 87.5 | 84.0 | 84.7 | 89.1 |\n    | walker-replay | 85.6 | 90.5 | 86.3 | 82.6 | 83.3 | 85.4 |\n    | walker-expert | 110.0 | 110.2 | 111.2 |111.7 |111.4 | 111.7 |\n\n\n    - In summary, our aforementioned experimental results validate that, **in both our task setting and SynthER\u2019s task setting, our trajectory-level generation outperforms the transition-level generation of SynthER**.\n\n4. Missing analysis on the quality of generated images\n\n    - Thanks for your valuable suggestion. In Section D of the updated appendix, we have included representative visualizations of our generated image trajectories. We present a variety of images generated under different conditions, including varying initial states and a range of tasks. The results demonstrate the robustness and effectiveness of our image generation method, consistently performing well across diverse scenarios and producing high-quality and temporally coherent image trajectories.\n\n5. Missing implementation detail and reproducibility\n\n    - Thank you for pointing out the missing implementation details. To address this, we have revised our manuscript and included the previously omitted methodology and implementation details, such as the architecture of the generation models, the conversion between images and states, and the pick-up strategy in Section A of the updated appendix. We hope that the revision improves the clarity and provides a thorough understanding of our method and procedure.\n\n    - Importantly, we will release our code upon acceptance to ensure reproducibility.\n\n    - If there are any remaining implementation details that require further clarification, please do not hesitate to let us know."
                    }
                },
                "number": 6,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700701108868,
                "cdate": 1700701108868,
                "tmdate": 1700701384634,
                "mdate": 1700701384634,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "ah1dH7yM2R",
                "forum": "Ng7OYC3PT8",
                "replyto": "T8sUsmx2NE",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Reviewer_cnq2"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Reviewer_cnq2"
                ],
                "content": {
                    "comment": {
                        "value": "Thanks for addressing my concerns and answering the questions. I am satisfied by the answers and the updated paper, which I believe to be now a stronger submission, I have thus increased my rating.\n\nOne more suggestion that I have for appendix D of the generated images, would be to show them side by side with real trajectories from the simulator, so that people that are not very familiar with the task can compare them more easily."
                    }
                },
                "number": 16,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700734179190,
                "cdate": 1700734179190,
                "tmdate": 1700734381410,
                "mdate": 1700734381410,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "4ka2i4cd4w",
            "forum": "Ng7OYC3PT8",
            "replyto": "Ng7OYC3PT8",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_GZoQ"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_GZoQ"
            ],
            "content": {
                "summary": {
                    "value": "This work trained diffusion model on offline data to generate more training trajectories so that it can accelerate online RL learning.\n\nThe authors conducted experiments on two settings 1) online RL setting (3 envs) and 2) offline-to-online (hybrid) setting (3 envs). The experimental results shows improvement comparing to baseline without using generated trajectories."
                },
                "soundness": {
                    "value": "2 fair"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "2 fair"
                },
                "strengths": {
                    "value": "- Using diffusion model to generate trajectories as data augmentation approach is novel, as far as I know.\n- The approach is relatively straightforward and can be combined with a wide family of RL approaches."
                },
                "weaknesses": {
                    "value": "- This approach assume the access to the ground truth reward function, which is a very impractical setting. Most of tasks evaluation of trajectories is expensive. \n- This work lack of discussion on the assumptions of offline datasets that is already available to the approach. Is it a medium quality dataset? Is it a low-quality dataset? Does it contains trajectories from optimal policy?  My understanding is that this will make substantial difference to the algorithm performance. The D4RL dataset contains different level of offline data. It would be good to clarify the setting of offline datasets.\n- In the online setting, the fair comparison would be using the offline data with the online algorithms. e.g., learning from demonstration approaches would be a better baseline. O.w. the proposed approach has an advantage of using more offline data. It's unclear to me whether the improvement comes from the access to the additional offline dataset or the proposed approach."
                },
                "questions": {
                    "value": "- Did the author consider replacing the query. of reward function from env by training a reward function from offline trajectories?\nPlease also refer to the weakness section."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "3: reject, not good enough"
                },
                "confidence": {
                    "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 4,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission4030/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1699401616713,
            "cdate": 1699401616713,
            "tmdate": 1699636365868,
            "mdate": 1699636365868,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "OIAPTZkJ13",
                "forum": "Ng7OYC3PT8",
                "replyto": "4ka2i4cd4w",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer GZoQ (Part 1)"
                    },
                    "comment": {
                        "value": "Thanks a lot for your insightful and inspiring comments! We provide the following clarifications in response to your concerns:\n\n1. Having access to the ground truth reward\n\n    - We understand the reviewer\u2019s concern on the potential costs associated with environment interaction and access to ground truth rewards. However, we would like to emphasize that **in the context of online training, RL methods inherently involve accessing the environment**, which aligns with the operational framework of our method. The core contribution of our work is the development of a versatile plug-in method, designed for integration with various online RL techniques.\n\n    - We would like to also highlight that our ATraDiff's interaction with the environment is deliberately constrained in our method. As detailed in Section 4.2, the environment access probability is set as $\\frac{\\rho}{(1-\\rho)L}$. Here $L$ represents the expectation length of generation, $T$ represents the real sample time, and $\\rho$ is the controlling variable. This ensures that environment interactions with ATraDiff occur only $\\rho * T$ times, a constant and limited number, thereby controlling the potential increase in time costs.\n\n    - We appreciate the reviewer\u2019s suggestion to train a reward prediction function from an offline dataset. To achieve this, we have followed the established methodology from prior work [Ref1], and implemented supervised training with the offline dataset. The effectiveness of this reward predictor has been demonstrated in our offline experiments, the results of which are included in Section C.1 of the updated appendix as well as shown in the table below. In our future work, we aim to adapt this reward predictor for online scenarios and further improve the performance.\n\n    |Task Name|TD3+BC|TD3+BC+ours_with_learned_reward|IQL|IQL+ours_with_learned_reward|\n    |---|:---:|:---:|:---:|:---:|\n    |halfcheetah-random|11.3 | 11.7 | 15.2 | 16.8|\n    |halfcheetah-medium|48.1 | 49.3 | 48.3 | 50.2|\n    |halfcheetah-medium-replay|44.8 | 45.3 | 43.5 | 45.6|\n    |halfcheetah-medium-expert|90.8 | 91.9 | 94.6 | 94.5|\n    |hopper-random|8.6 | 14.8 | 7.2 | 8.3 |\n    |hopper-medium|60.4 | 64.5 | 62.8 | 72.2|\n    |hopper-medium-replay| 64.4 | 65.2 | 84.6 | 97.0|\n    |hopper-medium-expert| 101.1 | 108.7 | 106.2 | 108.3 |\n    |walker-random| 0.6 | 3.4 | 4.1 | 4.0 |\n    |walker-medium|82.7 | 85.0 | 84.0 | 85.3 |\n    |walker-medium-replay|85.6 | 87.5 | 82.6 | 84.9|\n    |walker-medium-expert|110.0 | 111.1 | 111.7 | 111.6 |\n\n\n2. Quality of offline datasets\n\n    - We acknowledge that the quality of the offline dataset impacts overall performance in reinforcement learning. However, we would like to emphasize that **our work introduces a versatile tool for online reinforcement learning that operates effectively regardless of data quality**.\n\n    - In our experiments, we observe that 1) high-quality data significantly increase the performance gap between our method and the baseline; 2) importantly, our method is designed to be robust and it does not require exceptionally high-quality data to function effectively, as shown in the experiment with medium-quality data in Section C.3; 3) our method is comparable to or better than the baseline with low-quality data; and 4) even datasets with non-optimal trajectories are sufficient for our method to achieve reliable performance, as shown in the multi-task experiment in Fig. 5.\n\n    - Regarding the experiments on D4RL, in the original manuscript, we followed prior studies [Ref2] and presented the average performance across different datasets from the D4RL benchmark. Following the reviewer\u2019s suggestion and to provide a more comprehensive understanding, we have now included separate results for datasets of varying quality in Section C.3 of the updated appendix. The results in C.3 show how data quality impacts the effectiveness of our method and baselines across a spectrum of scenarios \u2013 while our method is comparable to or better than the baseline with low-quality data (like random data), the performance gap between our method and the baseline becomes much more pronounced with medium/high-quality data (like medium-expert data)."
                    }
                },
                "number": 3,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700700665257,
                "cdate": 1700700665257,
                "tmdate": 1700700665257,
                "mdate": 1700700665257,
                "license": "CC BY 4.0",
                "version": 2
            },
            {
                "id": "SmTHfFDQHA",
                "forum": "Ng7OYC3PT8",
                "replyto": "4ka2i4cd4w",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer GZoQ (Part 2)"
                    },
                    "comment": {
                        "value": "3. Unfair comparison with pure online methods\n\n    - We would like to clarify that **our comparison is fair, because both our method and the baselines use the same offline datasets**. Specifically, as mentioned in Section 5.2 of the original manuscript, our comparison primarily focuses on **offline-to-online** methods like SPiRL, RLPD, and PARROT, which, like ours, leverage offline datasets in conjunction with online learning. The distinction between our method and these baselines lies in our unique utilization of offline data. Therefore, our improvement indeed comes from our methodology.\n\n    - In addition, the reviewer suggested using learning from demonstration methods as baselines. However, such methods usually require high-quality and task-specific trajectories as a training dataset, which may not achieve good performance with low-quality datasets and would be worse than the offline-to-online baselines we compared with.\n\n    - Regarding the specific ways of utilizing offline data, the Related Work section details how our method significantly differs from these existing offline-to-online methods.\n\nReferences:\n\n[Ref1] Ksenia Konyushkova, Konrad Zolna, Yusuf Aytar, Alexander Novikov, Scott Reed, Serkan Cabi, and Nando de Freitas. Semi-supervised reward learning for offline reinforcement learning. NeurIPS Workshop, 2020.\n\n[Ref2] Philip J. Ball, Laura M. Smith, Ilya Kostrikov, and Sergey Levine. Efficient online reinforcement learning with offline data. ICML 2023."
                    }
                },
                "number": 4,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700700773225,
                "cdate": 1700700773225,
                "tmdate": 1700700773225,
                "mdate": 1700700773225,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    },
    {
        "review": {
            "id": "rKSgO55TzP",
            "forum": "Ng7OYC3PT8",
            "replyto": "Ng7OYC3PT8",
            "signatures": [
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_Kzne"
            ],
            "nonreaders": [],
            "readers": [
                "everyone"
            ],
            "writers": [
                "ICLR.cc/2024/Conference",
                "ICLR.cc/2024/Conference/Submission4030/Reviewer_Kzne"
            ],
            "content": {
                "summary": {
                    "value": "\"ATraDiff: Accelerating Online Reinforcement Learning with Imaginary Trajectories\" addresses the challenge of training autonomous agents with sparse rewards in online reinforcement learning (RL). The authors propose a novel approach called Adaptive Trajectory Diffuser (ATraDiff), which uses offline data to learn a generative diffusion model. This model generates synthetic trajectories that serve as data augmentation, thereby enhancing the performance of online RL methods.\n\nThe key advantage of ATraDiff is its adaptability, which allows it to handle varying trajectory lengths and mitigate distribution shifts between online and offline data. The simplicity of ATraDiff enables it to integrate seamlessly with a wide range of RL methods. Empirical evaluations show that ATraDiff consistently achieves state-of-the-art performance across various environments, with significant improvements in complex settings.\n\nThe paper also discusses related work in the areas of offline pre-training for online RL, diffusion models in RL, and data augmentation in RL. It provides a background on Markov Decision Processes (MDPs), diffusion models, and replay buffers, which are essential components of the proposed method.\n\nThe methodology section of the paper details the design and training of ATraDiff, its deployment in online RL, and an online adaptation mechanism that addresses distribution shifts. Experiments demonstrate the effectiveness of ATraDiff in improving the performance of online RL methods and offline-to-online RL algorithms in complicated environments."
                },
                "soundness": {
                    "value": "4 excellent"
                },
                "presentation": {
                    "value": "3 good"
                },
                "contribution": {
                    "value": "4 excellent"
                },
                "strengths": {
                    "value": "A solid and technically sound paper. Addresses an important problem in RL using generative (diffusion) models for generating imaginary trajectories. Generality is another strength of the method -  ATraDiff can be integrated with any online RL algorithm with a replay buffer. Authors address in a clever way varying trajectory lengths and potential distribution shifts. The efficiency of the method was confirmed by a diverse set of experiments and ablation studies."
                },
                "weaknesses": {
                    "value": "There is no data about trade-offs associated with using ATraDiff. Diffusion model data generation can be pretty slow. How does it affects wall-clock training time?"
                },
                "questions": {
                    "value": "Diffusion model data generation can be pretty time-consuming. How ATraDiff affects wall-clock training time for SAC and REDQ? It would be good to see more discussions and data on this topic."
                },
                "flag_for_ethics_review": {
                    "value": [
                        "No ethics review needed."
                    ]
                },
                "rating": {
                    "value": "6: marginally above the acceptance threshold"
                },
                "confidence": {
                    "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
                },
                "code_of_conduct": {
                    "value": "Yes"
                }
            },
            "number": 5,
            "invitations": [
                "ICLR.cc/2024/Conference/Submission4030/-/Official_Review",
                "ICLR.cc/2024/Conference/-/Edit"
            ],
            "domain": "ICLR.cc/2024/Conference",
            "tcdate": 1699574428050,
            "cdate": 1699574428050,
            "tmdate": 1699636365791,
            "mdate": 1699636365791,
            "license": "CC BY 4.0",
            "version": 2
        },
        "responses": [
            {
                "id": "LoourJNOfm",
                "forum": "Ng7OYC3PT8",
                "replyto": "rKSgO55TzP",
                "signatures": [
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "readers": [
                    "everyone"
                ],
                "writers": [
                    "ICLR.cc/2024/Conference",
                    "ICLR.cc/2024/Conference/Submission4030/Authors"
                ],
                "content": {
                    "title": {
                        "value": "Response to Reviewer Kzne"
                    },
                    "comment": {
                        "value": "Thanks a lot for your insightful and inspiring comments! We provide the following clarifications in response to your concerns:\n\n1. Lack of wall-clock training time in experiments\n\n\n    - We acknowledge the concern regarding the increased wall-clock training time associated with the use of diffusion model data generation in ATraDiff. ATraDiff is designed with a trade-off between sample efficiency and computational resource demands. We would like to emphasize that **in the context of online reinforcement learning, the most significant cost often lies in interacting with the real environment and data collection**. Consequently, our primary focus with ATraDiff has been on optimizing sample efficiency to minimize the time required for environment interaction.\n\n    - Following the reviewer\u2019s suggestion, we quantify the time impact of ATraDiff, by recording the total training time during experiments on the D4RL Locomotion dataset, running on a single NVIDIA RTX 4090TI GPU. The results are shown in the table below, which are also included in Table 4 of the updated Appendix. The comparison between SAC/REDQ and SAC/REDQ with ATraDiff shows that integrating ATraDiff with RL methods leads to an extension of the training duration. However, *this is counterbalanced by the improved efficiency in data utilization*.\n\n    ||walker2d|hopper|halfcheetah|\n    |---|---|---|---\n    |SAC|6.5h|7h|7h|\n    |SAC_with_ATraDiff|15h|17h|16.5h|\n    |REDQ|6h|6.5h|6.5h|\n    |REDQ_with_ATraDiff|14.5h|16.5h|16h|\n\n    - Moving forward, we are committed to enhancing the time efficiency of ATraDiff. Our goal is to reduce both training and inference times, while maintaining its current performance levels. We appreciate the reviewer\u2019s valuable feedback and view it as a guiding direction for our future work."
                    }
                },
                "number": 2,
                "invitations": [
                    "ICLR.cc/2024/Conference/Submission4030/-/Official_Comment"
                ],
                "domain": "ICLR.cc/2024/Conference",
                "tcdate": 1700699925565,
                "cdate": 1700699925565,
                "tmdate": 1700700692313,
                "mdate": 1700700692313,
                "license": "CC BY 4.0",
                "version": 2
            }
        ]
    }
]