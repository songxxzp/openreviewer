[
    {
        "id": "YN66lg0xUR",
        "forum": "uNrFpDPMyo",
        "replyto": "uNrFpDPMyo",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_XtqU"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_XtqU"
        ],
        "content": {
            "summary": {
                "value": "Key-value cache takes the majority of GPU memory in LLM serving, and its extent is continuously growing along with the model size and context length. Therefore, if we can reduce the key-value cache memory while maintaining the generation quality, we can accelerate the LLM inference. \bThe authors propose FastGen, a framework for efficient generative inference by applying on-the-fly key-value compression. They analyzed the structural patterns of each attention head of layers and then categorized four policies. By adopting the optimal policy based on profiling, FastGen achieves a comparable generation quality to the full-cache (non-compression) inference."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "- The authors provide abundant experiments with varying model sizes and tasks\n- The authors provide informative ablation studies\n- Their work will motivate various related work, for example,\n    - efficient kernel which aware of compression\n    - as the model size grows, more redundant key-values exist where we have more room to optimize"
            },
            "weaknesses": {
                "value": "- Since the inference time matters in practical serving, it would be helpful to understand more if the authors can provide corresponding results\n    - For example, how long does inference take compared to the full-cache strategy? I think it might become slower because the existing attention kernels may not efficiently deal with the sparsity\n    - How long does profiling take? Is it feasible for practical inference scenarios?\n- It seems that the StreamingLLM paper [1] is similar to this work. It sets sink tokens and performs local attention, where the sink tokens may correspond to $C_{special}$ (and maybe $C_{punct}$. Since the StreamingLLM paper has also recently been uploaded, it is unlikely to compare this paper with it. But it would be better if the differences in this paper were clarified.\n\n[1] Xiao, Guangxuan, et al. \"Efficient Streaming Language Models with Attention Sinks.\" arXiv preprint arXiv:2309.17453 (2023)."
            },
            "questions": {
                "value": "- What are the additional challenges for the models that use the grouped query attention technique?\n- In Figure 4, attention scores of special tokens always take more than half. Are there attention heads whose special token score is lower than half?\n- In Figure 5, compressing sometimes wins the full-cache strategy. How can we interpret such results?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "8: accept, good paper"
            },
            "confidence": {
                "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "value": "Yes",
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Reviewer_XtqU",
                    "ICLR.cc/2024/Conference/Submission6547/Senior_Area_Chairs"
                ]
            }
        },
        "number": 1,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission6547/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698292994618,
        "cdate": 1698292994618,
        "tmdate": 1700800787469,
        "mdate": 1700800787469,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "gc87DBhLPk",
        "forum": "uNrFpDPMyo",
        "replyto": "uNrFpDPMyo",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_rrTE"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_rrTE"
        ],
        "content": {
            "summary": {
                "value": "This paper propose an adaptive KV cache compression technique to reduce the memory footprint of generative inferences of LLMs. The authors fist perform targeted profiling to indentify the intrinsic structure of attention modules, and then build an adaptive KV cache by evicting long-range contexts on attention heads emphasizing local contexts, removing non-special tokens on attention heads centered on special tokens, and using only the standard KV cache. The experimental results show the adaptive KV cache achieves large reduction on GPU memory consumption with trivial geneation quality loss."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "2 fair"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "1. The paper works on an important topic, i.e., reducing the memory footprint of GPU during generative inferneces of LLMs.\n2. The paper flows well."
            },
            "weaknesses": {
                "value": "1. The model profiling part is not clear. Did the authors do a profiling for each model on all datasets, or each model on a single dataset. \n2. The model profiling results have a huge impact on the final KV cache compression results. Although the authors show empirical data supporting the structure of the attention map is stable at different positions for all attention heads, the authors still need to discuss what if the structure of the attention map is not stable."
            },
            "questions": {
                "value": "Please comment the two points in the weakness section."
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "6: marginally above the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 2,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission6547/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698621581818,
        "cdate": 1698621581818,
        "tmdate": 1699636738413,
        "mdate": 1699636738413,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "aNqNdIZp5T",
        "forum": "uNrFpDPMyo",
        "replyto": "uNrFpDPMyo",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_9wxD"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_9wxD"
        ],
        "content": {
            "summary": {
                "value": "This paper proposes FastGen, an adaptive key-value (KV) cache compression method to reduce the memory footprint and accelerate inference for large language models (LLMs). The key ideas are: 1) Profiling attention modules to discern their intrinsic structures, such as primarily attending to local contexts or special tokens. 2) Constructing the KV cache adaptively based on the recognized structure to compress less useful contexts. 3) The lightweight attention profiling guides the KV cache compression without expensive fine-tuning.\n\nThe experiments are conducted on LLaMa models with sizes from 7B to 65B parameters on diverse generative tasks. Results show FastGen effectively compresses the KV cache to 40-50% smaller with negligible quality loss. It also outperforms non-adaptive baselines."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "Strengths:\n-----------------\n+ Adaptively compressing KV cache better aligns with model-specific attributes without retraining.\n+ Comprehensive experiments verify FastGen works for diverse models and tasks. Up to 50% compression on 65B LLaMa with little quality loss is remarkable.\n+ Ablation studies provide good insight into the design choices. The profiling method and compression policies are well motivated."
            },
            "weaknesses": {
                "value": "Weaknesses:\n-----------------\n- The compression policies are combined in a naive way. More advanced adaptive selection could be explored (see detailed in C1).\n- No experiment on encoder-decoder models. The efficacy on them is unclear (see detailed in C2). \n- More analysis on the overhead of profiling could be provided (see detailed in C3)."
            },
            "questions": {
                "value": "Comments:\n-----------------\nC1:\tThe compression policies are combined in a simple naive way in FastGen, by just taking the union of multiple policies such as Cspecial + Cpunct + Cfrequent. This straightforward combination approach has several potential issues. First, is it possible that the union combination may introduce redundancy, as different policies could select overlapping important content, leading to suboptimal compression ratios? More intelligent strategies should consider the complementarity between modules to avoid duplicating the key contexts. Second, is it possible that existing policies may not be fully compatible? Some combinations could introduce conflicts and hurt generation quality. More systematic analysis should examine the compatibility between policies.\n\nC2:\tThe experiments in the paper are all conducted on the decoder-only LLaMa models, without validation on encoder-decoder models like BART and T5. These models are also widely used for generative tasks, so the efficacy of FastGen on them remains unclear. This is worth further investigation. \n\nC3:\tThe paper lacks sufficient analysis on the overhead and time cost of conducting attention profiling, which is important to judge the efficiency of FastGen in real deployment. Specifically, the time complexity of attention profiling needs analysis, and concrete profiler time under different model sizes should be provided or disscussed. Moreover, analyzing the extra memory or GPU memory required for the profiler and assessing its impact on deployment is necessary. In summary, quantitatively analyzing the resource overhead for profiling and demonstrating effective solutions to reduce it could strengthen the practicality of FastGen in real-world usage. Further experiments on optimized profiling and its cost-benefit trade-off with compression performance could provide more comprehensive insights into the efficacy of the approach."
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "8: accept, good paper"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 3,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission6547/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698662301479,
        "cdate": 1698662301479,
        "tmdate": 1699636738293,
        "mdate": 1699636738293,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "TKcKski2aK",
        "forum": "uNrFpDPMyo",
        "replyto": "uNrFpDPMyo",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_BiHE"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_BiHE"
        ],
        "content": {
            "summary": {
                "value": "The paper addresses the memory footprint reduction of LLMs during inference, in which the recent problem is the KV cache eviction/compression policies. The paper proposes an adaptive KV cache compression technique that operates in two stages, i) diagnose through profiling based on the attention heads and ii) applying an eviction strategy per each layer."
            },
            "soundness": {
                "value": "4 excellent"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "4 excellent"
            },
            "strengths": {
                "value": "- Having an adaptive KV cache for each of the attention module type is a really interesting and exciting idea.\n- No fine-tuning costs of the proposed method is commendable. \n- The paper clearly positions within the body of existing literature, by distinguishing the proposed method as an adaptive and a diverse set of eviction strategies.\n- The paper is clearly written, the presentation is great, easy to follow along and digest the concepts."
            },
            "weaknesses": {
                "value": "- Although, the idea of adaptive KV cache compression sounds interesting, what is the overhead of book-keeping to support this adaptive and diverse ability based on the type of the attention? This is not discussed anywhere in the paper?\n  - That is, each layer id will be mapped to a eviction policy and is deployed with the model at hand. \n  - Next, what is the added computational complexity both asymptotically as well experimentally.\n- Table 3 shows an ablation on the policy order, why is this needed? Is the policy fixed per layer and the order will be dictated by the layer that needs a certain policy determined by the diagnosis step. Is it not true, clarify on this please.\n- Another interesting exploration/ablation to see is to experiment with long context tasks. What if the downstream task requires a long context window then what can be the best set of eviction strategies and the corresponding expected win rates?\n### Minor comments:\n- \"The resulting distribution is visualized in Figure As in Figure 3.\" can be rewritten as \" Figure 3 shows the resulting distribution\"\n- A minor nit, the paper has too much forward referencing, which disturbs the flow of reading and attention, general recommendation in research papers is to avoid such referencing..!\n- Better to define the new terms such as win-rate, KV cache budget, etc. when they were introduced for the first time. Similar applies to abbreviations when they are introduced first time, expand them, for the sack of saving readers time to search internet."
            },
            "questions": {
                "value": "Please refer to weaknesses section for questions.\n\n## Post rebuttal comments\n\nThe responses and the detailed analysis in the Tables1,2 address my concerns.\n\nHowever the authors seem to reserve one of the suggestions to the future works. Overall, very satisfied with the impressive work in the paper and raising the score to clear accept."
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "8: accept, good paper"
            },
            "confidence": {
                "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Senior_Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Reviewer_BiHE"
                ]
            }
        },
        "number": 4,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission6547/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698705269922,
        "cdate": 1698705269922,
        "tmdate": 1700724190291,
        "mdate": 1700724190291,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "lfT0rmabIS",
        "forum": "uNrFpDPMyo",
        "replyto": "uNrFpDPMyo",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_XU71"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_XU71"
        ],
        "content": {
            "summary": {
                "value": "This paper discussed how to apply adaptive KV cache compression to improve the system efficiency, which conducts profiling to discern the intrinsic structure of attention modules. The proposed method can be deployed without resource-intensive fine-tuning or re-training. Solid empirical study was conducted to verify the efficiency and effectiveness of the proposed method."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "4 excellent"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "- This paper solves a critical research problem about efficient LLM inference with advanced algorithm design. The designed algorithm is straightforward and effective. \n\n- The presentation of the technical discussion is accurate and well-organized.\n\n- The organization of the evaluation sections is clear, and the presented results show the advance and efficiency of the proposed method."
            },
            "weaknesses": {
                "value": "- Based on my understanding, the proposed algorithm specializes in the most classic softmax-based attention. Is it possible to include a small section discussing the limitations of the proposed algorithm for more complicated attention mechanisms and some preliminary ideas about supporting those mechanisms in the future?\n\n- Given the scale of the benchmarked model (llama-70B fp16 on A100-80G), I guess there is a missing detail about the parallel strategies applied in the experiments."
            },
            "questions": {
                "value": "Would it be possible to address the minor issues I listed in the weakness section?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "8: accept, good paper"
            },
            "confidence": {
                "value": "5: You are absolutely certain about your assessment. You are very familiar with the related work and checked the math/other details carefully."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 5,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission6547/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698806014029,
        "cdate": 1698806014029,
        "tmdate": 1699636738031,
        "mdate": 1699636738031,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "w8AOju6vTN",
        "forum": "uNrFpDPMyo",
        "replyto": "uNrFpDPMyo",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_XPHq"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission6547/Reviewer_XPHq"
        ],
        "content": {
            "summary": {
                "value": "This study introduces a lossy adaptive KV cache compression technique aimed at reducing the memory footprint of LLMs. The paper is guided by two key insights:\n\nDifferent attention heads typically exhibit distinct structures.\nThese attention head structures remain relatively consistent during inference.\nThe paper profiles the prompt encoding phase to identify the intrinsic structures of various attention heads and uses these structures to determine the optimal compression policy. This policy, determined during the prompt encoding phase, is then applied uniformly throughout all token generation iterations. The compression policies are combinations of the following four basic ones: special, punct, local, and frequent.\n\nThe results demonstrate that this approach yields improved model quality compared to fixed KV compression methods, with KV cache budgets ranging from 30% to 100%. The ablation study further reveals that frequency- and special-token-based compression policies have the most significant impact on compression ratio and win rate."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "- The paper introduces valuable insights drawn from LLMs: 1. Different structure in different attention 2. The same head structures persist. These insights are well-supported with empirical data and references to existing literature. \n\n- The authors leverage these insights to come up with an effective compression method that adapts to the structure of each attention head. The results show consistent compression rate and model quality improvement over prior SoTA fixed compression mechanisms."
            },
            "weaknesses": {
                "value": "- The paper could benefit from presenting actual GPU inference performance results using FastGen and comparing them with other compression methods. Additionally, providing a runtime breakdown would offer more insights into the overhead caused by the profiling, compression, and decompression processes.\n- It would be nice to look into the structure of KV in the multi-query attention design."
            },
            "questions": {
                "value": "-"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "8: accept, good paper"
            },
            "confidence": {
                "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "value": "Yes",
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Senior_Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission6547/Reviewer_XPHq"
                ]
            }
        },
        "number": 6,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission6547/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698832793525,
        "cdate": 1698832793525,
        "tmdate": 1699636737901,
        "mdate": 1699636737901,
        "license": "CC BY 4.0",
        "version": 2
    }
]