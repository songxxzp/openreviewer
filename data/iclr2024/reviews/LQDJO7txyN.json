[
    {
        "id": "lfcKLdlIeO",
        "forum": "LQDJO7txyN",
        "replyto": "LQDJO7txyN",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_yBgF"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_yBgF"
        ],
        "content": {
            "summary": {
                "value": "This paper studied the problem of test-time adaptation which directly performed model adaptation and inference on test data. To solve this problem, this paper introduced a novel prototypical influence function (PIF) to regularize the adaptation process. Furthermore, in order to handle the high computational complexity of the original PIF regularizer, this paper presented two efficient approximations with respect to the influence function and the class prototype. Experimental results supported the superior performance of the proposed PIF regularizer on multiple benchmark data sets."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "4 excellent"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "**Originality:** This paper studied the test-time adaptation by investigating the influence of test data on the loss of model-trusting data. This motivated the development of a prototypical influence function (PIF) regularizer. The computationally expensive hessian matrix and unavailable model-trusting data might limit the applications of PIF. Thus, this paper further provided more practical approximations of PIF and validated the effectiveness of these approximations on several benchmarks.\n\n**Quality:** The proposed PIF regularizer is well-motivated. It is formulated by the influence of test data on the model parameters. The proposed approximations also allow the PIF regularizer to be efficiently computed in real-world test-time adaptation scenarios. The experiments also demonstrate that with the proposed PIF regularizer, existing test-time adaptation methods can achieve much better performance.\n\n**Clarity:** The paper is well-written. It clearly derived the PIF regularizer as well as its approximations. The experimental settings are easy to follow. The ablation studies on the approximation strategies and the weighting strategies further validate the superior training procedures given in Alg. 1.\n\n **Significance:** Test-time adaptation is a practical solution for efficient inference of a pre-trained model on the corrupted test data. The derived influence function in this paper provides a solid explanation on the adaptation process during testing. The fast approximation further allows the proposed techniques to be applied to real-world scenarios."
            },
            "weaknesses": {
                "value": "(1) The major concern of the PIF regularizer is the approximation error over the influence function and the class prototype. \n\n- First, it approximates the Hessian matrix to the identity matrix and then uses the cosine similarity between two gradients. Though empirical evaluation shows the good performance of such approximations, it is unclear regarding the approximation error between this approximation and the original term in Eq. (4), and how this error affects the adaptation performance. \n- Second, it approximates the model-trusting data with the weight prototypes. It is confusing whether the weight prototypes can always be positively associated with the unseen model-trusting data during testing. Considering the distribution shift between training and test data, it might be more convincing to explain under what conditions, the correlation between the weight prototypes and the unseen model-trusting data can guarantee the accurate approximation of Eq. (4).\n\n(2) The computational complexity of Algorithm 1 is not analyzed, especially for the step of updating parameters of the BN layer using Eq. (11). More specifically, what is the complexity of the PIF regularizer with respect to the parameters of BN layers?\n\n(3) The selection of hyperparameters is unclear. The experiments show that different values of $\\gamma$ and $\\beta$ are used in different data sets. However, it is not explained how these hyperparameters are selected in the test-time adaptation settings."
            },
            "questions": {
                "value": "(1) Why is the weighting strategy applied for deriving the approximation in Eq. (8)?\n\n(2) It might be more convincing to provide the impact of PIF on the test-time adaptation regarding the adaptation efficiency.\n\n\n\n\n################################################################\n\nSince the authors did not address my concerns, I would like to revise my score from 6 to 5. The major concerns include (1) the gap between the approximated and exact calculation of IF values; (2) the unclear assumption behind weight prototypes; (3) the unclear hyperparameter optimization; and (4) the unexplained weighting strategy."
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Senior_Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Reviewer_yBgF"
                ]
            }
        },
        "number": 1,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission1840/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698096406762,
        "cdate": 1698096406762,
        "tmdate": 1700928215623,
        "mdate": 1700928215623,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "ScAFJGURBW",
        "forum": "LQDJO7txyN",
        "replyto": "LQDJO7txyN",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_SDLt"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_SDLt"
        ],
        "content": {
            "summary": {
                "value": "The paper propose to regularize Test-Time Adaptation methods by utilizing Prototypical Influence Function (PIF) for regularization. It uses the influence function to assess the influence of adapting a test data point on the loss for high-confident samples. To make the calculation of the influence function practical for TTA the authors propose some approximations. The proposed TTA with PIF regularization results the accuracy of some TTA methods."
            },
            "soundness": {
                "value": "1 poor"
            },
            "presentation": {
                "value": "2 fair"
            },
            "contribution": {
                "value": "2 fair"
            },
            "strengths": {
                "value": "S1. The idea to introduce prototypical functions is interesting (and challenging). The authors proposed two original modifications to the original influence function calculation to make the computation feasible.  \nS2. Evaluations show the effectiveness of the proposed method."
            },
            "weaknesses": {
                "value": "W1. There are many details missing about the hyper-parameters:\n \n  a) From the implementation details it looks like the method requires specific parameter fine tuning-per method. As in the Supplement B, for each dataset and each baseline method, different sets of parameters were used. Can we at least use one set of parameters for a dataset?\nFig. 4 suggests that we can simply use large gamma parameter and achieve good results. But in the Supplement B some very small values were used. Can we see Fig. 4 for example ImageNet-C + EATA or ImageNet-3DCC + PIL?\nAlso for SAR very large gamma value was used (larger than maximum value in Fig. 4). Can You explain here? Also there seems to be a typo in the table for CIFAR-10-C and SAR\n    \n  b) a similar question arises for the Beta parameter. Beta = 0 for CIFAR and 2 for ImageNet. What happened if other parameters were used?\n   \n  c) I assume oracle hyper-parameter selection was used to compute the optimal parameters for the proposed method. Can the authors provide how the search was run, i.e., what was the range of parameters?\n   \n  d) What was the learning rate in the experiments - I assume it was taken from the baseline model. When adding your method, do you use the same learning rate as the baseline or also tune it separately?\n\nW2. How is the model-trusting data defined? I assume you have used some entropy or maximum confidence threshold, but no details are given in the paper. Also, how sensitive is the method to this choice?\n\nW3. The method is evaluated only on methods that update Batch Norms. Can we apply it to some other methods that update the whole model? For example COTTA, AdaContrast, Robust Mean Teacher?\n\nW4. The gamma parameter currently uses decay-technique which requires setting a maximum number of iterations. This is a serious problem for TTA as we cannot know the maximum number of iterations. Can authors elaborate on that? Ideally, the authors would use a technique here that does not require maximum number of iterations.\n\nW5. There is no source-code provided in the supplement which reduces the potential impact. It would be great to provide some version of the code for the rebuttal. \n\nW6. In the contributions the authors mention: \"PIF regularizer which satisfies the limited access and low-resource constraints of TTA\" - however, the low-resources constraint is never analyzed or discussed in depth later on."
            },
            "questions": {
                "value": "Q1. Batch size of 128 was used in the experiments. What would happen if we used some smaller batch size, for example 16? Are the gains of the proposed method more visible at large batches?\n\nQ2.  About model-trusting data. It is referred a lot with different context, but it is not clear why is it that important. It is defined as data with low entropy. \nIn one place the author writes \u201eIt is crucial to minimize the loss of model-trusting data in TTA\u201d. This sentence for example requires more explanation, i.e., if the model is already good at predicting those samples, it is not clear that reducing the loss on those samples will further improve the accuracy? \nIs the motivation here that we want to focus on optimizing only the samples with high entropy, to focus only on \u201ereliable\u201d samples, as it is commonly used in methods based on pseudo-labeling?\n\nQ3. In Fig. 1, do you need some extra normalization for the models weights?\n\nQ4. How the changes in the feature extractor (even as small as chaning the BN layers parameters) influance the calculation of PIF? How the method works for a longer sequences?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 2,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission1840/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698672218519,
        "cdate": 1698672218519,
        "tmdate": 1699636114089,
        "mdate": 1699636114089,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "hmv5l7IgUU",
        "forum": "LQDJO7txyN",
        "replyto": "LQDJO7txyN",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_bVft"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_bVft"
        ],
        "content": {
            "summary": {
                "value": "The paper introduces a TTA method that calculates influence function as supervised regularization signals for adaptations. In order to apply the influence function, the authors make two modifications to adapt the method to the TTA setting. By appending the PIF regularizer to previous TTA methods, the authors conduct experiments to demonstrate the performance improvements."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "2 fair"
            },
            "strengths": {
                "value": "1. The authors claim that they are the first paper to apply influence function (IF) to TTA settings.\n2. The authors make efforts to address the difficulties of applying IF to TTA.\n3. Diverse experiments are conducted to show the effectiveness of the method.\n4. Overall, the paper is well-organized and technically sound."
            },
            "weaknesses": {
                "value": "1. The presentation of the prototypical approximation is confusing. According to my understanding, due to test data being inaccessible, instead of using model-trusting test data, the authors are actually comparing the target test sample with the model's original parameters or original training data. Therefore, the method considers the model as a prototypical network and aims to align the target test sample's gradient to the prototype's gradients. That means the overall purpose of the method is aligning the gradients of the two loss terms in $\\hat{\\boldsymbol{\\theta}}\\_{\\epsilon, \\mathbf{x}^t} \\stackrel{\\text{ def }}{=} \\operatorname{argmin}\\_{\\boldsymbol{\\theta} \\in \\Theta} \\mathcal{L}\\left(\\mathcal{D}_{\\text {tr }} ; \\boldsymbol{\\theta}\\right)+\\epsilon \\mathcal{L}\\left(\\mathbf{x}^t ; \\boldsymbol{\\theta}\\right)$. The only difference is using prototypes to replace $\\mathcal{D}\\_{tr}$. If I'm right, I don't see any reason to complicate the introduction of this method like what it was in the paper.\n2. The experimental performance seems not prominent. And for different weighting strategies, only hard weight works fine. While the improvements are limited, the method introduces two extra hyperparameters, which raises concerns about whether using this PIF regularizer is a practical option."
            },
            "questions": {
                "value": "1. Why didn't the authors compare SAR with LayerNorm and GroupNorm? As shown in SAR, SAR works much better using LN and GN. If PIF cannot be used in LN and GN and also cannot beat the results, can you convince me why I need PIF? Or can the author figure out how PIF can be used in LN and GN cases?\n2. If I understand the paper right, PIF is basically aligning test samples with prototypes in gradient space. In such a case, one natural question is have you tried aligning them in embedding space? How does it perform? If I can align the first-order derivative, can I align the second-order? Will it provide a better performance?\n\nOverall, the paper is interesting, but the contributions are not enough in my opinion."
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "3: reject, not good enough"
            },
            "confidence": {
                "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 3,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission1840/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698724424828,
        "cdate": 1698724424828,
        "tmdate": 1699636114002,
        "mdate": 1699636114002,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "ZyW7Txb9n2",
        "forum": "LQDJO7txyN",
        "replyto": "LQDJO7txyN",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_nQF9"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_nQF9"
        ],
        "content": {
            "summary": {
                "value": "This paper proposes utilizing the influence function for test-time adaptation. Since large time and computation complexity is required for influence function calculation, and since it is not adequate for using large amount of time and computation for test time adaptation regarding the problem's property, it proposes utilizing the weight of the model's last layer as prototype features."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "- This paper suggests a scalable prototypical influence function which is adequate for test time adaptation."
            },
            "weaknesses": {
                "value": "- Since there is no label for test dataset, the test loss is often utiilized as entropy. Although I agree on that it is difficult to suggest new type of loss, I still think we cannot prove the learning direction is correct when trained with this type of loss. It could mean the influence calculated from the possibly wrong loss is also wrong."
            },
            "questions": {
                "value": "- I understood the weight vector of last layer may serve as a prototype of each class when there is no domain shift. However, if there is domain shift, can it also work as a prototype as the feature of source and features of target are distributed differently (more than Figure 1)? Or can we quantify the difference?\n- Can authors explain the scheme of random projection (which means approximations of the hessian to the identity) in more details? I think this trick is quite important for your method to reduce the computation complexity, yet it is not explained enough in the paper. \n- Why authors utilize L_PIF as regularizer? What happen if we do not use L_TTA? Why it would fail?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "value": "Yes",
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Reviewer_nQF9",
                    "ICLR.cc/2024/Conference/Submission1840/Senior_Area_Chairs"
                ]
            }
        },
        "number": 4,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission1840/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698815976827,
        "cdate": 1698815976827,
        "tmdate": 1700479742640,
        "mdate": 1700479742640,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "5CczgrFLnO",
        "forum": "LQDJO7txyN",
        "replyto": "LQDJO7txyN",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_hjny"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission1840/Reviewer_hjny"
        ],
        "content": {
            "summary": {
                "value": "The paper focuses on the test-time adaptation (TTA) task using the influence function. The proposed method aims to minimize the influence of test data on the loss of model-trusting data, which is approximated by class prototypes derived from the weights of the last layer in the classifier. Since the evaluation of influence functions is often computationally expensive and TTA is subject to resource constraints, two approximations are employed: parameter restriction and random projections. In the experiments, the proposed method consistently shows superior performance."
            },
            "soundness": {
                "value": "2 fair"
            },
            "presentation": {
                "value": "2 fair"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "Introducing influence functions to TTA is reasonalbe, and the approach of combining influence function and TTA is not straightforward. Therefore, the proposed method could be a valuable contribution to the TTA community. The manuscript is well-written and easy to follow."
            },
            "weaknesses": {
                "value": "1. Additional support for influence function approximations\n\n* The paper uses two approximation strategies for the influence function: parameter restriction and random projections, following previous work. Since this is the first application of the influence function in TTA, it is important to provide empirical evidence of the validity and impact of each approximation technique in TTA. A comparison with the exact influence function values, possibly by evaluating similarity or TTA performance, would be informative.\n\n* The claim that normalization of gradients reduces error and improves stability needs stronger support. Direct comparisons of the influence function values would be more convincing.\n\n2. Time complexity and memory requirement\n\n* While approximations are applied to the influence function, it would be beneficial to discuss the time and memory requirements. A comparison of wall clock time and memory usage between the baseline and the proposed method could provide insight into the computational requirements.\n\n3. Sensitivity of hyperparameters\n\n* They only provide the ablation study on $\\gamma$ for one setting of CIFAR-10-C. They mentioned that \"sustained robust performance of the hyperparameter beyond a certain threshold\". However, the optimal choice of $\\gamma$ provided in Table 5 varies, and the performance gap is quite small for some settings. It would be better to provide the sensitivity experiments on the other settings and datasets.\n\n* Also, they did not provide the sensitivity results for $\\beta$. It would be great to provide them.\n\n4. Presentation issues\n\n* The full name of 'PIF' should be included in the abstract.\n* It would be helpful to move the paragraph related to Figure 1 from the Introduction section to the Proposed Methods section. This experimental evidence of the prototypes would be better provided after a detailed explanation of the model confidence data, making it easier to understand.\n* In Eq. (6), the right-hand side may need to be divided by $M$ because $\\mathcal{L}(\\mathcal{M})$ is the average loss on $\\mathcal{M}$.\n* Provide captions for Figure 3, and make sure that the basic experimental settings, such as the dataset, are described in the manuscript for clarity."
            },
            "questions": {
                "value": "Please answer the questions in the Weaknesses section."
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "value": "Yes",
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Senior_Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission1840/Reviewer_hjny"
                ]
            }
        },
        "number": 5,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission1840/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698843632248,
        "cdate": 1698843632248,
        "tmdate": 1699636113854,
        "mdate": 1699636113854,
        "license": "CC BY 4.0",
        "version": 2
    }
]