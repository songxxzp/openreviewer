[
    {
        "id": "WmzpGi2nvj",
        "forum": "4pW8NL1UwH",
        "replyto": "4pW8NL1UwH",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission558/Reviewer_XkkK"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission558/Reviewer_XkkK"
        ],
        "content": {
            "summary": {
                "value": "In this paper, the authors propose a new training method for language model reinforcement finetuning. Instead of conducting pairwise comparisons as in the conventional RLHF setting, they propose to sample multiple responses and score each of them with their log-likelihood. After that, they assign the probability for each sample response with the score and maximize the expected reward given by the learned reward model. They found that the method has a close connection with direct preference optimization (DPO). They conduct experiments on HH and TL;DR datasets to confirm the effectiveness of their methods.\n\nIt is interesting to see a new approach proposed for RLHF with a tight connection with previous methods. However, the paper may have the following flaws:\n1. The LIRE objective is essentially the original policy gradient objective. In Equation (5), the author have $$J(\\theta) = -\\sum_{x}\\sum_{y} P_{\\pi_\\theta}(y|x, A) R(x, y),$$ where $P_{\\pi_\\theta} (y|x, A) \\propto \\exp( \\frac{1}{T} \\sum_k \\log P(y_k | x))$. The problem arises when $T=1$, we then have $P_{\\pi_\\theta} (y|x, A) = \\prod_k P(y_k | x) = P(y|x)$. This suggests that $$J(\\theta) = -\\sum_{x}\\sum_{y} P_{\\pi_\\theta}(y|x) R(x, y),$$ which is equivalent sampling multiple trajectories in RL for each query. It looks to me that the only difference from the original policy gradient objective that could be made here is choosing $T \\not=1$. However, it is not well justified to have such a practice. It is also documented in Table 10 that varying $T$ introduces slight fluctuation in performance, which does not seem to have a consistent pattern.\n2. The performance improvement is marginal. In Table 3 and Table 4, the performance of LIRE is only slightly better than PPO, especially when there are multiple responses sampled."
            },
            "soundness": {
                "value": "2 fair"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "2 fair"
            },
            "strengths": {
                "value": "It is interesting to see a new approach proposed for RLHF with a tight connection with previous methods."
            },
            "weaknesses": {
                "value": "1. The LIRE objective is essentially the original policy gradient objective. In Equation (5), the author have $$J(\\theta) = -\\sum_{x}\\sum_{y} P_{\\pi_\\theta}(y|x, A) R(x, y),$$ where $P_{\\pi_\\theta} (y|x, A) \\propto \\exp( \\frac{1}{T} \\sum_k \\log P(y_k | x))$. The problem arises when $T=1$, we then have $P_{\\pi_\\theta} (y|x, A) = \\prod_k P(y_k | x) = P(y|x)$. This suggests that $$J(\\theta) = -\\sum_{x}\\sum_{y} P_{\\pi_\\theta}(y|x) R(x, y),$$ which is equivalent sampling multiple trajectories in RL for each query. It looks to me that the only difference from the original policy gradient objective that could be made here is choosing $T \\not=1$. However, it is not well justified to have such a practice. It is also documented in Table 10 that varying $T$ introduces slight fluctuation in performance, which does not seem to have a consistent pattern.\n2. The performance improvement is marginal. In Table 3 and Table 4, the performance of LIRE is only slightly better than baselines, especially when there are multiple responses sampled."
            },
            "questions": {
                "value": "Could you provide a possible explanation of why PRO and RRHF perform significantly worse when the number of candidates is small (e.g. Table 3)?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 1,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission558/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698819562459,
        "cdate": 1698819562459,
        "tmdate": 1699635983253,
        "mdate": 1699635983253,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "LU9hyUAA00",
        "forum": "4pW8NL1UwH",
        "replyto": "4pW8NL1UwH",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission558/Reviewer_Vfn5"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission558/Reviewer_Vfn5"
        ],
        "content": {
            "summary": {
                "value": "The paper proposes LIRE, a listwise optimization framework for aligning language model generations with human preferences. The key contributions are:\n\n1. Formulates preference alignment as directly optimizing rewards in a listwise manner over multiple candidate responses. This avoids explicit pairwise comparisons.\n\n2. Proposes a listwise softmax loss that incorporates reward scores into the training objective. Higher rewards are encouraged while lower ones are depressed.\n\n3. Introduces a self-enhancement algorithm with iterative data sampling and policy updates to progressively improve reward.\n\n4. Experiments show LIRE achieves superior and consistent performance on dialogue and summarization tasks. Benefits increase as candidate pool size grows.\n\n5. Analysis provides insights into LIRE's derivatives and relation to other preference learning methods like DPO. Overall, it demonstrates an effective listwise approach to preference alignment."
            },
            "soundness": {
                "value": "3 good"
            },
            "presentation": {
                "value": "3 good"
            },
            "contribution": {
                "value": "2 fair"
            },
            "strengths": {
                "value": "Here are some key strengths of the LIRE paper:\n\n1. Flexible training framework: LIRE loss neatly incorporates rewards into the objective. Self-enhancement via iterative sampling boosts performance. Easy to extend.\n\n2. Strong empirical results: Experiments cover various models, datasets, and evaluation metrics. LIRE consistently outperforms or matches state-of-the-art methods. Scales well.\n\n3. Well-written: The paper is clearly structured and easy to follow. Experiments are thorough. Limitations are discussed. Figures aid understanding."
            },
            "weaknesses": {
                "value": "While LIRE makes solid contributions, there are some limitations and weaknesses that could be addressed:\n\n1. Narrow evaluation: Mainly tests dialogue and summarization. Could be extended to other LLM tasks.\n\n2. Limited analysis: Does not perform ablation studies to isolate benefit of components. Hyperparameter sensitivity is unclear.\n\n3. Lacks user studies: Human evaluations could provide more insight beyond automatic metrics.\n\nOverall, while LIRE has impressive empirical performance, the theoretical analysis is limited. Exploring more advanced prompting strategies and scaling limits would strengthen the approach. But the paper makes excellent progress on an important problem."
            },
            "questions": {
                "value": "None"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "6: marginally above the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 2,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission558/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1698830978309,
        "cdate": 1698830978309,
        "tmdate": 1699635983164,
        "mdate": 1699635983164,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "sk5YCvV84I",
        "forum": "4pW8NL1UwH",
        "replyto": "4pW8NL1UwH",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission558/Reviewer_6BAr"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission558/Reviewer_6BAr"
        ],
        "content": {
            "summary": {
                "value": "The paper introduces LIRE, a new method that improves upon the standard Reinforcement Learning with Human Feedback for training Large Language Models. LIRE mitigates the generation of toxic content by LLMs by using a listwise approach to reward optimization, without relying on complex models or extensive hyperparameter tuning. The authors demonstrate that LIRE achieves stable performance and exceeds existing preference alignment methods, signifying a promising direction for creating safer LLMs."
            },
            "soundness": {
                "value": "2 fair"
            },
            "presentation": {
                "value": "2 fair"
            },
            "contribution": {
                "value": "2 fair"
            },
            "strengths": {
                "value": "1. The paper investigates the impact of a listwise loss function within the Reinforcement Learning with Human Feedback (RLHF) framework. The study elucidates the benefits of the listwise approach, particularly in terms of stability and efficacy.\n\n2. By drawing connections between the proposed listwise loss method and Distributional Policy Optimization (DPO), the authors provide  theoretical insights. This comparison helps in positioning the proposed method within the broader landscape of reinforcement learning and policy optimization, enhancing the understanding of its advantages.\n\n3. The experiments are comprehensive and results are promising. The authors conduct a various comparison between different methods with multiple evaluation metrics."
            },
            "weaknesses": {
                "value": "1. The main novelty of this paper lies in introduction of listwise loss and incorporating reward score into optimizations. For Listwise loss, DPO appendix also introduces how to extend from binary preference to multiple examples. The authors ignore this extension case and simply treat DPO as limited to binary preference. Without this comparison, the novelty of this paper is not clear.\n\n2. The experimental results cannot clearly attribute performance improvements to the proposed components. More ablation study may help provide more insights, e.g., listwise loss may be the main factor or the strategy of introducing reward score. Another concern is in  metrics, which is not clearly discussed. The reward model is trained in optimization and may not be a good evaluation metric, especially this may not be fair for different model comparisons and  difficult for other readers to understand the level of performance. A side note: The presentation also needs improvement. The The abbreviation is suggested to be first introduced and then used, e.g., PPL."
            },
            "questions": {
                "value": "How to constrast LIRE and listwise version of DPO introduced in DPO paper appendix? What are the main conceptual differences and performance differences?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 3,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission558/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1699034101170,
        "cdate": 1699034101170,
        "tmdate": 1699635983098,
        "mdate": 1699635983098,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "JUwK43qap3",
        "forum": "4pW8NL1UwH",
        "replyto": "4pW8NL1UwH",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission558/Reviewer_Cmfo"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission558/Reviewer_Cmfo"
        ],
        "content": {
            "summary": {
                "value": "The paper proposes a new method for aligning large language models with human/ai feedback. As opposed to methods like PPO that involve a regularization objective, the authors propose LIRE which involves sampling n responses for each prompt and then maximizing the expected reward on the sampled responses. \n\nThe proposed objective is differentiable, as it only involves a softmax over the candidate generations. The authors claim that since the method involves sampling from the aligned policy model the method does not require regularizing the policy to the anchor model."
            },
            "soundness": {
                "value": "2 fair"
            },
            "presentation": {
                "value": "2 fair"
            },
            "contribution": {
                "value": "2 fair"
            },
            "strengths": {
                "value": "* Alignment is an important problem in AI and newer methods for alignment are welcome since they can potentially engender discussion and help the community progress. \n* Current methods rely on regularization objectives [PPO, SLiC] to ensure the aligned policy does not deviate from the anchor policy model, the problem of policy divergence and reward over-optimization is an important one. In as much contributions that improve robustness of alignment techniques are welcome. \n* The authors benchmark their approach on two real world datasets and provide qualitative results in the supplemental sections suggesting thoroughness in terms of evaluation,"
            },
            "weaknesses": {
                "value": "* The paper makes some very strong conjectures without substantial backing of their claims. one such instances are \n- Section 5.5 The authors claim that their objective implicitly includes the SFT objective? This is a very strong claim, and I do not believe this is the case. Unless the authors can demonstrate this mathematically I would suggest the authors tone down their narrative. \n\n* The authors claim that adding SFT loss would prevent the model from reward over-optimization. This is incorrect! Unless the alignment strategy also includes the pretraining loss, adding just the SFT loss would lead to the model collapse. This is exactly the reason regularization objectives like KL-div are including in alignment objectives, as they make the aligned policy close to the SFT policy, which preserves knowledge from the pretraining steps as well. \n\n* Another line of work that is similar and involves sampling of multiple responses is Sequence Likelihood Calibration SLiC (Zhao et al, 2022) which the author have not considered or benchmarked against, a major omission in my opinion.\n\n* Finally the paper does NOT consider \"list-wise\" approaches at all. In the case of listwise approaches, loss functions are designed in an ordinal fashion that ranks candidates in a list order. In this paper however the authors sample M generations, compute their likelihoods and take an expectation over the reward signal under the M generations, using a softmax. This is an \"absolute\" estimation of reward and claiming this to be \"listwise\" is gravely misleading."
            },
            "questions": {
                "value": "- Can the authors provide evidence in terms of divergence metrics/regularization metrics between a policy tuned with LIRE and the anchor policy to prove that the LIRE objective ensures closeness to the supervised policy?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "4: You are confident in your assessment, but not absolutely certain. It is unlikely, but not impossible, that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work."
            },
            "code_of_conduct": {
                "value": "Yes"
            },
            "first_time_reviewer": {
                "value": "Yes",
                "readers": [
                    "ICLR.cc/2024/Conference/Program_Chairs",
                    "ICLR.cc/2024/Conference/Submission558/Senior_Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission558/Area_Chairs",
                    "ICLR.cc/2024/Conference/Submission558/Reviewer_Cmfo"
                ]
            }
        },
        "number": 4,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission558/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1699156686422,
        "cdate": 1699156686422,
        "tmdate": 1699635983040,
        "mdate": 1699635983040,
        "license": "CC BY 4.0",
        "version": 2
    },
    {
        "id": "bem96GWn5v",
        "forum": "4pW8NL1UwH",
        "replyto": "4pW8NL1UwH",
        "signatures": [
            "ICLR.cc/2024/Conference/Submission558/Reviewer_Z7nt"
        ],
        "nonreaders": [],
        "readers": [
            "everyone"
        ],
        "writers": [
            "ICLR.cc/2024/Conference",
            "ICLR.cc/2024/Conference/Submission558/Reviewer_Z7nt"
        ],
        "content": {
            "summary": {
                "value": "1. Motivated by moving from a pairwise loss between different generations from a language model to a list-wise approach to directly model the list of (ranked) generations, the paper proposes LIRE: Listwise Reward Enhancement for Preference Alignment.\n2. Concretely, the paper defines a distribution over a list of candidate generations given a prompt, with the probability of each of the instance of the list is proportional to the the probability of the generated sequence under the model (with temperature smoothing)\n3. The authors then define a loss using the aforementioned distribution, weighing each sample in the list with its associated reward from a reward model. \n4. The authors also propose a self-refinement approach for iteratively improving the base policy. \n5. The experiments demonstrate the proposed method obtains improvements over baseline methods for both RM score, perplexity score as well as an LLM prompted evaluation metric for both dialogue generation on Helpful and Harmless dataset, as well as on TL;DR abstract summarization. \n6. Finally the authors also demonstrate that their proposed method continually improves the reward score and reduces variance with increased compute for the self-refinement stage."
            },
            "soundness": {
                "value": "2 fair"
            },
            "presentation": {
                "value": "2 fair"
            },
            "contribution": {
                "value": "3 good"
            },
            "strengths": {
                "value": "1. The proposed methodology for moving from a pairwise approach to a list-wise approach for alignment is well motivated, especially with the ranking information between different LLM model generations becoming increasingly available.\n2. The connection drawn between the proposed method and other direct policy improvement methods like DPO (Page 5) is quite informative in providing a different perspective for the gradient update step.\n3. The improvements from LIRE are quite impressive, especially on the MT-Bench. The proposed method does out-perform the other SoTA approaches."
            },
            "weaknesses": {
                "value": "1. The authors claim that their proposed approach does not require a KL constraint. However, as presented in [1], without a KL constraint, alignment training would lead to a distributional collapse. In my opinion, by training on generations from other (somewhat aligned) LLMs, the authors implicitly leverage the KL constraint, and hence this claim seems a bit strong.\n\n2. The generative distribution defined by the authors is very confusing (Equation 4). As per my understanding, this should be similar in spirit to the top k probability distribution, defined in Definition 7 in [2]. However, that does not seem to be the case. Specifically,\n\n2.1 \\pi_{theta} seems to refer to the log-prob distribution, but in other places, is also referred to as the sampling distribution. This makes it very confusing to understand exactly what this quantity is supposed to model.\n\n2.2 Equation 3 seems to model generations as P_{\\pi_{\\theta}} (y^{i}_{j,k} | x^{i}) , but for autoregressive models that the authors study, the probability should be modelled as P_{\\pi_{theta}}(y^{i}_{j,k} | x^{i}, y^{i}_{j, <k}), which in turn renders it intractable to compute\n\n2.3 The reward itself is computed from a model trained on pairwise comparison data. This seems somewhat opposed to the core problem that the authors are trying to solve: of moving from pair-wise to list-wise approach for modelling alignment interactions.\n\n3. In Algorithm 1, sampling from \\pi_{\\theta} seems intractable (or at least would require setting up a Monte-Carlo chain which would be computationally pretty expensive). The details seem to be missing for this crucial step.\n\n4. The metrics used for evaluation, particularly reward model scores and perplexity under a GPT2 model seem underspecified to be able to compare if a model / approach is better aligned compared to another. Specifically, having a much higher reward under an estimated reward model can be because of improved alignment or because of spurious correlations in the reward modelling dataset which the RM might pick up on. Likewise, perplexity under GPT2 medium model estimates (up to a certain degree) to a certain degree how close the final model is compared to the reference policy (here the GPT2 medium model), which may not directly imply a better aligned model. Having additional win rate metrics, especially comparing two algorithms directly (eg: LIRE vs PPO) might be better to answer the question on which model is better\n\nOverall, the proposed method does seem to improve over baseline approaches, which is quite valuable. Additionally, the problem of studying list-wise ranking methodologies for alignment training is a valid one. However, the ambiguities around the motivation for the approach does raise some questions.\n\n[1] Korbak, Tomasz, Ethan Perez, and Christopher L. Buckley. \"RL with KL penalties is better viewed as Bayesian inference.\" arXiv preprint arXiv:2205.11275 (2022).\n[2] Cao, Zhe, et al. \"Learning to rank: from pairwise approach to listwise approach.\" Proceedings of the 24th international conference on Machine learning. 2007."
            },
            "questions": {
                "value": "Questions:\n\n1. I am very unclear on how the generative sampling is done under the proposed distribution over top-k generations. (Line 2 in the Algorithm 1.) I would be grateful for any clarifications on the same.\n2. Would it be possible to differentiate between the policy distribution and the log-probability under the model for a generation. The intermixing of both causes a fair bit of confusion in understanding the paper.\n3. In Table 1, it seems like the PPO model achieves worse reward compared to a baseline Alpaca-7B model, which seems very counter-intuitive, given that that is what the PPO model should be optimizing for. Would it be possible to provide any intuition on why this might be the case ?\n4. How many samples from the test split are considered for the GPT-4 evaluation ? \n5. In Figure 3, it seems like after LIRE, there are a fair number of samples for which the RM scores actually reduced (below the diagonal and after RM = 0 on the X axis). Is there any intuition on why that might have happened ?"
            },
            "flag_for_ethics_review": {
                "value": [
                    "No ethics review needed."
                ]
            },
            "rating": {
                "value": "5: marginally below the acceptance threshold"
            },
            "confidence": {
                "value": "3: You are fairly confident in your assessment. It is possible that you did not understand some parts of the submission or that you are unfamiliar with some pieces of related work. Math/other details were not carefully checked."
            },
            "code_of_conduct": {
                "value": "Yes"
            }
        },
        "number": 5,
        "invitations": [
            "ICLR.cc/2024/Conference/Submission558/-/Official_Review",
            "ICLR.cc/2024/Conference/-/Edit"
        ],
        "domain": "ICLR.cc/2024/Conference",
        "tcdate": 1699164094687,
        "cdate": 1699164094687,
        "tmdate": 1699635982980,
        "mdate": 1699635982980,
        "license": "CC BY 4.0",
        "version": 2
    }
]